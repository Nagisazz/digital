System.register("chunks:///_virtual/AimStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraHandler.ts","./ComposerHandler.ts","./HardLookAtHandler.ts","./BaseStage.ts"],(function(n){var e,t,a,r,o,i;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){a=n.CameraHandler},function(n){r=n.ComposerHandler},function(n){o=n.HardLookAtHandler},function(n){i=n.BaseStage}],execute:function(){t._RF.push({},"88bfaIvWXtEvbj2GSMaSD21","AimStage",void 0);n("AimStage",function(n){function t(){for(var e,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return(e=n.call.apply(n,[this].concat(i))||this)._handlers=[new a(e._vcam),new r(e._vcam),new o(e._vcam)],e}e(t,n);var i=t.prototype;return i.onEnable=function(){this._handlers.forEach((function(n){return n.enable=!0}))},i.onDisable=function(){this._handlers.forEach((function(n){return n.enable=!1}))},i.updateStage=function(n){var e=this._vcam.aim,t=this._handlers[e.type];t&&t.updateCamera(n)},t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/Application.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalAudio.ts","./Tips.ts","./BundleManager.ts","./CacheManager.ts","./ReleaseManager.ts","./DataCenter.ts","./Config.ts","./Enums.ts","./Logger.ts","./LocalStorage.ts","./CanvasHelper.ts","./Platform.ts","./Singleton.ts","./AssetManager.ts","./EventManager.ts","./LayerManager.ts","./MapManager.ts","./MarkerManager.ts","./NodePoolManager.ts","./PolygonManager.ts","./UIManager.ts"],(function(e){var n,t,o,a,r,g,u,i,c,s,l,f,p,d,M,y,k,A,L,m,w,v,h,C;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,o=e.assetManager},function(e){a=e.default},function(e){r=e.default},function(e){g=e.BundleManager},function(e){u=e.CacheManager},function(e){i=e.ReleaseManager},function(e){c=e.DataCenter},function(e){s=e.Config},function(e){l=e.LogLevel},function(e){f=e.LoggerImpl},function(e){p=e.LocalStorage},function(e){d=e.CanvasHelper},function(e){M=e.Platform},function(e){y=e.Singleton},function(e){k=e._AssetManager},function(e){A=e.EventManager},function(e){L=e.default},function(e){m=e.MapManager},function(e){w=e.MarkerManager},function(e){v=e.NodePoolManager},function(e){h=e.PolygonManager},function(e){C=e.UIManager}],execute:function(){t._RF.push({},"7131fsiMR1NGLnvA8ol93/F","Application",void 0);var b=new(e("Application",function(){function e(){this._globalAudio=null,this._enterBackgroundTime=0}var t=e.prototype;return t.init=function(){},t.update=function(e){},t.onLoad=function(e){o.presets.remote.maxRetryCount=0,App.uiManager.onLoad(e),App.layerManager.onLoad(e),App.releaseManger.onLoad(e),App.mapManager.onLoad(e),App.markerManager.onLoad(e),App.polygonManager.onLoad(e)},t.onDestroy=function(e){App.uiManager.onDestroy(e),App.mapManager.onDestroy(e),App.markerManager.onDestroy(e),App.polygonManager.onDestroy(e)},t.onEnterBackground=function(){this._enterBackgroundTime=Date.timeNow(),Log.d("[MainController]","onEnterBackground "+this._enterBackgroundTime),App.globalAudio.onEnterBackground()},t.onEnterForgeground=function(){var e=Date.timeNow(),n=e-this._enterBackgroundTime;Log.d("[MainController]","onEnterForgeground "+e+" background total time : "+n),App.globalAudio.onEnterForgeground(n)},n(e,[{key:"isLazyRelease",get:function(){return!0}},{key:"isAutoReleaseUnuseResources",get:function(){return!0}},{key:"autoReleaseUnuseResourcesTimeout",get:function(){return 300}},{key:"uiManager",get:function(){return y.get(C)}},{key:"layerManager",get:function(){return y.get(L,!0,s.LAYERS)}},{key:"eventManager",get:function(){return y.get(A)}},{key:"platform",get:function(){return y.get(M)}},{key:"dataCenter",get:function(){return y.get(c)}},{key:"storage",get:function(){return y.get(p)}},{key:"asset",get:function(){return y.get(k)}},{key:"cache",get:function(){return y.get(u)}},{key:"releaseManger",get:function(){return y.get(i)}},{key:"bundleManager",get:function(){return y.get(g)}},{key:"pool",get:function(){return y.get(v)}},{key:"canvasHelper",get:function(){return y.get(d)}},{key:"tips",get:function(){return y.get(r)}},{key:"mapManager",get:function(){return y.get(m)}},{key:"markerManager",get:function(){return y.get(w)}},{key:"polygonManager",get:function(){return y.get(h)}},{key:"logger",get:function(){return y.get(f)}},{key:"globalAudio",get:function(){return this._globalAudio||(this._globalAudio=this.uiManager.addComponent(a)),this._globalAudio}}]),e}()));b.logger.level=l.ALL,window.App=b,b.init(),window.Log=console,window.Log.e=console.error,window.Log.d=console.log,window.Log.w=console.warn,window.Log.dump=console.debug,t._RF.pop()}}}));

System.register("chunks:///_virtual/AssetManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Resource.ts","./BundleDef.ts","./Macros.ts","./CocosUtils.ts"],(function(e){var t,a,n,r,o,i,l,s,c,u,d,p,h,m,f,A,g,v,C,y,S,R;return{setters:[function(e){t=e.createClass},function(e){a=e.cclegacy,n=e.assetManager,r=e.Prefab,o=e.SpriteFrame,i=e.isValid,l=e.SpriteAtlas,s=e.sp,c=e.ParticleAsset,u=e.Texture2D,d=e.JsonAsset,p=e.TextAsset},function(e){h=e.Resource},function(e){m=e.BundleDef},function(e){f=e.Macro},function(e){A=e.setSpriteSpriteFrame,g=e.getAsset,v=e.addExtraLoadResource,C=e.setSkeletonSkeletonData,y=e.setButtonSpriteFrame,S=e.loadDragonDisplay,R=e.setParticleSystemFile}],execute:function(){a._RF.push({},"d5155Dsh2VKvJlkUg0+BhR8","AssetManager",void 0);var F=function(){function e(){this._logTag="[RemoteLoader] "}var t=e.prototype;return t.loadImage=function(e,t){var a=this;return new Promise((function(n){if(null==e||null==e||e.length<=0)n([null,null]);else{h.getKey(e,o);if(t){var r=App.releaseManger.getRemote(e,o),i=r[0],l=r[1];if(i)return App.cache.remoteCaches.set(l),App.cache.remoteCaches.set(i),void n([i,i.data]);if(i=App.cache.remoteCaches.getSpriteFrame(e))return void n([i,i.data])}else{var s=App.releaseManger.getRemote(e,o),c=s[0],d=s[1];c&&(App.cache.remoteCaches.set(c),App.cache.remoteCaches.set(d)),App.cache.remoteCaches.remove(e,o,!0)}a._loadRemoteRes(e,u,t).then((function(t){var a=t[0],r=t[1],i=h.getKey(e,u);a=App.cache.remoteCaches.get(i),r&&a?(a.data=r,a.data.name=e,n(App.cache.remoteCaches.makeSpriteFrame(e,a.data))):(n([null,null]),App.cache.remoteCaches.remove(e,o,!0))}))}}))},t.loadSkeleton=function(e,t,a){var n=this;return new Promise((function(r){if(e&&t){var o=(e=e+"/"+t)+".atlas",i=e+".png",l=e+".json",c=App.releaseManger.getRemote(e,s.SkeletonData),m=c[0],A=c[1],g=c[2],v=c[3];if(m)return App.cache.remoteCaches.set(m),App.cache.remoteCaches.set(A),App.cache.remoteCaches.set(g),App.cache.remoteCaches.set(v),void r([m,m.data]);var C=h.getKey(e,s.SkeletonData);(m=App.cache.remoteCaches.get(C))?m.isLoaded?r([m,m.data]):m.finishCb.push(r):((m=new h.Cache(e,s.SkeletonData,f.BUNDLE_REMOTE)).resourceType=h.Type.Remote,App.cache.remoteCaches.set(m),n._loadRemoteRes(i,u,a).then((function(e){e[0];var i=e[1];i?n._loadRemoteRes(l,d,a).then((function(e){e[0];var l=e[1];l?n._loadRemoteRes(o,p,a).then((function(e){e[0];var a=e[1];a?(App.cache.remoteCaches.makeSkeletonData(m,i,l,a,t),r([m,m.data]),m.doFinish([m,m.data])):(r([null,null]),m.doFinish([null,null]),App.cache.remoteCaches.remove(m.url,s.SkeletonData,!0))})):(r([null,null]),m.doFinish([null,null]),App.cache.remoteCaches.remove(m.url,s.SkeletonData,!0))})):(r([null,null]),m.doFinish([null,null]),App.cache.remoteCaches.remove(m.url,s.SkeletonData,!0))})))}else r([null,null])}))},t.extname=function(e){var t=e.match(/(\.[^\.\/\?\\]*)(\?.*)?$/);return t?t[1]:".png"},t._loadRemoteRes=function(e,t,a,r){var o=this;return void 0===r&&(r={}),new Promise((function(i){var l=h.getKey(e,t),s=App.releaseManger.getRemote(l,t)[0];if(s)return s.data.addRef(),App.cache.remoteCaches.set(s),s.doFinish([s,s.data]),s.doGet(),void i([s,s.data]);(s=App.cache.remoteCaches.get(l))?s.isLoaded?i([s,s.data]):s.finishCb.push(i):((s=new h.Cache(e,t,f.BUNDLE_REMOTE)).resourceType=h.Type.Remote,App.cache.remoteCaches.set(s),r.cacheAsset=!0,r.reloadAsset=!a,t==u&&(r.ext=o.extname(e)),n.loadRemote(e,r,(function(e,t){s&&(s.isLoaded=!0,t&&(s.data=t),s.doFinish([s,s.data]),s.doGet(),i([s,s.data]))})))}))},t.update=function(){},e}();e("_AssetManager",function(){function e(){this.isResident=!0,this.module=null,this._remote=new F}var a=e.prototype;return a.getBundle=function(e){return App.bundleManager.getBundle(e)},a.loadPrefab=function(e,t){return void 0===t&&(t="resources"),new Promise((function(a,o){n.getBundle(t).load(e,r,(function(t,n){t?o("加载prefab : "+e+" 失败"):a(n)}))}))},a.loadRemoteImage=function(e,t){var a,n=e;null!=t.isNeedCache&&null!=t.isNeedCache||(t.isNeedCache=!0);var r=!1;t.retain&&(r=!0),n.loadUrl=t.url;var l=null!=(a=t.bundle)?a:m.MAIN;this.remote.loadImage(t.url,t.isNeedCache).then((function(e){var a=e[0],s=e[1];n.loadUrl==(null==s?void 0:s.nativeUrl)&&(s?A({url:t.url,sprite:n,spriteFrame:s,complete:t.complete,resourceType:h.Type.Remote,retain:r,cache:a}):(t.defaultSpriteFrame&&"string"==typeof t.defaultSpriteFrame&&(t.defaultSpriteFrame=t.defaultSpriteFrame+"/spriteFrame",App.cache.getCacheByAsync(t.defaultSpriteFrame,o,l).then((function(e){var a=e[0],r=e[1];A({url:t.defaultSpriteFrame,sprite:n,spriteFrame:r,complete:t.complete,cache:a})}))),t.complete&&i(n)&&t.complete(s)))}))},a.loadLocalImage=function(e,t){var a,n=e,r=t.url,i=t.complete,s=null!=(a=t.bundle)?a:m.MAIN,c=function(e){var t=e[0],a=e[1],r=e[2],o=e[3];A({url:r,sprite:n,spriteFrame:a,complete:i,cache:t,isAtlas:o})};if("string"==typeof r){if(r+="/spriteFrame",t.dir)return void App.cache.getCache(t.dir,o,s,!0).then((function(e){var a=e[0];e[1];c([a,g(t.dir,r,s,o),t.dir,!1])}));App.cache.getCacheByAsync(r,o,s).then((function(e){var t=e[0],a=e[1];c([t,a,r,!1])}))}else{var u=r.urls,d=r.key;if(t.dir)return void App.cache.getCache(t.dir,l,s,!0).then((function(e){var a=e[0];if(e[1]){for(var n=App.bundleManager.getBundle(s),o=!1,i=0;i<u.length;i++){var p=n.get(t.dir+"/"+u[i],l);if(p&&p.getSpriteFrame(d)){v(a),c([a,p.getSpriteFrame(d),t.dir,!0]),o=!0;break}}o||(Log.w("加载的资源中未找到:"+s+"/"+t.dir+"/"+r),c([null,null,t.dir,!0]))}else Log.w("未加载资源"+t.dir),c([null,null,t.dir,!0])}));App.cache.getSpriteFrameByAsync(r.urls,r.key,v,s).then((function(e){e&&e.isTryReload||c([e.cache,e.spriteFrame,e.url,!0])}))}},a.loadRemoteSkeleton=function(e,t){var a=e;null!=t.isNeedCache&&null!=t.isNeedCache||(t.isNeedCache=!0),App.asset.remote.loadSkeleton(t.path,t.name,t.isNeedCache).then((function(e){var n=e[0],r=e[1];C({component:a,config:t,data:r,resourceType:h.Type.Remote,cache:n})}))},a.loadLocalSkeleton=function(e,t){var a,n=e,r=t.url,o=null!=(a=t.bundle)?a:m.MAIN,i=function(e){var a=e[0],r=e[1];C({component:n,config:t,data:r,cache:a})};t.dir?App.cache.getCache(t.dir,s.SkeletonData,o,!0).then((function(e){var a=e[0];e[1];t.url=t.dir,i([a,g(t.dir,r,o,s.SkeletonData)])})):App.cache.getCacheByAsync(r,s.SkeletonData,o).then((function(e){var t=e[0],a=e[1];i([t,a])}))},a.loadButton=function(e,t){y(e,t)},a.loadDisplay=function(e,t){S(e,t)},a.loadParticleFile=function(e,t){var a,n=e,r=t.url,o=null!=(a=t.bundle)?a:m.MAIN;t.dir?App.cache.getCache(t.dir,c,o,!0).then((function(e){var a=e[0];e[1];t.url=t.dir,R(n,t,g(t.dir,r,o,c),a)})):App.cache.getCacheByAsync(r,c,o).then((function(e){var a=e[0],r=e[1];R(n,t,r,a)}))},a.load=function(e,t,a,n,r){var o=h.getKey(t,a),i=App.releaseManger.get(e,o);if(i)return console.time("加载资源 : "+e+"/"+o),App.cache.set(i),void this._onLoadComplete(i,r,null,i.data);if(i=App.cache.get(e,t,a))i.isLoaded?r(i):i.finishCb.push(r),i.status=h.CacheStatus.NONE;else{i=new h.Cache(t,a,e),App.cache.set(i),console.time("加载资源 : "+e+"/"+o);var l=this.getBundle(e);if(!l){var s=new Error(this.module+" "+e+" 没有加载，请先加载");return void this._onLoadComplete(i,r,s,null)}if(!a){var c=new Error(this.module+" "+e+" "+t+" 加载没有指定资源类型");return void this._onLoadComplete(i,r,c,null)}var u=l.get(t,a);u?this._onLoadComplete(i,r,null,u):n?l.load(t,a,n,this._onLoadComplete.bind(this,i,r)):l.load(t,a,this._onLoadComplete.bind(this,i,r))}},a._onLoadComplete=function(e,t,a,n){e.isLoaded=!0;var r=e,o=e.key;a?(Log.e(this.module+"加载资源失败:"+e.bundle+"/"+o+" 原因:"+(a.message?a.message:"未知")),e.data=null,r.data=null,App.cache.remove(e),t(e)):(e.data=n,r.data=n,t(e)),e.doFinish(e),e.doGet(),e.status==h.CacheStatus.WAITTING_FOR_RELEASE&&e.data&&(e.status=h.CacheStatus.NONE,this.releaseAsset(e)),console.timeEnd("加载资源 : "+e.bundle+"/"+o),e=null},a.loadDir=function(e,t,a,n,r){var o=h.getKey(t,a),i=App.releaseManger.get(e,o);if(i)return console.time("加载资源 : "+e+"/"+o),App.cache.set(i),void this._onLoadComplete(i,r,null,i.data);if(i=App.cache.get(e,o,a))i.isLoaded?r(i):i.finishCb.push(r),i.status=h.CacheStatus.NONE;else{i=new h.Cache(o,a,e),App.cache.set(i),console.time("加载资源 : "+e+"/"+i.key);var l=this.getBundle(e);if(!l){var s=new Error(this.module+" "+e+" 没有加载，请先加载");return void this._onLoadComplete(i,r,s,null)}if(a)n?l.loadDir(t,a,n,this._onLoadComplete.bind(this,i,r)):l.loadDir(t,a,this._onLoadComplete.bind(this,i,r));else{var c=new Error(this.module+" "+e+" "+t+" 加载没有指定资源类型");this._onLoadComplete(i,r,c,null)}}},a.releaseAsset=function(e){if(e=App.cache.get(e.bundle,e.url,e.type,!1))if(e.isLoaded){if(e.retain)return;App.releaseManger.release(e)}else e.status=h.CacheStatus.WAITTING_FOR_RELEASE},a.retainAsset=function(e){if(e){var t=App.cache.get(e.bundle,e.url,e.type);if(t)if(t.retain||(t.retain=e.retain),Array.isArray(t.data)){t.refCount++;for(var a=0;a<t.data.length;a++)t.data[a]&&t.data[a].addRef()}else t.data&&t.data.addRef()}},a.addPersistAsset=function(e){e.retain=!0,this.retainAsset(e)},t(e,[{key:"remote",get:function(){return this._remote}}]),e}()).module="【资源管理器】",a._RF.pop()}}}));

System.register("chunks:///_virtual/AudioComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Macros.ts","./EventComponent.ts","./Singleton.ts"],(function(t){var e,s,o,i,u,n,c,a,f;return{setters:[function(t){e=t.createClass,s=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,u=t.AudioSource,n=t.AudioClip},function(t){c=t.Macro},function(t){a=t.default},function(t){f=t.Singleton}],execute:function(){var r;o._RF.push({},"755d8o2Yj1HWbwPkva34V4o","AudioComponent",void 0);var h=i.ccclass,l=(i.property,i.menu,t("AudioInfo",function(){function t(){this.url="",this.bundle=c.BUNDLE_RESOURCES,this.source=null,this.owner=null,this.isPause=!1}var s=t.prototype;return s.play=function(){this.isPause=!1,this.source&&this.source.play()},s.pause=function(){this.isPause=!1,this.source&&this.source.playing&&(Log.d(this.url,"isPlaying to pause"),this.isPause=!0,this.source.pause())},s.stop=function(){this.isPause=!1,this.source&&this.source.stop()},s.resume=function(){this.source&&this.isPause&&(Log.d(this.url,"resume play"),this.source.play()),this.isPause=!1},e(t,[{key:"volume",get:function(){return this.source?this.source.volume:0},set:function(t){this.source&&(this.source.volume=t)}}]),t}())),p=function(){function t(){this.module=null,this.musicVolume=1,this.effectVolume=1,this.isEffectOn=!0,this.isMusicOn=!0,this.musicInfos=new Map,this.effectInfos=new Map,this.curMusic=null,this._storeMusicKey="default_save_music",this._storeEffectKey="default_save_effect",this._storeMusicVolumeKey="default_save_music_volume_key",this._storeEffectVolumeKey="default_save_effect_volume_key"}var e=t.prototype;return e.init=function(){this.isMusicOn=App.storage.getItem(this._storeMusicKey,this.isMusicOn),this.isEffectOn=App.storage.getItem(this._storeEffectKey,this.isEffectOn),this.musicVolume=App.storage.getItem(this._storeMusicVolumeKey,this.musicVolume),this.effectVolume=App.storage.getItem(this._storeEffectVolumeKey,this.effectVolume)},e.save=function(){try{App.storage.setItem(this._storeMusicKey,this.isMusicOn),App.storage.setItem(this._storeMusicVolumeKey,this.musicVolume),App.storage.setItem(this._storeEffectKey,this.isEffectOn),App.storage.setItem(this._storeEffectVolumeKey,this.effectVolume)}catch(t){}},e.remove=function(t){this.musicInfos.forEach((function(e,s,o){e.owner&&e.owner==t&&o.delete(s)})),this.effectInfos.forEach((function(e,s,o){e.owner&&e.owner==t&&o.delete(s)}))},e.setMusicVolume=function(t){this.musicInfos.forEach((function(e,s,o){e.volume=t})),this.musicVolume=t,this.save()},e.setEffectVolume=function(t){this.effectInfos.forEach((function(e,s,o){e.volume=t})),this.effectVolume=t,this.save()},e.setMusicStatus=function(t){this.isMusicOn!=t&&(this.isMusicOn=t,this.save(),t?this.curMusic&&this.curMusic.play():this.stopMusic())},e.setEffectStatus=function(t){this.isEffectOn!=t&&(this.isEffectOn=t,this.save(),t||this.stopAllEffects())},e.stopAllEffects=function(){this.effectInfos.forEach((function(t,e,s){t.stop()}))},e.stopMusic=function(){this.musicInfos.forEach((function(t,e,s){t.stop()}))},e.makeKey=function(t,e){return App.bundleManager.getBundleName(e)+"_"+t},e.stopEffect=function(t,e){var s=this.makeKey(t,e),o=this.effectInfos.get(s);o&&o.stop()},e.resumeAll=function(){var t=this;this.musicInfos.forEach((function(e,s,o){t.isMusicOn&&e.resume()})),this.effectInfos.forEach((function(e,s,o){t.isEffectOn&&e.resume()}))},e.pauseAll=function(){this.musicInfos.forEach((function(t,e,s){t.pause()})),this.effectInfos.forEach((function(t,e,s){t.pause()}))},t}();p.module="【音效数据】";t("default",h("AudioComponent")(r=function(t){function o(){for(var e,s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).owner=null,e}s(o,t);var i=o.prototype;return i.onDestroy=function(){this.audioData.remove(this.owner),t.prototype.onDestroy.call(this)},i.save=function(){this.audioData.save()},i.stopEffect=function(t,e){this.audioData.stopEffect(t,e)},i.stopAllEffects=function(){this.audioData.stopAllEffects()},i.stopMusic=function(){this.audioData.stopMusic()},i.playMusic=function(t,e,s){var o=this;return void 0===s&&(s=!0),new Promise((function(i){var c=o.audioData.makeKey(t,e),a=o.audioData.musicInfos.get(c);a||((a=new l).url=t,a.bundle=e,a.source=o.node.addComponent(u),a.owner=o.owner,a.source.name=c,a.source.playOnAwake=!0,o.audioData.musicInfos.set(c,a)),o.audioData.curMusic=a,App.cache.getCacheByAsync(t,n,e).then((function(t){var e=t[0],u=t[1];u?(App.uiManager.retainMemory.addLocal(e),o.stopMusic(),a&&a.source&&(a.source.clip=u,a.source.loop=s,a.volume=o.musicVolume,o.play(a,!0,i))):i(!1)}))}))},i.playEffect=function(t,e,s){var o=this;return void 0===s&&(s=!1),new Promise((function(i){var c=o.audioData.makeKey(t,e),a=o.audioData.effectInfos.get(c);a||((a=new l).url=t,a.bundle=e,a.source=o.node.addComponent(u),a.owner=o.owner,a.source.name=c,a.source.playOnAwake=!0,o.audioData.effectInfos.set(c,a)),App.cache.getCacheByAsync(t,n,e).then((function(t){var e=t[0],u=t[1];u?(App.uiManager.retainMemory.addLocal(e),a&&a.source&&(a.source.clip=u,a.source.loop=s,a.source.volume=o.effectVolume,o.play(a,!1,i))):i(!1)}))}))},i.play=function(t,e,s){t&&t.source?e?this.isMusicOn?(t.source.play(),s(!0)):s(!1):this.isEffectOn?(t.source.play(),s(!0)):s(!1):s(!1)},i.onEnterBackground=function(){this.audioData.pauseAll()},i.onEnterForgeground=function(t){this.audioData.resumeAll()},e(o,[{key:"audioData",get:function(){return f.get(p)}},{key:"musicVolume",get:function(){return this.audioData.musicVolume},set:function(t){this.audioData.setMusicVolume(t)}},{key:"effectVolume",get:function(){return this.audioData.effectVolume},set:function(t){this.audioData.setEffectVolume(t)}},{key:"isEffectOn",get:function(){return this.audioData.isEffectOn},set:function(t){this.audioData.setEffectStatus(t)}},{key:"isMusicOn",get:function(){return this.audioData.isMusicOn},set:function(t){this.audioData.setMusicStatus(t)}}]),o}(a))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/Base.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"7ed53QF19xDKpBXf0Exg9FK","Base",void 0);var a=e("BaseFlag",function(e){return e[e.None=0]="None",e[e.Enable=1]="Enable",e[e.Custom=4]="Custom",e}({}));e("Base",function(){function e(){this._objFlag=0}return n(e,[{key:"enable",get:function(){return!!(this._objFlag&a.Enable)},set:function(e){e?this._objFlag&a.Enable||(this._objFlag|=a.Enable,this.onEnable&&this.onEnable()):this._objFlag&a.Enable&&(this._objFlag&=~a.Enable,this.onDisable&&this.onDisable())}}]),e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(t){var n,e,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.Base}],execute:function(){e._RF.push({},"df4cbX9ulFLKoY3A7/bYnD1","BaseStage",void 0);t("BaseStage",function(t){function e(n){var e;return(e=t.call(this)||this)._vcam=n,e}n(e,t);var o=e.prototype;return o.updateStage=function(t){},o.onLookAtChanged=function(t){},o.onFollowChanged=function(t){},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/BitEncrypt.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"7a941GWpHdPxoRtTWkM3qNE","BitEncrypt",void 0);t("BitEncrypt",new(function(){function t(){this.logTag="[BitEncrypt]:",this._encryptKey="EskKbMvzZBILhcTv"}var n=t.prototype;return n.decode=function(t,e){return this._code(t,e)},n.encode=function(t,e){return this._code(t,e)},n._code=function(t,e){var n=this._check(t,e);if(n.isOK){for(var r=[],c=0;c<t.length;c++)r.push(t.charCodeAt(c));for(var i=0,o=/[\w\d_-`~#!$%^&*(){}=+;:'"<,>,/?|\\\u4e00-\u9fa5]/g,h=0;h<r.length;h++){var s=t[h].match(o);s&&s.length>0&&(r[h]^=n.key.charCodeAt(i),(s=String.fromCharCode(r[h]).match(o))&&s.length||(r[h]^=n.key.charCodeAt(i)),++i>=n.key.length&&(i=0))}for(var u="",y=0;y<r.length;y++)u+=String.fromCharCode(r[y]);return u}return t},n._check=function(t,e){return t&&t.length>0?e&&e.length>0?{isOK:!0,key:e}:this.encryptKey&&this.encryptKey.length>0?{isOK:!0,key:this.encryptKey}:{isOK:!1,key:""}:{isOK:!1,key:""}},e(t,[{key:"encryptKey",get:function(){return this._encryptKey},set:function(t){this._encryptKey=t}}]),t}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/BodyStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraHandler.ts","./FreeLookHandler.ts","./TrackedHandler.ts","./BaseStage.ts"],(function(n){var e,t,a,r,o,c;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){a=n.CameraHandler},function(n){r=n.FreeLookHandler},function(n){o=n.TrackedHandler},function(n){c=n.BaseStage}],execute:function(){t._RF.push({},"5627bFcwB5J3aVbbjIi2ckH","BodyStage",void 0);n("BodyStage",function(n){function t(){for(var e,t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];return(e=n.call.apply(n,[this].concat(c))||this)._handlers=[new a(e._vcam),new r(e._vcam),new o(e._vcam)],e}e(t,n);var c=t.prototype;return c.onEnable=function(){this._handlers.forEach((function(n){return n.enable=!0}))},c.onDisable=function(){this._handlers.forEach((function(n){return n.enable=!1}))},c.onLookAtChanged=function(n){this._handlers.forEach((function(e){return e.onLookAtChanged(n)}))},c.updateStage=function(n){var e=this._vcam.body,t=this._handlers[e.type];t&&t.updateCamera(n)},t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/BundleDef.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"628afa6bG5LcpAV9mRIf++4","BundleDef",void 0);var c=e("BundleDef",(function(){}));c.MAIN="mainScene",c.MODEL="model",c.CAMERA="cinestation",n._RF.pop()}}}));

System.register("chunks:///_virtual/BundleManager.ts",["cc","./Macros.ts"],(function(n){var e,u,t,r;return{setters:[function(n){e=n.cclegacy,u=n.AssetManager,t=n.assetManager},function(n){r=n.Macro}],execute:function(){e._RF.push({},"5aa44v4t19IIb9BRfcXqxEg","BundleManager",void 0),n("BundleManager",function(){function n(){this.module=null}var e=n.prototype;return e.isEngineBundle=function(n){return n==u.BuiltinBundleName.MAIN||n==u.BuiltinBundleName.RESOURCES||n==u.BuiltinBundleName.START_SCENE||n==u.BuiltinBundleName.INTERNAL},e.removeLoadedBundle=function(n){var e=this,u=[];t.bundles.forEach((function(n,t){e.isEngineBundle(t)||u.push(t)}));for(var r=u.length;r--;){var a=u[r];if(-1==n.indexOf(a)){var l=this.getBundle(a);l&&(App.cache.removeBundle(a),App.releaseManger.removeBundle(l))}}},e.getBundle=function(n){return n?"string"==typeof n?t.getBundle(n):n:null},e.getBundleName=function(n){return n?"string"==typeof n?n:n.name:(Log.e("输入参数错误 : "+n),r.UNKNOWN)},e._loadBundle=function(n,e){t.loadBundle(n,e)},e.debug=function(){Log.d("-------Bundle管理器状态信息-------");var n=[];t.bundles.forEach((function(e,u){n.push(e.name)})),Log.d("当前所有加载完成的bundle : "+n.toString())},n}()).module="【Bundle管理器】",e._RF.pop()}}}));

System.register("chunks:///_virtual/ByteArray.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d2aa7Wiy3BC8IqmuBqYh+Up","ByteArray",void 0);var n=t("Endian",(function(){}));n.LITTLE_ENDIAN="littleEndian",n.BIG_ENDIAN="bigEndian";var s=t("EndianConst",{LITTLE_ENDIAN:0,BIG_ENDIAN:1}),r=1,o=1,a=2,h=4,f=1,u=2,d=4,l=4,_=8;t("ByteArray",function(){function t(t,i){void 0===i&&(i=0),this.bufferExtSize=0,this.data=void 0,this._bytes=void 0,this._position=void 0,this.write_position=void 0,this.$endian=null,this.EOF_byte=-1,this.EOF_code_point=-1,i<0&&(i=0),this.bufferExtSize=i;var e,s=0;if(t){var r;if(t instanceof Uint8Array?(r=t,s=t.length):(s=t.byteLength,r=new Uint8Array(t)),0==i)e=new Uint8Array(s);else e=new Uint8Array((1+(s/i|0))*i);e.set(r)}else e=new Uint8Array(i);this.write_position=s,this._position=0,this._bytes=e,this.data=new DataView(e.buffer),this.endian=n.BIG_ENDIAN}var e=t.prototype;return e.setArrayBuffer=function(t){},e._validateBuffer=function(t){if(this.data.byteLength<t){var i,e=this.bufferExtSize;if(0==e)i=new Uint8Array(t);else i=new Uint8Array((1+(t/e>>0))*e);i.set(this._bytes),this._bytes=i,this.data=new DataView(i.buffer)}},e.clear=function(){var t=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(t),this._bytes=new Uint8Array(t),this._position=0,this.write_position=0},e.readBoolean=function(){return!!this.validate(r)&&!!this._bytes[this.position++]},e.readByte=function(){return this.validate(o)?this.data.getInt8(this.position++):0},e.readBytes=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=0),t){var n=this._position,s=this.write_position-n;if(!(s<0)){if(0==e)e=s;else if(e>s)return;var r=t._position;t._position=0,t.validateBuffer(i+e),t._position=r,t._bytes.set(this._bytes.subarray(n,n+e),i),this.position+=e}}},e.readDouble=function(){if(this.validate(_)){var t=this.data.getFloat64(this._position,this.$endian==s.LITTLE_ENDIAN);return this.position+=_,t}return 0},e.readFloat=function(){if(this.validate(l)){var t=this.data.getFloat32(this._position,this.$endian==s.LITTLE_ENDIAN);return this.position+=l,t}return 0},e.readInt=function(){if(this.validate(h)){var t=this.data.getInt32(this._position,this.$endian==s.LITTLE_ENDIAN);return this.position+=h,t}return 0},e.readShort=function(){if(this.validate(a)){var t=this.data.getInt16(this._position,this.$endian==s.LITTLE_ENDIAN);return this.position+=a,t}return 0},e.readUnsignedByte=function(){return this.validate(f)?this._bytes[this.position++]:0},e.readUnsignedInt=function(){if(this.validate(d)){var t=this.data.getUint32(this._position,this.$endian==s.LITTLE_ENDIAN);return this.position+=d,t}return 0},e.readUnsignedShort=function(){if(this.validate(u)){var t=this.data.getUint16(this._position,this.$endian==s.LITTLE_ENDIAN);return this.position+=u,t}return 0},e.readUTF=function(){var t=this.readUnsignedShort();return t>0?this.readUTFBytes(t):""},e.readUTFBytes=function(t){if(!this.validate(t))return"";var i=this.data,e=new Uint8Array(i.buffer,i.byteOffset+this._position,t);return this.position+=t,this.decodeUTF8(e)},e.writeBoolean=function(t){this.validateBuffer(r),this._bytes[this.position++]=+t},e.writeByte=function(t){this.validateBuffer(o),this._bytes[this.position++]=255&t},e.writeBytes=function(t,i,e){var n;void 0===i&&(i=0),void 0===e&&(e=0),i<0||e<0||(n=0==e?t.length-i:Math.min(t.length-i,e))>0&&(this.validateBuffer(n),this._bytes.set(t._bytes.subarray(i,i+n),this._position),this.position=this._position+n)},e.writeDouble=function(t){this.validateBuffer(_),this.data.setFloat64(this._position,t,this.$endian==s.LITTLE_ENDIAN),this.position+=_},e.writeFloat=function(t){this.validateBuffer(l),this.data.setFloat32(this._position,t,this.$endian==s.LITTLE_ENDIAN),this.position+=l},e.writeInt=function(t){this.validateBuffer(h),this.data.setInt32(this._position,t,this.$endian==s.LITTLE_ENDIAN),this.position+=h},e.writeShort=function(t){this.validateBuffer(a),this.data.setInt16(this._position,t,this.$endian==s.LITTLE_ENDIAN),this.position+=a},e.writeUnsignedInt=function(t){this.validateBuffer(d),this.data.setUint32(this._position,t,this.$endian==s.LITTLE_ENDIAN),this.position+=d},e.writeUnsignedShort=function(t){this.validateBuffer(u),this.data.setUint16(this._position,t,this.$endian==s.LITTLE_ENDIAN),this.position+=u},e.writeUTF=function(t){var i=this.encodeUTF8(t),e=i.length;this.validateBuffer(u+e),this.data.setUint16(this._position,e,this.$endian==s.LITTLE_ENDIAN),this.position+=u,this._writeUint8Array(i,!1)},e.writeUTFBytes=function(t,i){this._writeUint8Array(this.encodeUTF8(t,i))},e.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},e._writeUint8Array=function(t,i){void 0===i&&(i=!0);var e=this._position,n=e+t.length;i&&this.validateBuffer(n),this.bytes.set(t,e),this.position=n},e.validate=function(t){var i=this._bytes.length;return i>0&&this._position+t<=i},e.validateBuffer=function(t){this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this._validateBuffer(t)},e.encodeUTF8=function(t,i){for(var e=0,n=this.stringToCodePoints(t),s=[];n.length>e;){var r=n[e++];if(this.inRange(r,55296,57343))this.encoderError(r);else if(this.inRange(r,0,127))if(null==i)s.push(r);else{if(!(s.length+1<i))break;s.push(r)}else{var o=0,a=0;if(this.inRange(r,128,2047)?(o=1,a=192):this.inRange(r,2048,65535)?(o=2,a=224):this.inRange(r,65536,1114111)&&(o=3,a=240),null==i)for(s.push(this.div(r,Math.pow(64,o))+a);o>0;){var h=this.div(r,Math.pow(64,o-1));s.push(128+h%64),o-=1}else{var f=0;for(s.push(this.div(r,Math.pow(64,o))+a),f++;o>0;){var u=this.div(r,Math.pow(64,o-1));s.push(128+u%64),o-=1,f++}if(s.length>i){s.splice(s.length-f,f);break}}}}if(null!=i&&s.length<i)for(var d=i-s.length;d>0;)s.push(0),d--;return new Uint8Array(s)},e.decodeUTF8=function(t){for(var i=!1,e=0,n="",s=null,r=0,o=0,a=0,h=0;t.length>e;){var f=t[e++];if(f==this.EOF_byte)s=0!=o?this.decoderError(i):this.EOF_code_point;else if(0==o)this.inRange(f,0,127)?s=f:(this.inRange(f,194,223)?(o=1,h=128,r=f-192):this.inRange(f,224,239)?(o=2,h=2048,r=f-224):this.inRange(f,240,244)?(o=3,h=65536,r=f-240):this.decoderError(i),r*=Math.pow(64,o),s=null);else if(this.inRange(f,128,191))if(a+=1,r+=(f-128)*Math.pow(64,o-a),a!==o)s=null;else{var u=r,d=h;r=0,o=0,a=0,h=0,s=this.inRange(u,d,1114111)&&!this.inRange(u,55296,57343)?u:this.decoderError(i,f)}else r=0,o=0,a=0,h=0,e--,s=this.decoderError(i,f);null!==s&&s!==this.EOF_code_point&&(s<=65535?s>0&&(n+=String.fromCharCode(s)):(s-=65536,n+=String.fromCharCode(55296+(s>>10&1023)),n+=String.fromCharCode(56320+(1023&s))))}return n},e.encoderError=function(t){},e.decoderError=function(t,i){return i||65533},e.inRange=function(t,i,e){return i<=t&&t<=e},e.div=function(t,i){return Math.floor(t/i)},e.stringToCodePoints=function(t){for(var i=[],e=0,n=t.length;e<t.length;){var s=t.charCodeAt(e);if(this.inRange(s,55296,57343))if(this.inRange(s,56320,57343))i.push(65533);else if(e==n-1)i.push(65533);else{var r=t.charCodeAt(e+1);if(this.inRange(r,56320,57343)){var o=1023&s,a=1023&r;e+=1,i.push(65536+(o<<10)+a)}else i.push(65533)}else i.push(s);e+=1}return i},i(t,[{key:"endian",get:function(){return this.$endian==s.LITTLE_ENDIAN?n.LITTLE_ENDIAN:n.BIG_ENDIAN},set:function(t){this.$endian=t==n.LITTLE_ENDIAN?s.LITTLE_ENDIAN:s.BIG_ENDIAN}},{key:"readAvailable",get:function(){return this.write_position-this._position}},{key:"buffer",get:function(){return this.data.buffer.slice(0,this.write_position)},set:function(t){var i,e=t.byteLength,n=new Uint8Array(t),s=this.bufferExtSize;0==s?i=new Uint8Array(e):i=new Uint8Array((1+(e/s|0))*s);i.set(n),this.write_position=e,this._bytes=i,this.data=new DataView(i.buffer)}},{key:"rawBuffer",get:function(){return this.data.buffer}},{key:"bytes",get:function(){return this._bytes}},{key:"dataView",get:function(){return this.data},set:function(t){this.buffer=t.buffer}},{key:"bufferOffset",get:function(){return this.data.byteOffset}},{key:"position",get:function(){return this._position},set:function(t){this._position=t,t>this.write_position&&(this.write_position=t)}},{key:"length",get:function(){return this.write_position},set:function(t){this.write_position=t,this.data.byteLength>t&&(this._position=t),this._validateBuffer(t)}},{key:"bytesAvailable",get:function(){return this.data.byteLength-this._position}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CacheManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Macros.ts","./Resource.ts"],(function(e){var t,n,a,s,r,i,u,l,c,o,h,d,f,g;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,a=e.js,s=e.Asset,r=e.SpriteAtlas,i=e.isValid,u=e.SpriteFrame,l=e.Texture2D,c=e.ImageAsset,o=e.sp,h=e.JsonAsset,d=e.TextAsset},function(e){f=e.Macro},function(e){g=e.Resource}],execute:function(){n._RF.push({},"90678Og7mxB2LBggO9XxUic","CacheManager",void 0);var p=function(){function e(e){this._caches=new Map,this.name=f.UNKNOWN,this.name=e}var n=e.prototype;return n.get=function(e,t){if(this._caches.has(e)){var n=this._caches.get(e);return t&&n&&n.isInvalid?(Log.w("资源加载完成，但已经被释放 , 重新加载资源 : "+e),this.remove(e),null):this._caches.get(e)}return null},n.set=function(e){this._caches.set(e.key,e)},n.remove=function(e){return this._caches.delete(e)},n.debug=function(){this.name;var e=this._caches,t=[],n=[];e.forEach((function(e,a,s){e.isLoaded&&e.data?t.push(e.debug()):n.push(e.debug())})),t.length>0&&(Log.d("----------- 有效缓存信息 -----------"),Log.d(JSON.stringify(t))),n.length>0&&(Log.d("----------- 无效缓存信息 -----------"),Log.d(JSON.stringify(n)))},t(e,[{key:"size",get:function(){return this._caches.size}}]),e}(),y=function(){function e(){this._caches=new Map}var t=e.prototype;return t.get=function(e){return this._caches.has(e)?this._caches.get(e):null},t.getSpriteFrame=function(e){var t=g.getKey(e,u),n=this.get(t);return n?this.get(g.getKey(e,l))?n:(this.remove(e,u,!0),null):null},t.makeSpriteFrame=function(e,t){if(t&&t instanceof c){var n=this.getSpriteFrame(e);if(n)return[n,n.data];n=new g.Cache(e,u,f.BUNDLE_REMOTE);var a=new u,s=new l;return s.image=t,a.texture=s,a.name=e,a._nativeUrl=e,n.isLoaded=!0,n.url=e,n.data=a,this.set(n),[n,n.data]}return[null,null]},t.makeSkeletonData=function(e,t,n,a,s){var r=new o.SkeletonData;r.skeletonJson=n.json,r.atlasText=a.text;var i=new l;i.image=t,r.textures=[i];var u=s+".png";return r.textureNames=[u],e.data=r,e.isLoaded=!0,e},t.set=function(e){this._caches.set(e.key,e)},t.retainAsset=function(e){e&&(e.retain?e.retain:e.retain=e.retain,this.addRef(e.url,e.type),e.type==u&&this.addRef(e.url,l),e.type==o.SkeletonData&&(this.addRef(e.url+".png",l),this.addRef(e.url+".json",h),this.addRef(e.url+".atlas",d)))},t.releaseAsset=function(e){if(e){if(e.retain)return;this.remove(e.url,e.type)}},t.addRef=function(e,t){var n=g.getKey(e,t),a=this.get(n);a&&a.data.addRef()},t.decRef=function(e,t,n){void 0===n&&(n=!1);var a=g.getKey(e,t),s=this.get(a);if(s){var r=s.data;i(r)?(r.decRef(!1),r.refCount<=0&&(this._caches.delete(a),App.releaseManger.releaseRemote(s,n))):this._caches.delete(a)}},t.remove=function(e,t,n){void 0===n&&(n=!1),this.decRef(e,t,n),t==u&&this.decRef(e,l,n),t==o.SkeletonData&&(this.decRef(e+".png",l,n),this.decRef(e+".json",h,n),this.decRef(e+".atlas",d,n))},t.debug=function(){var e=this._caches;Log.d("---- 远程加载资源缓存信息 ----");var t=[],n=[];e.forEach((function(e,a,s){e.isLoaded&&e.data&&i(e.data)?t.push(e.debug()):n.push(e.debug())})),t.length>0&&(Log.d("----------------有效缓存信息------------------"),Log.d(JSON.stringify(t))),n.length>0&&(Log.d("----------------无效缓存信息------------------"),Log.d(JSON.stringify(n)))},e}();e("CacheManager",function(){function e(){this.isResident=!0,this.module=null,this._bundles=new Map,this._remoteCaches=new y}var n=e.prototype;return n.getBundleName=function(e){return App.bundleManager.getBundleName(e)},n.get=function(e,t,n,a){void 0===a&&(a=!0);var s=this.getBundleName(e);return s&&this._bundles.has(s)?this._bundles.get(s).get(g.getKey(t,n),a):null},n.set=function(e){var t=this.getBundleName(e.bundle);if(t)if(this._bundles.has(t))this._bundles.get(t).set(e);else{var n=new p(t);n.set(e),this._bundles.set(t,n)}},n.remove=function(e){var t=this.getBundleName(e.bundle);return!(!t||!this._bundles.has(t))&&this._bundles.get(t).remove(e.key)},n.decRef=function(e,t,n){var a=t;a.decRef(!1);var s=!0;return a.refCount<=0?App.isLazyRelease||n.release(e.url,e.type):s=!1,s},n.removeWithInfo=function(e,t){var n=!0;if(e&&e.data)if(Array.isArray(e.data)){e.refCount--;for(var a=0;a<e.data.length;a++)this.decRef(e,e.data[a],t);(n=e.refCount<=0)?App.isLazyRelease||this.remove(e):App.isLazyRelease}else this.decRef(e,e.data,t)?App.isLazyRelease||this.remove(e):n=!1;return n},n.removeBundle=function(e){var t=this.getBundleName(e);t&&this._bundles.has(t)&&this._bundles.delete(t)},n._getGetCacheByAsyncArgs=function(){if(arguments.length<3)return null;if("string"!=typeof arguments[0])return null;var e=arguments.length>3&&arguments[3];return e||a.isChildClassOf(arguments[1],s)?{url:arguments[0],type:arguments[1],bundle:arguments[2],ignoreType:e}:null},n.getCache=function(){var e=arguments,t=this;return new Promise((function(n){var a=t._getGetCacheByAsyncArgs.apply(t,e);if(a){var s=t.get(a.bundle,a.url,a.type);s?s.isLoaded?a.type&&!a.ignoreType?s.data instanceof a.type?n([s,s.data]):n([null,null]):n([s,s.data]):s.getCb.push(n):n([null,null])}else n([null,null])}))},n.getCacheByAsync=function(){var e=this,t=this,n=this._getGetCacheByAsyncArgs.apply(this,arguments);return new Promise((function(a){n?t.getCache(n.url,n.type,n.bundle).then((function(t){var s=t[0],r=t[1];r&&r instanceof n.type?a([s,r]):App.asset.load(n.bundle,n.url,n.type,null,(function(t){t&&t.data&&t.data instanceof n.type?a([t,t.data]):(Log.e(e.module+"加载失败 : "+n.url),a([null,null]))}))})):a([null,null])}))},n.getSpriteFrameByAsync=function(e,t,n,a){var s=this;return new Promise((function(u){var l=0;!function c(o){s.getCacheByAsync(o,r,a).then((function(a){var s=a[0],r=a[1];if(n(s),r){var h=r.getSpriteFrame(t);h?i(h)?u({url:o,spriteFrame:h,cache:s}):(Log.e("精灵帧被释放，释放当前无法的图集资源 url ："+o+" key : "+t),App.asset.releaseAsset(s),u({url:o,spriteFrame:null,isTryReload:!0,cache:s})):++l>=e.length?u({url:o,spriteFrame:null,cache:null}):c(e[l])}else u({url:o,spriteFrame:null,cache:null})}))}(e[l])}))},n.debug=function(){this._bundles.forEach((function(e){e.debug()})),this.remoteCaches.debug()},t(e,[{key:"remoteCaches",get:function(){return this._remoteCaches}}]),e}()).module="【缓存管理器】",n._RF.pop()}}}));

System.register("chunks:///_virtual/CameraHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(n){var e,t,o;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){o=n.Base}],execute:function(){t._RF.push({},"b7a26oS/ZdLK6bRrhLEJB7u","CameraHandler",void 0);n("CameraHandler",function(n){function t(e){var t;return(t=n.call(this)||this)._vcam=e,t}e(t,n);var o=t.prototype;return o.updateCamera=function(n){},o.onLookAtChanged=function(n){},o.onFollowChanged=function(n){},t}(o));t._RF.pop()}}}));

System.register("chunks:///_virtual/CanvasHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a;return{setters:[function(e){t=e.createClass},function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"b6db5mSvRBDQKTUpAOVZpRC","CanvasHelper",void 0),e("CanvasHelper",function(){function e(){this.module=null,this.downloadMime="image/octet-stream"}var a=e.prototype;return a.scaleCanvas=function(e,t,a){var n=e.width,i=e.height;null==t&&(t=n),null==a&&(a=i);var r=document.createElement("canvas"),o=r.getContext("2d");return r.width=t,r.height=a,null==o||o.drawImage(e,0,0,n,i,0,0,t,a),r},a.getDataURL=function(e,t,a,n){return(e=this.scaleCanvas(e,a,n)).toDataURL(t)},a.saveFile=function(e,t,a){this.fileDownload(e,t,a)},a.genImage=function(e){var t=document.createElement("img");return t.src=e,t},a.fixType=function(e){return"image/"+(e=e.toLowerCase().replace(/jpg/i,"jpeg")).match(/png|jpeg|bmp|gif/)[0]},a.encodeData=function(e){if(!window.btoa)throw"btoa undefined";var t="";if("string"==typeof e)t=e;else for(var a=0;a<e.length;a++)t+=String.fromCharCode(e[a]);return btoa(t)},a.getImageData=function(e){var t,a=e.width,n=e.height;return null==(t=e.getContext("2d"))?void 0:t.getImageData(0,0,a,n)},a.makeURL=function(e,t){return"data:"+t+";base64,"+e},a.genBitmapImage=function(e){var t=e.width,a=e.height,n=t*a*3,i=n+54,r=[66,77,255&i,i>>8&255,i>>16&255,i>>24&255,0,0,0,0,54,0,0,0],o=[40,0,0,0,255&t,t>>8&255,t>>16&255,t>>24&255,255&a,a>>8&255,a>>16&255,a>>24&255,1,0,24,0,0,0,0,0,255&n,n>>8&255,n>>16&255,n>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=(4-3*t%4)%4,u=e.data,c="",g=t<<2,l=a,m=String.fromCharCode;do{for(var v=g*(l-1),f="",d=0;d<t;d++){var h=d<<2;f+=m(u[v+h+2])+m(u[v+h+1])+m(u[v+h])}for(var p=0;p<s;p++)f+=String.fromCharCode(0);c+=f}while(--l);return this.encodeData(r.concat(o))+this.encodeData(c)},a.savaAsImage=function(e,t,a,n,i){void 0===n&&(n="png"),void 0===i&&(i="defaultpng");var r=null;if(this.support.canvas&&this.support.dataURL){if("string"==typeof e){var o=document.getElementById(e);o&&(r=o)}else r=e;if(!r)return;if(n=this.fixType(n),/bmp/.test(n)){var s=this.getImageData(this.scaleCanvas(r,t,a));if(s){var u=this.genBitmapImage(s);this.saveFile(this.makeURL(u,this.downloadMime),n.replace("image/",""),i)}}else{r=this.scaleCanvas(r,t,a);var c=this;r.toBlob((function(e){var t=URL.createObjectURL(e);c.saveFile(t,n.replace("image/",""),i)}),n,1)}}},a.convertToImage=function(e,t,a,n){void 0===n&&(n="png");var i=null;if(this.support.canvas&&this.support.dataURL){if("string"==typeof e){var r=document.getElementById(e);r&&(i=r)}else i=e;if(!i)return;if(/bmp/.test(n)){var o=this.getImageData(this.scaleCanvas(i,t,a)),s=this.genBitmapImage(o);return this.genImage(this.makeURL(s,"image/bmp"))}s=this.getDataURL(i,n,t,a);return this.genImage(s)}},a.fileDownload=function(e,t,a){var n=document.createElement("a");n.style.display="none",n.href=e,n.download=a+"."+t,document.body.appendChild(n),n.click(),document.body.removeChild(n)},a.saveAsPNG=function(e,t,a){return this.savaAsImage(e,t,a,"png","defaultpng")},a.saveAsJPEG=function(e,t,a){return this.savaAsImage(e,t,a,"jpeg","defaultjpg")},a.saveAsGIF=function(e,t,a){return this.savaAsImage(e,t,a,"gif","defaultgif")},a.saveAsBMP=function(e,t,a){return this.savaAsImage(e,t,a,"bmp","defaultbmp")},a.convertToPNG=function(e,t,a){return this.convertToImage(e,t,a,"png")},a.convertToJPEG=function(e,t,a){return this.convertToImage(e,t,a,"jpeg")},a.convertToGIF=function(e,t,a){return this.convertToImage(e,t,a,"gif")},a.convertToBMP=function(e,t,a){return this.convertToImage(e,t,a,"bmp")},t(e,[{key:"support",get:function(){var e=document.createElement("canvas"),t=e.getContext("2d");return{canvas:!!t,imageData:!(null==t||!t.getImageData),dataURL:!!e.toDataURL,btoa:!!window.btoa}}}]),e}()).module="【CanvasHelper】",a._RF.pop()}}}));

System.register("chunks:///_virtual/CinestaionImpulseSource.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./CinestationMath.ts","./VCamNoise.ts","./NoiseGenerator.ts"],(function(e){var i,t,n,o,r,s,a,u,c,l,p,m,f,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Component},function(e){u=e.cinestation},function(e){c=e.EPSILON,l=e.quarticDamp},function(e){p=e.VCamNoise,m=e.NoiseType},function(e){f=e.NoiseGenerator,h=e.NoiseProfile}],execute:function(){var y,d,_,D,I,g,v;r._RF.push({},"eab39p0OltNxpkdR4h4B1dg","CinestaionImpulseSource",void 0);var C=s.ccclass,b=s.property,S=s.menu;e("CinestaionImpulseSource",(y=C("CinestaionImpulseSource"),d=S("Cinestation/CinestaionImpulseSource"),_=b({type:p}),y(D=d((g=i((I=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(i=e.call.apply(e,[this].concat(r))||this)._generator=new f,i._impluseDecay=0,n(i,"noise",g,o(i)),n(i,"decayTime",v,o(i)),i}t(i,e);var r=i.prototype;return r.onLoad=function(){this.node.on("setImpulse",this._setImpulse,this)},r._setImpulse=function(e){void 0===e&&(e=1),this._impluseDecay=e},r.onEnable=function(){u.addImpulseSource(this)},r.onDisable=function(){u.removeImpulseSource(this)},r.generateImpulse=function(e){if(this._impluseDecay<=c)return null;this._impluseDecay=l(this._impluseDecay,0,this.decayTime,e);for(var i=this._generator.fractalNoise(this.noise,e),t=0;t<i.length;t++)i[t]*=this._impluseDecay;return i},i}(a)).prototype,"noise",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e=new p).type=m.Perlin,e.profile=h.Shake_6D,e.amplitudeGain=.5,e.frequncyGain=4,e;var e}}),v=i(I.prototype,"decayTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),D=I))||D)||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationBlendDefinition.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationEasing.ts"],(function(n){var t,i,u,a,c,e,r,o,l,I,O,s,d,B,Q,p,C,E,f,b,y,x,S,k,D,m,g,h,v,L,_,z,F,w,P,R;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.initializerDefineProperty},function(n){u=n.cclegacy,a=n._decorator,c=n.Enum},function(n){e=n.LinearNone,r=n.QuadraticIn,o=n.QuadraticOut,l=n.QuadraticInOut,I=n.CubicIn,O=n.CubicOut,s=n.CubicInOut,d=n.QuarticIn,B=n.QuarticOut,Q=n.QuarticInOut,p=n.QuinticIn,C=n.QuinticOut,E=n.QuinticInOut,f=n.SinusoidalIn,b=n.SinusoidalOut,y=n.SinusoidalInOut,x=n.ExponentialIn,S=n.ExponentialOut,k=n.ExponentialInOut,D=n.CircularIn,m=n.CircularOut,g=n.CircularInOut,h=n.ElasticIn,v=n.ElasticOut,L=n.ElasticInOut,_=n.BackIn,z=n.BackOut,F=n.BackInOut,w=n.BounceIn,P=n.BounceOut,R=n.BounceInOut}],execute:function(){var j,A,G,H,M,N,X;u._RF.push({},"02eeaG5a3dABrfIEnXf/xnI","CinestationBlendDefinition",void 0);var q=a.ccclass,J=a.property,K=n("CinestationBlendStyle",function(n){return n[n.Linear=0]="Linear",n[n.QuadraticIn=1]="QuadraticIn",n[n.QuadraticOut=2]="QuadraticOut",n[n.QuadraticInOut=3]="QuadraticInOut",n[n.CubicIn=4]="CubicIn",n[n.CubicOut=5]="CubicOut",n[n.CubicInOut=6]="CubicInOut",n[n.QuarticIn=7]="QuarticIn",n[n.QuarticOut=8]="QuarticOut",n[n.QuarticInOut=9]="QuarticInOut",n[n.QuinticIn=10]="QuinticIn",n[n.QuinticOut=11]="QuinticOut",n[n.QuinticInOut=12]="QuinticInOut",n[n.SinusoidalIn=13]="SinusoidalIn",n[n.SinusoidalOut=14]="SinusoidalOut",n[n.SinusoidalInOut=15]="SinusoidalInOut",n[n.ExponentialIn=16]="ExponentialIn",n[n.ExponentialOut=17]="ExponentialOut",n[n.ExponentialInOut=18]="ExponentialInOut",n[n.CircularIn=19]="CircularIn",n[n.CircularOut=20]="CircularOut",n[n.CircularInOut=21]="CircularInOut",n[n.ElasticIn=22]="ElasticIn",n[n.ElasticOut=23]="ElasticOut",n[n.ElasticInOut=24]="ElasticInOut",n[n.BackIn=25]="BackIn",n[n.BackOut=26]="BackOut",n[n.BackInOut=27]="BackInOut",n[n.BounceIn=28]="BounceIn",n[n.BounceOut=29]="BounceOut",n[n.BounceInOut=30]="BounceInOut",n}({}));n("CinestationBlendFunc",[e,r,o,l,I,O,s,d,B,Q,p,C,E,f,b,y,x,S,k,D,m,g,h,v,L,_,z,F,w,P,R]),n("CinestationBlendDefinition",(j=q("CinestationBlendDefinition"),A=J({tooltip:"i18n:cinestation.CinestationBlendDefinition.style",type:c(K)}),G=J({tooltip:"i18n:cinestation.CinestationBlendDefinition.time。"}),j((N=t((M=function(){i(this,"style",N,this),i(this,"time",X,this)}).prototype,"style",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return K.QuarticInOut}}),X=t(M.prototype,"time",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),H=M))||H));u._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationBrain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationBlendDefinition.ts","./CinestationData.ts","./CinestationShareAssets.ts","./Visualization.ts"],(function(e){var t,i,n,a,o,r,s,l,u,c,d,p,f,m,_,C,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Vec2,l=e.Camera,u=e.utils,c=e.primitives,d=e.clamp01,p=e.lerp},function(e){f=e.CinestationBlendDefinition,m=e.CinestationBlendFunc},function(e){_=e.cinestation},function(e){C=e.cinestationShareAssets},function(e){h=e.Visualization}],execute:function(){var g,v,b,D,y,P;o._RF.push({},"21317xuuONB07F6DnC2NgHK","CinestationBrain",void 0);var T=r.ccclass,B=r.property,w=r.executionOrder,R=r.executeInEditMode,M=new s;e("CinestationBrain",(g=T("CinestationBrain"),v=w(-1),b=B(f),g(D=R(D=v((P=t((y=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).__selectedCamera=null,t._material=C.viewMaterial,t._visibleInRuntime=!0,n(t,"brainBlend",P,a(t)),t}i(t,e);var o=t.prototype;return o.onLoad=function(){_.mainCamera=this.getComponent(l),_.lerpTime=this.brainBlend.time},o._updateMesh=function(e){return u.createMesh(c.quad(),e)},o.update=function(t){e.prototype.update.call(this,t);var i=this._getActiveCamera();if(null!=i){i.updateCamera(t);var n=_.blendTime>-1?_.blendTime:this.brainBlend.time;if(_.lerpTime<n){_.lerpTime+=t;var a=d(_.lerpTime/n),o=m[this.brainBlend.style];o&&(a=o(a)),this._lerpToMainCamera(i,a)}else this._lerpToMainCamera(i,1)}},o._getActiveCamera=function(){var e=_.vcam=_.getPriorCamera();return this.visible=CC_EDITOR?!!this.__selectedCamera:e&&e.debug,this._setDebugProperties(CC_EDITOR?this.__selectedCamera:e),e},o._setDebugProperties=function(e){if(e&&(CC_EDITOR||e.debug)){if(e._composerChanged){e._composerChanged=!1;var t=e.aim.composer;C.__setDebugProperty("deadZoneWidth",t.deadZoneWidth),C.__setDebugProperty("deadZoneHeight",t.deadZoneHeight),C.__setDebugProperty("softZoneWidth",t.softZoneWidth),C.__setDebugProperty("softZoneHeight",t.softZoneHeight)}e.lookAt&&C.__setDebugProperty("lookatPoint",_.worldToScreen(M,e.lookaheadPosition))}},o._lerpToMainCamera=function(e,t){if(!CC_EDITOR&&_.mainCamera){var i=_.mainCamera,n=e;i.node.worldPosition=i.node.worldPosition.lerp(n.finalPosition,t),i.node.worldRotation=i.node.worldRotation.lerp(n.finalRotation,t),i.fov=p(i.fov,n.lens.fov,t),i.near=p(i.near,n.lens.near,t),i.far=p(i.far,n.lens.far,t)}},t}(h)).prototype,"brainBlend",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f}}),D=y))||D)||D)||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,r,a,n;return{setters:[function(t){i=t.createClass,e=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,a=t.Vec3,n=t.director}],execute:function(){r._RF.push({},"12624HAk8JDFZQqwrl2MBcl","CinestationData",void 0);var s=new a;t("cinestation",new(function(){function t(){this._brain=null,this._vcam=null,this._vcamSolo=null,this._virtualCameras=[],this._impulseSources=[],this._input=!0,this.lerpTime=0,this.blendTime=-1,this.mainCamera=null}var r=t.prototype;return r.activeCamera=function(t,i){void 0===i&&(i=-1),this._vcamSolo!==t&&(this._vcamSolo=t,this.lerpTime=0,this.blendTime=i)},r.addCamera=function(t){-1===this._virtualCameras.indexOf(t)&&this._virtualCameras.push(t)},r.removeCamera=function(t){var i=this._virtualCameras.indexOf(t);-1!==i&&this._virtualCameras.splice(i,1),this._vcamSolo===t&&(this._vcamSolo=null)},r.addImpulseSource=function(t){-1===this._impulseSources.indexOf(t)&&this._impulseSources.push(t)},r.removeImpulseSource=function(t){var i=this._impulseSources.indexOf(t);-1!==i&&this._impulseSources.splice(i,1)},r.getPriorCamera=function(){return this._vcamSolo||this._virtualCameras.filter((function(t){return t.isValid&&t.enabled})).sort((function(t,i){return i.priority-t.priority}))[0]},r.worldToScreen=function(t,i){if(this.mainCamera){var e=CC_EDITOR?cce.Camera.camera.camera:this.mainCamera.camera,r=a.transformMat4(s,i,e.matViewProj).add(a.ONE).multiplyScalar(.5);t.set(r.x,r.y)}return t},i(t,[{key:"input",get:function(){return this._input},set:function(t){this._input!==t&&(this._input=t,n.emit("VCam.enableInput",t))}},{key:"brain",get:function(){return this._brain},set:function(t){this._brain=t}},{key:"vcam",get:function(){return null===this._vcam&&(this._vcam=this.getPriorCamera()),this._vcam},set:function(t){if(this._vcam!==t){this._vcam=t;for(var i,r=e(this._virtualCameras);!(i=r()).done;){var a=i.value;a===t?a.onActive():a.onDeActive()}}}},{key:"vcams",get:function(){return this._virtualCameras}},{key:"impulseSources",get:function(){return this._impulseSources}}]),t}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationEasing.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){n({BackIn:function(n){var t=1.70158;return n*n*((t+1)*n-t)},BackInOut:function(n){var t=2.5949095;if((n*=2)<1)return n*n*((t+1)*n-t)*.5;return.5*((n-=2)*n*((t+1)*n+t)+2)},BackOut:function(n){var t=1.70158;return--n*n*((t+1)*n+t)+1},BounceIn:f,BounceInOut:function(n){if(n<.5)return.5*f(2*n);return.5*o(2*n-1)+.5},BounceOut:o,CircularIn:function(n){return 1-c(1-n*n)},CircularInOut:function(n){if((n*=2)<1)return-.5*(c(1-n*n)-1);return.5*(c(1-(n-=2)*n)+1)},CircularOut:function(n){return c(1- --n*n)},CubicIn:function(n){return n*n*n},CubicInOut:function(n){if((n*=2)<1)return.5*n*n*n;return.5*((n-=2)*n*n+2)},CubicOut:function(n){return--n*n*n+1},ElasticIn:function(n){if(0===n)return 0;if(1===n)return 1;return-e(2,10*(n-1))*i(5*(n-1.1)*u)},ElasticInOut:function(n){if(0===n)return 0;if(1===n)return 1;if((n*=2)<1)return-.5*e(2,10*(n-1))*i(5*(n-1.1)*u);return.5*e(2,-10*(n-1))*i(5*(n-1.1)*u)+1},ElasticOut:function(n){if(0===n)return 0;if(1===n)return 1;return e(2,-10*n)*i(5*(n-.1)*u)+1},ExponentialIn:function(n){return 0===n?0:e(1024,n-1)},ExponentialInOut:function(n){if(0===n)return 0;if(1===n)return 1;if((n*=2)<1)return.5*e(1024,n-1);return.5*(2-e(2,-10*(n-1)))},ExponentialOut:function(n){return 1===n?1:1-e(2,-10*n)},LinearNone:function(n){return n},QuadraticIn:function(n){return n*n},QuadraticInOut:function(n){if((n*=2)<1)return.5*n*n;return-.5*(--n*(n-2)-1)},QuadraticOut:function(n){return n*(2-n)},QuarticIn:function(n){return n*n*n*n},QuarticInOut:function(n){if((n*=2)<1)return.5*n*n*n*n;return-.5*((n-=2)*n*n*n-2)},QuarticOut:function(n){return 1- --n*n*n*n},QuinticIn:function(n){return n*n*n*n*n},QuinticInOut:function(n){if((n*=2)<1)return.5*n*n*n*n*n;return.5*((n-=2)*n*n*n*n+2)},QuinticOut:function(n){return--n*n*n*n*n+1},SinusoidalIn:function(n){return 1-r(n*u/2)},SinusoidalInOut:function(n){return.5*(1-r(u*n))},SinusoidalOut:function(n){return i(n*u/2)}}),t._RF.push({},"5b92a0AhGVJMo1hbiPcs4wZ","CinestationEasing",void 0);var u=Math.PI,r=Math.cos,i=Math.sin,e=Math.pow,c=Math.sqrt;function f(n){return 1-o(1-n)}function o(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}t._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationMath.ts",["cc"],(function(r){var t,e,n,o,i,a;return{setters:[function(r){t=r.cclegacy,e=r.Quat,n=r.clamp01,o=r.Vec3,i=r.clamp,a=r.Vec4}],execute:function(){r({FInterpConstantTo:function(r,t,e,n){var o=t-r;if(m(o)<1e-4)return t;var a=n*e;return r+i(o,-a,a)},FInterpTo:function(r,t,e,o){if(o<=0)return t;if(m(t-r)<1e-4)return t;return r+n(o*e)},QInterpConstantTo:function(r,t,o,i,a){void 0===a&&(a=r);if(i<=0)return a.set(t);if(r.equals(t,1e-4))return a.set(t);var u=n(i*o),c=l((v=r,f=t,h=v.x*f.x+v.y*f.y+v.z*f.z+v.w*f.w,s(2*h*h-1)),1e-4);var v,f,h;return e.lerp(a,r,t,n(u/c))},QInterpTo:function(r,t,o,i,a){void 0===a&&(a=r);if(i<=0)return a.set(t);if(r.equals(t,1e-4))return a.set(t);return e.lerp(a,r,t,n(i*o))},Quat_exponentialDamp:function(r,t,n,o,i){return e.lerp(r,t,n,_(0,1,o,i))},Quat_quarticDamp:function(r,t,n,o,i){return e.lerp(r,t,n,C(0,1,o,i))},Quat_smoothDamp:function(r,t,n,o,i){return e.lerp(r,t,n,M(r,0,1,o,1/0,i))},VInterpConstantTo:function(r,t,e,n,i){void 0===i&&(i=r);var a=o.subtract(d,t,r),u=a.length(),c=n*e;if(u>c){if(c>0){var s=a.multiplyScalar(1/u);return i.set(r).add(s)}return i.set(r)}return i.set(t)},VInterpTo:function(r,t,e,i,a){void 0===a&&(a=r);if(i<=0)return a.set(t);var u=o.subtract(d,t,r);if(u.lengthSqr()<1e-4)return a.set(t);return a.set(r).add(u.multiplyScalar(n(e*i)))},Vec3_closeTo:function(r,t){return m(r.x-t.x)+m(r.y-t.y)+m(r.z-t.z)<=y},Vec3_closestPointOnSegment:function(r,t,e){var i=o.subtract(x,e,t),a=o.lengthSqr(i);if(a<y)return 0;return n(o.dot(o.subtract(z,r,t),i)/a)},Vec3_setFromMatrixColumn:function(r,t,e){switch(e){case 0:r.x=t.m00,r.y=t.m01,r.z=t.m02;break;case 1:r.x=t.m04,r.y=t.m05,r.z=t.m06;break;case 2:r.x=t.m08,r.y=t.m09,r.z=t.m10}return r},Vec3_setFromSpherical:function(r,t){var e=t.radius,n=t.phi,o=t.theta,i=v(n)*e;return r.x=i*v(o),r.y=f(n)*e,r.z=i*f(o),r},Vec3_smoothDamp:function(r,t,e,n,i){return o.lerp(r,t,e,M(r,0,1,n,1/0,i))},Vec4_closeTo:function(r,t){return m(r.x-t.x)+m(r.y-t.y)+m(r.z-t.z)+m(r.w-t.w)<=y},closeTo:function(r,t){return m(r-t)<=y},exponentialDamp:_,quarticDamp:C}),t._RF.push({},"91accbvrIlHz5Z6AdS8c/vV","CinestationMath",void 0);var u=Math.sqrt,c=Math.atan2,s=Math.acos,v=Math.sin,f=Math.cos,h=Math.floor,l=Math.max,p=Math.min,m=Math.abs;e.lerp=function(r,t,o,i){return e.dot(t,o)<0&&e.set(o,-o.x,-o.y,-o.z,-o.w),i=n(i),r.x=t.x+i*(o.x-t.x),r.y=t.y+i*(o.y-t.y),r.z=t.z+i*(o.z-t.z),r.w=t.w+i*(o.w-t.w),e.normalize(r,r),r},e.prototype.lerp=function(r,t){return e.lerp(this,this,r,t)};var d=new o;var y=r("EPSILON",1e-4),x=new o,z=new o;var w=Math.log(.01);function _(r,t,e,n){var o=-w/e;return r+(t-r)*(1-Math.exp(-o*n))}function C(r,t,e,n){var o=1-p(n,e)/e,i=o*o;return r+(t-r)*(1-i*i)}function M(r,t,e,n,o,a){void 0===r.velocity&&(r.velocity=0);var u=2/(n=Math.max(1e-4,n)),c=u*a,s=1/(1+c+.48*c*c+.235*c*c*c),v=t-e,f=e,h=o*n;e=t-(v=i(v,-h,h));var l=(r.velocity+u*v)*a;r.velocity=(r.velocity-u*l)*s;var p=e+(v+l)*s;return f-t>0==p>f&&(p=f,r.velocity=(p-f)/a),p}r("Spherical",function(){function r(r,t,e){void 0===r&&(r=1),void 0===t&&(t=0),void 0===e&&(e=0),this.radius=void 0,this.phi=void 0,this.theta=void 0,this.radius=r,this.phi=t,this.theta=e}var t=r.prototype;return t.setFromVec3=function(r){return this.setFromCartesianCoords(r.x,r.y,r.z)},t.setFromCartesianCoords=function(r,t,e){return this.radius=u(r*r+t*t+e*e),0===this.radius?(this.theta=0,this.phi=0):(this.theta=c(r,e),this.phi=s(i(t/this.radius,-1,1))),this},r}());r("Perlin",function(){function r(){}return r.Noise=function(t,e,n){var o=r._Fade,i=r._Grad,a=r._Lerp,u=r._Permutation;if(void 0!==e&&void 0!==n){var c=h(t),s=h(e),v=h(n),f=255&c,l=255&s,p=255&v;e-=s,n-=v;var m=o(t-=c),d=o(e),y=o(n),x=u[f]+l,z=u[x]+p,w=u[x+1]+p,_=u[f+1]+l,C=u[_]+p,M=u[_+1]+p;return a(y,a(d,a(m,i(u[z],t,e,n),i(u[C],t-1,e,n)),a(m,i(u[w],t,e-1,n),i(u[M],t-1,e-1,n))),a(d,a(m,i(u[z+1],t,e,n-1),i(u[C+1],t-1,e,n-1)),a(m,i(u[w+1],t,e-1,n-1),i(u[M+1],t-1,e-1,n-1))))}if(void 0!==e){var S=h(t),F=h(e),V=255&S,b=255&F;e-=F;var g=o(t-=S),T=o(e),A=u[V]+b&255,I=u[V+1]+b&255;return a(T,a(g,i(u[A],t,e),i(u[I],t-1,e)),a(g,i(u[A+1],t,e-1),i(u[I+1],t-1,e-1)))}var P=h(t),q=255&P;return a(o(t-=P),i(u[q],t),i(u[q+1],t-1))},r.Fbm=function(t,e,n,o){var i=0,a=.5,u=r.Noise;if(void 0!==n&&void 0!==o)for(var c=0;c<t;c++)i+=a*u(e,n,o),e*=2,n*=2,o*=2,a*=.5;else if(void 0!==n)for(var s=0;s<t;s++)i+=a*u(e,n),e*=2,n*=2,a*=.5;else for(var v=0;v<t;v++)i+=a*u(e),e*=2,a*=.5;return i},r._Fade=function(r){return r*r*r*(r*(6*r-15)+10)},r._Lerp=function(r,t,e){return t+r*(e-t)},r._Grad=function(r,t,e,n){if(void 0!==e&&void 0!==n){var o=15&r,i=o<8?t:e,a=o<4?e:12==o||14==o?t:n;return(0==(1&o)?i:-i)+(0==(2&o)?a:-a)}return void 0!==e?(0==(1&r)?t:-t)+(0==(2&r)?e:-e):0==(1&r)?t:-t},r}())._Permutation=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,151];r("Spline",function(){function r(){}return r.Bezier3=function(r,t,e,o,i,a){var u=1-(t=n(t)),c=u*u*u,s=3*u*u*t,v=3*u*t*t,f=t*t*t;return r.set(c*e.x+s*o.x+v*i.x+f*a.x,c*e.y+s*o.y+v*i.y+f*a.y,c*e.z+s*o.z+v*i.z+f*a.z)},r.ComputeSmoothControlPoints=function(r,t,e){var n=r.length;if(n<=2)2==n?(a.lerp(t[0],r[0],r[1],.33333),a.lerp(e[0],r[0],r[1],.66666)):1==n&&(t[0]=e[0]=r[0]);else for(var o=new Array(n),i=new Array(n),u=new Array(n),c=new Array(n),s=r,v=t,f=e,h=["x","y","z","w"],l=0;l<4;++l){var p=h[l],m=n-1;o[0]=0,i[0]=2,u[0]=1,c[0]=s[0][p]+2*s[1][p];for(var d=1;d<m-1;++d)o[d]=1,i[d]=4,u[d]=1,c[d]=4*s[d][p]+2*s[d+1][p];o[m-1]=2,i[m-1]=7,u[m-1]=0,c[m-1]=8*s[m-1][p]+s[m][p];for(var y=1;y<m;++y){var x=o[y]/i[y-1];i[y]=i[y]-x*u[y-1],c[y]=c[y]-x*c[y-1]}v[m-1][p]=c[m-1]/i[m-1];for(var z=m-2;z>=0;--z)v[z][p]=(c[z]-u[z]*v[z+1][p])/i[z];for(var w=0;w<m;w++)f[w][p]=2*s[w+1][p]-v[w+1][p];f[m-1][p]=.5*(s[m][p]+v[m-1][p])}},r.ComputeSmoothControlPointsLooped=function(t,e,n){var o=t.length;if(o<2)1==o&&(e[0]=n[0]=t[0]);else{for(var i=Math.min(4,o-1),u=o+2*i,c=new Array(u),s=new Array(u),v=new Array(u),f=0;f<i;++f)c[f]=t[o-(i-f)],c[o+i+f]=t[f];for(var h=0;h<o;++h)c[h+i]=t[h];for(var l=0;l<u;++l)s[l]=new a,v[l]=new a;r.ComputeSmoothControlPoints(c,s,v);for(var p=0;p<o;++p)e[p]=s[p+i],n[p]=v[p+i]}},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationShareAssets.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,a,s,o,u,c,l;return{setters:[function(e){t=e.asyncToGenerator,i=e.regeneratorRuntime,n=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,a=e.Material,s=e.game,o=e.Game,u=e.gfx,c=e.EffectAsset,l=e.assetManager}],execute:function(){function f(e){return new Promise((function(t,i){l.loadBundle(e,(function(e,n){return e?i(e):t(n)}))}))}function h(e){return new Promise((function(t,i){l.loadAny(e,(function(e,n){return e?i(e):t(n)}))}))}r._RF.push({},"ba093vjkTJGrq4T0taBwTNO","CinestationShareAssets",void 0);e("cinestationShareAssets",new(function(){function e(){this.viewMaterial=void 0,this.lineMaterial=void 0,this.lineMaterial=new a,this.lineMaterial._uuid="cinestation-line-material",this.viewMaterial=new a,this.viewMaterial._uuid="cinestation-view-material",s.on(o.EVENT_GAME_INITED,this._onGameInited,this)}var r=e.prototype;return r._onGameInited=function(){var e=this;this._loadAssets().then((function(){return e._compile()}))},r._loadAssets=function(){var e=t(i().mark((function e(){var t,r,a,s,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(CC_EDITOR){e.next=3;break}return e.next=3,f("cinestation");case 3:return t={"83789b2f-cb79-47f6-abfe-65f7d46aae71":"cinestation/view"},e.next=6,h(Object.keys(t));case 6:for(r=e.sent,a=n(r instanceof Array?r:[r]);!(s=a()).done;)(o=s.value).addRef(),o.name=t[o._uuid],c.register(o);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r._compile=function(){this.lineMaterial.initialize({effectName:"builtin-unlit",defines:{USE_VERTEX_COLOR:!0},states:{primitive:u.PrimitiveMode.LINE_LIST}}),this.lineMaterial.passes.forEach((function(e){return e.tryCompile()})),this.viewMaterial.initialize({effectName:"cinestation/view",technique:1}),this.viewMaterial.passes.forEach((function(e){return e.tryCompile()}))},r.__setDebugProperty=function(e,t){this.viewMaterial.setProperty(e,t)},e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationSmoothPath.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationMath.ts","./Visualization.ts"],(function(t){var o,e,n,i,r,s,a,l,h,c,d,u,p,f,_,g,v,P;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,s=t.createClass},function(t){a=t.cclegacy,l=t._decorator,h=t.Vec3,c=t.Vec2,d=t.Node,u=t.Vec4,p=t.clamp,f=t.Color,_=t.utils},function(t){g=t.Spline,v=t.Vec3_closestPointOnSegment},function(t){P=t.Visualization}],execute:function(){var y,C,m,w,x,b,z,D,M,S;a._RF.push({},"030fdrElwFP5oGR7ykI7sQt","CinestationSmoothPath",void 0);var A=l.ccclass,E=l.property,L=l.menu,I=l.executeInEditMode,N=new h,O=new h,R=new h,V=new c;t("CinestationSmoothPath",(y=A("CinestationSmoothPath"),C=L("Cinestation/CinestationSmoothPath"),m=E({visible:!1}),w=E({visible:!1}),x=E({visible:!1}),y(b=C(b=I((D=o((z=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return o=t.call.apply(t,[this].concat(r))||this,n(o,"_looped",D,i(o)),n(o,"_localControlPoints1",M,i(o)),n(o,"_localControlPoints2",S,i(o)),o}e(o,t);var a=o.prototype;return a.onLoad=function(){if(CC_EDITOR){this.node.on(d.EventType.CHILD_ADDED,this._onChildAdded,this),this.node.on(d.EventType.CHILD_REMOVED,this._onNodeChanged,this);for(var t,o=r(this.node.children);!(t=o()).done;){var e=t.value;this._onNodeChanged(e)}}},a._onChildAdded=function(t){var o=this.node.children,e=o.length;if(2===e)t.position=new h(o[0].position).add3f(0,0,5);else if(e>2){var n=o[e-3].position,i=o[e-2].position,r=new h(i).subtract(n).normalize().multiplyScalar(5);t.position=r.add(i)}this._onNodeChanged(t)},a._onNodeChanged=function(t){var o=this;t.on(d.EventType.TRANSFORM_CHANGED,(function(){o._modelChanged=!0})),this._modelChanged=!0},a._updateControlPoints=function(){var t=this.node.children,o=t.length;if(o>1){for(var e=new Array(o),n=new Array(o),i=new Array(o),r=0;r<o;r++){e[r]=new u,n[r]=new u;var s=t[r].position;i[r]=new u(s.x,s.y,s.z,0)}this.looped?g.ComputeSmoothControlPointsLooped(i,e,n):g.ComputeSmoothControlPoints(i,e,n),this._localControlPoints1.length=o,this._localControlPoints2.length=o;for(var a=0;a<o;a++)this._localControlPoints1[a]=new h(e[a].x,e[a].y,e[a].z),this._localControlPoints2[a]=new h(n[a].x,n[a].y,n[a].z)}},a._getBoundingIndices=function(t,o){t=this._clampProgress(t);var e=this.node.children.length;return e<2?o.x=o.y=0:(o.x=Math.floor(t),o.x>=e&&(t-=this._maxProgress,o.x=0),o.y=o.x+1,o.y==e&&(this.looped?o.y=0:(--o.y,--o.x))),t},a._clampProgress=function(t){var o=this._maxProgress;return this._looped&&o>0?((t%=o)<0&&(t+=o),t):p(t,0,o)},a.evaluatePosition=function(t,o){return this.evaluateLocalPosition(t,o).add(this.node.worldPosition)},a.evaluateLocalPosition=function(t,o){var e=this.node.children;if(0===e.length)return t.set(this.node.position);var n=V.set(0,0);return o=this._getBoundingIndices(o,n),n.x===n.y?t.set(e[n.x].position):g.Bezier3(t,o-n.x,e[n.x].position,this._localControlPoints1[n.x],this._localControlPoints2[n.x],e[n.y].position)},a.findClosestPoint=function(t,o,e,n){var i=this._minProgress,r=this._maxProgress;if(e>=0){var s=Math.floor(Math.min(e,Math.max(1,(r-i)/2)));i=o-s,r=o+s+1,this.looped||(i=Math.max(i,this._minProgress),r=Math.min(r,this._maxProgress))}for(var a=o,l=1/0,c=1/p(n,1,100),d=this.evaluatePosition(N,0),u=i+c;u<=r;u+=c){var f=this.evaluatePosition(O,u),_=v(t,d,f),g=h.squaredDistance(t,h.lerp(R,d,f,_));g<l&&(l=g,a=u-(1-_)*c),d.set(f)}return a},a._updateMesh=function(t){this._updateControlPoints();for(var o=[],e=this.node.children,n=0;n<e.length;n+=.1)o.push(this.evaluateLocalPosition(new h,n));var i=[],r=[],s=[],a=[],l=new f(0,1,0,1),c=new f(.3,.3,.3,1);function d(t,o,e){t&&o&&(h.toArray(i,t,i.length),h.toArray(i,o,i.length),r.push(e.r,e.g,e.b,e.a),r.push(e.r,e.g,e.b,e.a))}for(var u=0;u+1<o.length;u++){var p=o[u],g=o[u+1],v=new h(g).subtract(p).normalize(),P=new h(v.z,v.y,-v.x).multiplyScalar(.1);0===u&&(s.push(new h(p).subtract(P)),a.push(new h(p).add(P))),s.push(new h(g).subtract(P)),a.push(new h(g).add(P)),d(new h(p).subtract(P),new h(p).add(P),l),d(p,g,c)}this._looped&&d(o[o.length-1],o[0],c);for(var y=0;y+1<s.length;y++)d(s[y],s[y+1],l);this._looped&&d(s[s.length-1],s[0],l);for(var C=0;C+1<a.length;C++)d(a[C],a[C+1],l);return this._looped&&d(a[a.length-1],a[0],l),_.createMesh({positions:i,colors:r},t)},s(o,[{key:"looped",get:function(){return this._looped},set:function(t){this._looped!==t&&(this._looped=t,this._modelChanged=!0)}},{key:"_minProgress",get:function(){return 0}},{key:"_maxProgress",get:function(){var t=this.node.children.length-1;return t<1?0:this.looped?t+1:t}}]),o}(P)).prototype,"_looped",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=o(z.prototype,"_localControlPoints1",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=o(z.prototype,"_localControlPoints2",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o(z.prototype,"looped",[E],Object.getOwnPropertyDescriptor(z.prototype,"looped"),z.prototype),b=z))||b)||b)||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/CocosUtils.ts",["cc","./Resource.ts","./Enums.ts","./Macros.ts"],(function(e){var t,r,n,o,l,c,a,i,p,u;return{setters:[function(e){t=e.cclegacy,r=e.isValid,n=e.Prefab,o=e.dragonBones,l=e.SpriteFrame,c=e.SpriteAtlas,a=e.instantiate},function(e){i=e.Resource},function(e){p=e.ButtonSpriteType},function(e){u=e.Macro}],execute:function(){function s(e){App.uiManager.retainMemory.addLocal(e)}function m(e){App.uiManager.retainMemory.addRemote(e)}function f(e){var t=e.bundle;return null!=e.bundle&&null!=e.bundle||(t=u.BUNDLE_RESOURCES),t}function d(e){return!!(r(e)&&e.node&&r(e.node))}function h(e,t,r,n){return App.bundleManager.getBundle(r).get(e+"/"+t,n)}function g(e){null!=e.isAtlas&&null!=e.isAtlas||(e.isAtlas=!1),e.spriteFrame&&d(e.button)?function(e){if(e.cache)if(e.isAtlas||s(e.cache),e.spriteFrame&&d(e.button)){var t=e.button[e.memberName];try{var n=r(e.spriteFrame)?e.spriteFrame:null;n&&(e.button[e.memberName]=n),e.complete&&e.complete(e.memberName,n)}catch(n){var o=r(t)?t:null;e.button[e.memberName]=o,e.complete&&e.complete(e.memberName,null),Log.e(e.url+" : "+(n||"replace spriteframe error"))}}else e.complete&&d(e.button)&&e.complete(e.memberName,e.spriteFrame);else e.complete&&d(e.button)&&e.complete(e.memberName,null)}(e):e.complete&&d(e.button)&&e.complete(e.memberName,e.spriteFrame)}function v(e,t,r,n,o,a){var i=function(r){var l=r[0],c=r[1],a=r[2],i=r[3];g({button:e,memberName:t,url:a,spriteFrame:c,complete:n,bundle:o,cache:l,isAtlas:i})};if(r)if("string"==typeof r){if(r+="/spriteFrame",a)return void App.cache.getCache(a,l,o,!0).then((function(e){var t=e[0];e[1];i([t,h(a,r,o,l),a,!1])}));App.cache.getCacheByAsync(r,l,o).then((function(e){var t=e[0],n=e[1];i([t,n,r,!1])}))}else{var p=r.urls,u=r.key;if(a)return void App.cache.getCache(a,c,o,!0).then((function(e){var t=e[0];if(e[1]){for(var n=App.bundleManager.getBundle(o),l=!1,s=0;s<p.length;s++){var m=n.get(a+"/"+p[s],c);if(m&&m.getSpriteFrame(u)){i([t,m.getSpriteFrame(u),a,!0]),l=!0;break}}l||(Log.w("加载的资源中未找到:"+o+"/"+a+"/"+r),i([null,null,a,!0]))}else Log.w("未加载资源"+a),i([null,null,a,!0])}));App.cache.getSpriteFrameByAsync(r.urls,r.key,s,o).then((function(e){e&&e.isTryReload||i([e.cache,e.spriteFrame,e.url,!0])}))}}e({_loadDirRes:function(e){var t=f(e),r=function(t){t&&s(t),e.onComplete&&e.onComplete(t)};if(e.dir)return void App.cache.getCache(e.dir,e.type,t,!0).then((function(e){var t=e[0];e[1];r(t)}));App.asset.loadDir(t,e.url,e.type,e.onProgress,(function(e){r(e)}))},_loadRes:function(e){var t=f(e),r=function(t){var r=t[0],n=t[1];r&&s(r),e.onComplete&&e.onComplete(n)};if(e.dir)return void App.cache.getCache(e.dir,e.type,t,!0).then((function(n){var o=n[0],l=n[1];l=h(e.dir,e.url,t,e.type),r([o,l])}));App.cache.getCacheByAsync(e.url,e.type,t).then((function(e){var t=e[0],n=e[1];r([t,n])}))},addExtraLoadResource:s,addRemoteLoadResource:m,createNodeWithPrefab:function(e){var t=function(t){var r=t[0],n=t[1];if(r&&s(r),n&&e.complete){var o=a(n);e.complete(o)}else e.complete&&e.complete(null)},r=e.url,o=f(e);if(e.dir)return void App.cache.getCache(e.dir,n,o,!0).then((function(r){var l=r[0],c=r[1];c=h(e.dir,e.url,o,n),t([l,c])}));App.cache.getCacheByAsync(r,n,o).then((function(e){var r=e[0],n=e[1];t([r,n])}))},getAsset:h,getBundle:f,loadDragonDisplay:function(e,t){var r=f(t),n=function(e){var t=e[0];e[1];t&&s(t)},l=function(r){var n=r[0],o=r[1],l=r[2];o?(s(n),e.dragonAsset=l,e.dragonAtlasAsset=o,t.complete&&t.complete(l,o)):t.complete&&t.complete(l,null)};if(t.dir)return void App.cache.getCache(t.dir,o.DragonBonesAsset,r,!0).then((function(e){var c=e[0],a=e[1];a?(a=h(t.dir,t.assetUrl,r,o.DragonBonesAsset),n([c,a]),App.cache.getCache(t.dir,o.DragonBonesAtlasAsset,r,!0).then((function(e){var n=e[0],c=e[1];c=h(t.dir,t.atlasUrl,r,o.DragonBonesAtlasAsset),l([n,c,a])}))):(Log.w("未加载资源"+t.dir),t.complete&&t.complete(null,null))}));App.cache.getCacheByAsync(t.assetUrl,o.DragonBonesAsset,r).then((function(e){var c=e[0],a=e[1];a?(n([c,a]),App.cache.getCacheByAsync(t.atlasUrl,o.DragonBonesAtlasAsset,r).then((function(e){var t=e[0],r=e[1];l([t,r,a])}))):t.complete&&t.complete(null,null)}))},setButtonSpriteFrame:function(e,t){var r=f(t);v(e,p.Norml,t.normalSprite,t.complete,r,t.dir),v(e,p.Pressed,t.pressedSprite,t.complete,r,t.dir),v(e,p.Hover,t.hoverSprite,t.complete,r,t.dir),v(e,p.Disable,t.disabledSprite,t.complete,r,t.dir)},setLabelFont:function(e,t,n,o){if(!o)return void(t.complete&&d(e)&&t.complete(null));if(s(o),n&&d(e)){var l=e.font;try{var c=r(n)?n:null;c&&(e.font=c),t.complete&&t.complete(c)}catch(n){var a=r(l)?l:null;e.font=a,t.complete&&t.complete(null),Log.e(t.font+" : "+(n||"replace font error"))}}else t.complete&&d(e)&&t.complete(n)},setParticleSystemFile:function(e,t,n,o){if(!o)return void(t.complete&&d(e)&&t.complete(null));if(s(o),n&&d(e)){var l=e.file;try{var c=r(n)?n:null;c&&(e.file=c),t.complete&&t.complete(c)}catch(n){var a=r(l)?l:null;e.file=a,t.complete&&t.complete(null),Log.e(t.url+" : "+(n||"replace file error"))}}else t.complete&&d(e)&&t.complete(n)},setSkeletonSkeletonData:function(e){if(!e.cache)return void(e.config.complete&&d(e.component)&&e.config.complete(null));null!=e.resourceType&&null!=e.resourceType||(e.resourceType=i.Type.Local);e.resourceType==i.Type.Remote?m(e.cache):s(e.cache);if(e.data&&d(e.component)){var t=e.component.skeletonData;try{var n=r(e.data)?e.data:null;n&&(e.component.skeletonData=n),e.config.complete&&e.config.complete(n)}catch(n){var o=r(t)?t:null;e.component.skeletonData=o,e.config.complete&&e.config.complete(null),Log.e(e.cache.key+" : "+(n||"replace skeletonData error"))}}else e.config.complete&&d(e.component)&&e.config.complete(e.data)},setSpriteSpriteFrame:function(e){null!=e.resourceType&&null!=e.resourceType||(e.resourceType=i.Type.Local);null!=e.retain&&null!=e.retain||(e.retain=!1);null!=e.isAtlas&&null!=e.isAtlas||(e.isAtlas=!1);if(!e.cache)return Log.e("加载"+e.url+"图片错误"),void(e.complete&&d(e.sprite)&&e.complete(null));e.isAtlas||(e.resourceType==i.Type.Remote?m(e.cache):s(e.cache));if(e.spriteFrame&&d(e.sprite)){var t=e.sprite.spriteFrame,n=r(e.spriteFrame)?e.spriteFrame:null;try{n&&(e.sprite.spriteFrame=n),e.complete&&e.complete(n)}catch(n){var o=r(t)?t:null;e.sprite.spriteFrame=o,e.complete&&e.complete(null),Log.e(e.url+" : "+(n||"replace spriteframe error"))}}else e.complete&&d(e.sprite)&&e.complete(e.spriteFrame)}}),t._RF.push({},"502b3eTFztL0bXuqIuW7Qlu","CocosUtils",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ComposerHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./CinestationMath.ts","./Predictor.ts","./CameraHandler.ts"],(function(o){var t,a,e,n,i,r,s,c,d;return{setters:[function(o){t=o.inheritsLoose},function(o){a=o.cclegacy,e=o.Vec3,n=o.Quat},function(o){i=o.cinestation},function(o){r=o.Quat_smoothDamp,s=o.Vec4_closeTo},function(o){c=o.Predictor},function(o){d=o.CameraHandler}],execute:function(){a._RF.push({},"999e2AzijNEGqNHMT2UzZdv","ComposerHandler",void 0);var l=new e,m=new e,p=new n;o("ComposerHandler",function(o){function a(){for(var t,a=arguments.length,e=new Array(a),i=0;i<a;i++)e[i]=arguments[i];return(t=o.call.apply(o,[this].concat(e))||this)._predictor=new c,t._rotation=new n,t}t(a,o);var d=a.prototype;return d.updateCamera=function(o){var t=this._vcam;if(t.lookAt){var a=t.aim.composer;e.add(m,t.lookAt.position,t.aim.trackedObjectOffset),t.lookAt.parent&&m.add(t.lookAt.parent.worldPosition),this._predictor.predictPosition(t.lookaheadPosition,m,a.lookaheadDamping,a.lookaheadTime,o),this._clampWithDeadZone(m,t.lookaheadPosition),n.fromViewUp(this._rotation,e.subtract(m,t.node.worldPosition,m).normalize()),r(p,t.node.worldRotation,this._rotation,a.lookatDamping,o),s(p,t.node.worldRotation)||(t.node.worldRotation=p)}},d._clampWithDeadZone=function(o,t){var a=this._vcam.aim.composer,n=i.mainCamera;if(n){var r=n.camera,s=e.transformMat4(l,t,r.matViewProj).add(e.ONE).multiplyScalar(.5),c=a.deadZoneWidth/2,d=a.deadZoneHeight/2;o.set(.5,.5,s.z),s.x<.5-c&&(o.x+=s.x-.5+c),s.x>.5+c&&(o.x+=s.x-.5-c),s.y<.5-d&&(o.y+=s.y-.5+d),s.y>.5+d&&(o.y+=s.y-.5-d),o.multiplyScalar(2).subtract(e.ONE),o.transformMat4(r.matViewProjInv)}return o},a}(d));a._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e.Enum}],execute:function(){e("Config",void 0),t._RF.push({},"fe5227qs5FNBYQVcSDM4fwg","Config",void 0);var a,o,i=function(e){return e[e.resources=0]="resources",e[e.aimLine=1]="aimLine",e[e.eliminate=2]="eliminate",e[e.hall=3]="hall",e[e.loadTest=4]="loadTest",e[e.netTest=5]="netTest",e[e.nodePoolTest=6]="nodePoolTest",e[e.tankBattle=7]="tankBattle",e[e.taxi=8]="taxi",e[e.qrcode=9]="qrcode",e[e.stateMachine=10]="stateMachine",e[e.multiLogic=11]="multiLogic",e}(i||{}),l=function(e){return e[e.resources=0]="resources",e[e.hall=1]="hall",e[e.aimLine=2]="aimLine",e[e.eliminate=3]="eliminate",e[e.loadTest=4]="loadTest",e[e.taxi=5]="taxi",e[e.netTest=6]="netTest",e[e.nodePoolTest=7]="nodePoolTest",e[e.tankBattle=8]="tankBattle",e[e.stateMachine=9]="stateMachine",e[e.qrcode=10]="qrcode",e[e.multiLogic=11]="multiLogic",e[e.private=12]="private",e}(l||{}),s=n(i),r=e("ViewZOrder",function(e){return e[e.Default=0]="Default",e[e.Horn=1]="Horn",e[e.UI=2]="UI",e[e.Tips=3]="Tips",e[e.Alert=4]="Alert",e[e.Loading=5]="Loading",e[e.UILoading=6]="UILoading",e}({}));(o=a||(a=e("Config",{}))).isShowDebugButton=!0,o.audioPath={dialog:"common/audio/dlg_open",button:"common/audio/btn_click"},o.isSkipCheckUpdate=!1,o.HOT_UPDATE_URL="http://192.168.2.241/hotupdate372",o.USE_AUTO_VERSION=!0,o.LOADING_TIME_OUT=30,o.LOADING_CONTENT_CHANGE_INTERVAL=3,o.LOAD_VIEW_TIME_OUT=20,o.LOAD_VIEW_DELAY=.1,o.RECONNECT_TIME_OUT=30,o.MAX_INBACKGROUND_TIME=60,o.MIN_INBACKGROUND_TIME=5,o.BUNDLES=[{sort:l.aimLine,type:i.aimLine,name:{CN:"瞄准线",EN:"Aim Line"},bundle:s[i.aimLine]},{sort:l.eliminate,type:i.eliminate,name:{CN:"爱消除",EN:"Eliminate"},bundle:s[i.eliminate]},{sort:l.loadTest,type:i.loadTest,name:{CN:"加载示例",EN:"Load Test"},bundle:s[i.loadTest]},{sort:l.netTest,type:i.netTest,name:{CN:"网络示例",EN:"Net Test"},bundle:s[i.netTest]},{sort:l.nodePoolTest,type:i.nodePoolTest,name:{CN:"对象池示例",EN:"Node Pool"},bundle:s[i.nodePoolTest]},{sort:l.tankBattle,type:i.tankBattle,name:{CN:"坦克大战",EN:"BATTLE\nCITY"},bundle:s[i.tankBattle]},{sort:l.taxi,type:i.taxi,name:{CN:"快上车",EN:"Taxi"},bundle:s[i.taxi]},{sort:l.resources,type:i.resources,name:{CN:"主包",EN:"Main"},bundle:s[i.resources]},{sort:l.hall,type:i.hall,name:{CN:"大厅",EN:"Hall"},bundle:s[i.hall]},{sort:l.qrcode,type:i.qrcode,name:{CN:"二维码",EN:"QR Code"},bundle:s[i.qrcode]},{sort:l.stateMachine,type:i.stateMachine,name:{CN:"状态机",EN:"State\nMachine"},bundle:s[i.stateMachine]},{sort:l.multiLogic,type:i.multiLogic,name:{CN:"Multi Logic",EN:"Multi Logic"},bundle:s[i.multiLogic]}],o.LAYERS=n(r),o.SHOW_STATUS=!0;e("NetPriority",function(e){return e[e.Game=0]="Game",e[e.Chat=1]="Chat",e[e.Lobby=2]="Lobby",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Constants.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"44650FQiGpGAqT1pvY341hL","Constants",void 0);t("RES_URL_PREFIX","http://zlpnet.top/"),t("DEFAULT_GROUP","internal_default"),t("CoordEnum",function(t){return t[t.CC=1]="CC",t[t.GCJ02=2]="GCJ02",t[t.WGS84=3]="WGS84",t}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/CoordinateUtils.ts",["cc","./Constants.ts","./InitData.ts"],(function(t){var a,n,e,r;return{setters:[function(t){a=t.cclegacy,n=t.Vec2},function(t){e=t.CoordEnum},function(t){r=t.InitData}],execute:function(){function h(t,a,e,r){var h=(e-t)*Math.cos(a)*111319.4908;return new n(h,111319.4908*-(r-a))}function o(t,a){var e=6378245,r=.006693421622965943;if(function(t,a){return a<72.004||a>137.8347||t<.8293||t>55.8271}(a,t))return new n(t,a);var h=function(t,a){var n=2*t-100+3*a+.2*a*a+.1*t*a+.2*Math.sqrt(Math.abs(t));return n+=2*(20*Math.sin(6*t*Math.PI)+20*Math.sin(2*t*Math.PI))/3,n+=2*(20*Math.sin(a*Math.PI)+40*Math.sin(a/3*Math.PI))/3,n+=2*(160*Math.sin(a/12*Math.PI)+320*Math.sin(a*Math.PI/30))/3}(t-105,a-35),o=function(t,a){var n=300+t+2*a+.1*t*t+.1*t*a+.1*Math.sqrt(Math.abs(t));return n+=2*(20*Math.sin(6*t*Math.PI)+20*Math.sin(2*t*Math.PI))/3,n+=2*(20*Math.sin(t*Math.PI)+40*Math.sin(t/3*Math.PI))/3,n+=2*(150*Math.sin(t/12*Math.PI)+300*Math.sin(t*Math.PI/30))/3}(t-105,a-35),M=a/180*Math.PI,i=Math.sin(M),u=Math.sqrt(1-r*i*i),s=180*h/(e*(1-r)/(i*u)*Math.PI),c=180*o/(e/u*Math.cos(M)*Math.PI);return new n(t+c,a+s)}t({GetDistance:function(t,a,n,e){var r=a*Math.PI/180,h=e*Math.PI/180,o=r-h,M=t*Math.PI/180-n*Math.PI/180,i=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(r)*Math.cos(h)*Math.pow(Math.sin(M/2),2)));return i*=6378137,i=Math.round(1e4*i)/1e4},GetTileDistance:function(t){return 64.7936*Math.pow(2,19-t)},LngLatToTile:function(t,a,e){var r=Math.pow(2,e),h=Math.floor(r*((t+180)/360)),o=Math.floor((1-Math.asinh(Math.tan(a*Math.PI/180))/Math.PI)/2*r);return new n(h,o)},LngLatToXZ:h,LngLatToXZDefault:function(t,a){var e=(t-App.dataCenter.get(r).longitude)*Math.cos(App.dataCenter.get(r).latitude)*111319.4908,h=111319.4908*-(a-App.dataCenter.get(r).latitude);return new n(e,h)},TileToTile:function(t,a,n,e){var r=Math.floor(t/Math.pow(2,n-e)),h=Math.floor(a/Math.pow(2,n-e));return[r,h]},TileTolngLat:function(t,a,e){var r=Math.pow(2,e),h=t/r*360-180,o=180*Math.atan(Math.sinh(Math.PI*(1-2*a/r)))/Math.PI;return new n(h,o)},TransformCoord:function(t,a){void 0===a&&(a=e.CC);if(t.type==e.GCJ02){var n=h(App.dataCenter.get(r).longitude,App.dataCenter.get(r).latitude,t.x,t.y);t.x=n.x,t.y=n.y,t.type=a}else if(t.type==e.WGS84){var M=o(t.x,t.y),i=h(App.dataCenter.get(r).longitude,App.dataCenter.get(r).latitude,M.x,M.y);t.x=i.x,t.y=i.y,t.type=a}},Wgs84ToGcj02:o,XZToLngLat:function(t,a,e,r){var h=e/(111319.4908*Math.cos(a))+t;return new n(h,-r/111319.4908+a)},XZToLngLatDefault:function(t,a){var e=t/(111319.4908*Math.cos(App.dataCenter.get(r).latitude))+App.dataCenter.get(r).longitude,h=-a/111319.4908+App.dataCenter.get(r).latitude;return new n(e,h)}}),a._RF.push({},"085cee1l0tGrqxxok9QyGxS","CoordinateUtils",void 0),a._RF.pop()}}}));

System.register("chunks:///_virtual/DataCenter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonT.ts"],(function(t){var n,e,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){r=t.SingletonT}],execute:function(){e._RF.push({},"e21fd5ABGxCjI3XItr9TfG6","DataCenter",void 0),t("DataCenter",function(t){function e(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(n=t.call.apply(t,[this].concat(r))||this).module=null,n}return n(e,t),e}(r)).module="【数据中心】",e._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Effect.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"ede86KsaClDep/jM3g2FdVe","Effect",void 0);e("Effect",{name:"../cinestation/art/Shaders/View",techniques:[{name:"transparent",passes:[{blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendSrcAlpha:2,blendDstAlpha:4}]},program:"../cinestation/art/Shaders/View|view-vs:vert|view-fs:frag",properties:{lookatPoint:{value:[.5,.5],type:14},deadZoneWidth:{value:[.1],type:13,handleInfo:["viewParams",0,13]},deadZoneHeight:{value:[.1],type:13,handleInfo:["viewParams",1,13]},softZoneWidth:{value:[.8],type:13,handleInfo:["viewParams",2,13]},softZoneHeight:{value:[.8],type:13,handleInfo:["viewParams",3,13]},viewParams:{type:16,editor:{visible:!1,deprecated:!0},value:[0,0,.8,.8]}}}]}],shaders:[{hash:3069556386,glsl4:{vert:"#extension GL_EXT_shader_explicit_arithmetic_types_int32: require\n precision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\n#if CC_USE_MORPH\n    int getVertexId() {\n      return gl_VertexIndex;\n    }\n  layout(set = 2, binding = 4) uniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n  };\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\n        ivec2 texSize = textureSize(tex, 0);\n        return texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture(tex, x)),\n        decode32(texture(tex, y)),\n        decode32(texture(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    layout(set = 2, binding = 6) uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    layout(set = 2, binding = 7) uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    layout(set = 2, binding = 8) uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    layout(location = 4) in u32vec4 a_joints;\n  layout(location = 5) in vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      layout(location = 7) in highp vec4 a_jointAnimInfo;\n    #endif\n    layout(set = 2, binding = 3) uniform CCSkinningTexture {\n      highp vec4 cc_jointTextureInfo;\n    };\n    layout(set = 2, binding = 2) uniform CCSkinningAnimation {\n      highp vec4 cc_jointAnimInfo;\n    };\n    layout(set = 2, binding = 5) uniform highp sampler2D cc_jointTexture;\n      #else\n    layout(set = 2, binding = 3) uniform CCSkinning {\n      highp vec4 cc_joints[30 * 3];\n    };\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  layout(location = 8) in vec4 a_matWorld0;\n  layout(location = 9) in vec4 a_matWorld1;\n  layout(location = 10) in vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    layout(location = 11) in vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  layout(location = 12) in float a_dyn_batch_id;\n  layout(set = 2, binding = 0) uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\n  layout(set = 2, binding = 0) uniform CCLocal {\n    highp mat4 cc_matWorld;\n    highp mat4 cc_matWorldIT;\n    highp vec4 cc_lightingMapUVParam;\n  };\n#endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\n precision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n};\nlayout(set = 1, binding = 0) uniform Constant {\n  vec4 viewParams;\n  vec2 lookatPoint;\n};\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(14. * cc_screenSize.z, dpx), step(14. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl3:{vert:"\n precision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\n#if CC_USE_MORPH\n    in float a_vertexId;\n    int getVertexId() {\n      return int(a_vertexId);\n    }\n  layout(std140) uniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n  };\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\n        ivec2 texSize = textureSize(tex, 0);\n        return texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture(tex, x)),\n        decode32(texture(tex, y)),\n        decode32(texture(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    in vec4 a_joints;\n  in vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      in highp vec4 a_jointAnimInfo;\n    #endif\n    layout(std140) uniform CCSkinningTexture {\n      highp vec4 cc_jointTextureInfo;\n    };\n    layout(std140) uniform CCSkinningAnimation {\n      highp vec4 cc_jointAnimInfo;\n    };\n    uniform highp sampler2D cc_jointTexture;\n      #else\n    layout(std140) uniform CCSkinning {\n      highp vec4 cc_joints[30 * 3];\n    };\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  in vec4 a_matWorld0;\n  in vec4 a_matWorld1;\n  in vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    in vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  in float a_dyn_batch_id;\n  layout(std140) uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\n  layout(std140) uniform CCLocal {\n    highp mat4 cc_matWorld;\n    highp mat4 cc_matWorldIT;\n    highp vec4 cc_lightingMapUVParam;\n  };\n#endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\n precision highp float;\nlayout(std140) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n};\nlayout(std140) uniform Constant {\n  vec4 viewParams;\n  vec2 lookatPoint;\n};\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(14. * cc_screenSize.z, dpx), step(14. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\n precision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\n#if CC_USE_MORPH\n    attribute float a_vertexId;\n    int getVertexId() {\n      return int(a_vertexId);\n    }\n  uniform vec4 cc_displacementWeights[15];\n  uniform vec4 cc_displacementTextureInfo;\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n        int pixelIndex = elementIndex;\n        vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n        vec2 uv = getPixelCoordFromLocation(location, cc_displacementTextureInfo.xy);\n        return texture2D(tex, uv);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture2D(tex, x)),\n        decode32(texture2D(tex, y)),\n        decode32(texture2D(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    attribute vec4 a_joints;\n  attribute vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      attribute highp vec4 a_jointAnimInfo;\n    #endif\n    uniform highp vec4 cc_jointTextureInfo;\n    uniform highp vec4 cc_jointAnimInfo;\n    uniform highp sampler2D cc_jointTexture;\n      #else\n    uniform highp vec4 cc_joints[90];\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  attribute vec4 a_matWorld0;\n  attribute vec4 a_matWorld1;\n  attribute vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    attribute vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  attribute float a_dyn_batch_id;\n  #else\n  #endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\n precision highp float;\nuniform mediump vec4 cc_screenSize;\nuniform vec4 viewParams;\n           uniform vec2 lookatPoint;\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(14. * cc_screenSize.z, dpx), step(14. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]}],samplerTextures:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]}]},statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:157,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:39}},defines:[{name:"CC_USE_MORPH",type:"boolean",defines:[]},{name:"CC_MORPH_TARGET_COUNT",type:"number",defines:["CC_USE_MORPH"],range:[2,8]},{name:"CC_MORPH_PRECOMPUTED",type:"boolean",defines:["CC_USE_MORPH"]},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean",defines:["CC_USE_MORPH"]},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean",defines:["CC_USE_MORPH"]},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean",defines:["CC_USE_MORPH"]},{name:"CC_USE_SKINNING",type:"boolean",defines:[]},{name:"CC_USE_BAKED_ANIMATION",type:"boolean",defines:["CC_USE_SKINNING"]},{name:"USE_INSTANCING",type:"boolean",defines:[],editor:{elevated:!0}},{name:"USE_BATCHING",type:"boolean",defines:["!USE_INSTANCING"],editor:{elevated:!0}},{name:"USE_LIGHTMAP",type:"boolean",defines:["USE_INSTANCING"]}],blocks:[{name:"Constant",members:[{name:"viewParams",type:16,count:1},{name:"lookatPoint",type:14,count:1}],defines:[],stageFlags:16,binding:0}],samplerTextures:[],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:2},{name:"a_tangent",type:16,count:1,defines:[],stageFlags:1,format:44,location:3},{name:"a_vertexId",type:13,count:1,defines:["CC_USE_MORPH"],stageFlags:1,format:11,location:6},{name:"a_joints",type:"u32vec4",count:1,defines:["CC_USE_SKINNING"],stageFlags:1,location:4},{name:"a_weights",type:16,count:1,defines:["CC_USE_SKINNING"],stageFlags:1,format:44,location:5},{name:"a_jointAnimInfo",type:16,count:1,defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:7},{name:"a_matWorld0",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:8},{name:"a_matWorld1",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:9},{name:"a_matWorld2",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:10},{name:"a_lightingMapUVParam",type:16,count:1,defines:["USE_INSTANCING","USE_LIGHTMAP"],stageFlags:1,format:44,isInstanced:!0,location:11},{name:"a_dyn_batch_id",type:13,count:1,defines:["!USE_INSTANCING","USE_BATCHING"],stageFlags:1,format:11,location:12}],varyings:[],name:"../cinestation/art/Shaders/View|view-vs:vert|view-fs:frag"}]});n._RF.pop()}}}));

System.register("chunks:///_virtual/Effect3_4.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"03165wFwQdEnJ8MN2JBAlO2","Effect3_4",void 0);e("Effect3_4",{name:"../cinestation/examples/art/Shaders/View",techniques:[{name:"transparent",passes:[{blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendSrcAlpha:2,blendDstAlpha:4}]},program:"../cinestation/examples/art/Shaders/View|view-vs:vert|view-fs:frag",properties:{lookatPoint:{value:[.5,.5],type:14},deadZoneWidth:{value:[.1],type:13,handleInfo:["viewParams",0,13]},deadZoneHeight:{value:[.1],type:13,handleInfo:["viewParams",1,13]},softZoneWidth:{value:[.8],type:13,handleInfo:["viewParams",2,13]},softZoneHeight:{value:[.8],type:13,handleInfo:["viewParams",3,13]},viewParams:{type:16,editor:{visible:!1,deprecated:!0},value:[0,0,.8,.8]}}}]}],shaders:[{blocks:[{name:"Constant",members:[{name:"viewParams",type:16,count:1},{name:"lookatPoint",type:14,count:1}],defines:[],stageFlags:16,binding:0}],samplerTextures:[],samplers:[],textures:[],buffers:[],images:[],subpassInputs:[],attributes:[{name:"a_position",defines:[],format:32,location:0},{name:"a_normal",defines:[],format:32,location:1},{name:"a_texCoord",defines:[],format:21,location:2},{name:"a_tangent",defines:[],format:44,location:3},{name:"a_vertexId",defines:["CC_USE_MORPH"],format:11,location:6},{name:"a_joints",defines:["CC_USE_SKINNING"],location:4},{name:"a_weights",defines:["CC_USE_SKINNING"],format:44,location:5},{name:"a_jointAnimInfo",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],format:44,isInstanced:!0,location:7},{name:"a_matWorld0",defines:["USE_INSTANCING"],format:44,isInstanced:!0,location:8},{name:"a_matWorld1",defines:["USE_INSTANCING"],format:44,isInstanced:!0,location:9},{name:"a_matWorld2",defines:["USE_INSTANCING"],format:44,isInstanced:!0,location:10},{name:"a_lightingMapUVParam",defines:["USE_INSTANCING","USE_LIGHTMAP"],format:44,isInstanced:!0,location:11},{name:"a_dyn_batch_id",defines:["!USE_INSTANCING","USE_BATCHING"],format:11,location:12}],varyings:[],fragColors:[{name:"cc_FragColor",typename:"vec4",type:16,count:1,defines:[],stageFlags:16,location:0}],hash:3775263886,glsl4:{vert:"#extension GL_EXT_shader_explicit_arithmetic_types_int32: require\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\n#if CC_USE_MORPH\n    int getVertexId() {\n      return gl_VertexIndex;\n    }\n  layout(set = 2, binding = 4) uniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n  };\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\n        ivec2 texSize = textureSize(tex, 0);\n        return texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture(tex, x)),\n        decode32(texture(tex, y)),\n        decode32(texture(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    layout(set = 2, binding = 7) uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    layout(set = 2, binding = 8) uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    layout(set = 2, binding = 9) uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    layout(location = 4) in u32vec4 a_joints;\n  layout(location = 5) in vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      layout(location = 7) in highp vec4 a_jointAnimInfo;\n    #endif\n    layout(set = 2, binding = 3) uniform CCSkinningTexture {\n      highp vec4 cc_jointTextureInfo;\n    };\n    layout(set = 2, binding = 2) uniform CCSkinningAnimation {\n      highp vec4 cc_jointAnimInfo;\n    };\n    layout(set = 2, binding = 6) uniform highp sampler2D cc_jointTexture;\n      #else\n    layout(set = 2, binding = 3) uniform CCSkinning {\n      highp vec4 cc_joints[30 * 3];\n    };\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  layout(location = 8) in vec4 a_matWorld0;\n  layout(location = 9) in vec4 a_matWorld1;\n  layout(location = 10) in vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    layout(location = 11) in vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  layout(location = 12) in float a_dyn_batch_id;\n  layout(set = 2, binding = 0) uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\n  layout(set = 2, binding = 0) uniform CCLocal {\n    highp mat4 cc_matWorld;\n    highp mat4 cc_matWorldIT;\n    highp vec4 cc_lightingMapUVParam;\n  };\n#endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n  mediump vec4 cc_nearFar;\n  mediump vec4 cc_viewPort;\n};\nlayout(set = 1, binding = 0) uniform Constant {\n  vec4 viewParams;\n  vec2 lookatPoint;\n};\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(10. * cc_screenSize.z, dpx), step(10. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl3:{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\n#if CC_USE_MORPH\n    in float a_vertexId;\n    int getVertexId() {\n      return int(a_vertexId);\n    }\n  layout(std140) uniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n  };\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\n        ivec2 texSize = textureSize(tex, 0);\n        return texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture(tex, x)),\n        decode32(texture(tex, y)),\n        decode32(texture(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    in vec4 a_joints;\n  in vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      in highp vec4 a_jointAnimInfo;\n    #endif\n    layout(std140) uniform CCSkinningTexture {\n      highp vec4 cc_jointTextureInfo;\n    };\n    layout(std140) uniform CCSkinningAnimation {\n      highp vec4 cc_jointAnimInfo;\n    };\n    uniform highp sampler2D cc_jointTexture;\n      #else\n    layout(std140) uniform CCSkinning {\n      highp vec4 cc_joints[30 * 3];\n    };\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  in vec4 a_matWorld0;\n  in vec4 a_matWorld1;\n  in vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    in vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  in float a_dyn_batch_id;\n  layout(std140) uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\n  layout(std140) uniform CCLocal {\n    highp mat4 cc_matWorld;\n    highp mat4 cc_matWorldIT;\n    highp vec4 cc_lightingMapUVParam;\n  };\n#endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n  mediump vec4 cc_nearFar;\n  mediump vec4 cc_viewPort;\n};\nlayout(std140) uniform Constant {\n  vec4 viewParams;\n  vec2 lookatPoint;\n};\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(10. * cc_screenSize.z, dpx), step(10. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\n#if CC_USE_MORPH\n    attribute float a_vertexId;\n    int getVertexId() {\n      return int(a_vertexId);\n    }\n  uniform vec4 cc_displacementWeights[15];\n  uniform vec4 cc_displacementTextureInfo;\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n        int pixelIndex = elementIndex;\n        vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n        vec2 uv = getPixelCoordFromLocation(location, cc_displacementTextureInfo.xy);\n        return texture2D(tex, uv);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture2D(tex, x)),\n        decode32(texture2D(tex, y)),\n        decode32(texture2D(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    attribute vec4 a_joints;\n  attribute vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      attribute highp vec4 a_jointAnimInfo;\n    #endif\n    uniform highp vec4 cc_jointTextureInfo;\n    uniform highp vec4 cc_jointAnimInfo;\n    uniform highp sampler2D cc_jointTexture;\n      #else\n    uniform highp vec4 cc_joints[90];\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  attribute vec4 a_matWorld0;\n  attribute vec4 a_matWorld1;\n  attribute vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    attribute vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  attribute float a_dyn_batch_id;\n  #else\n  #endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nuniform mediump vec4 cc_screenSize;\nuniform vec4 viewParams;\n           uniform vec2 lookatPoint;\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(10. * cc_screenSize.z, dpx), step(10. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[],buffers:[],images:[]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]}],samplerTextures:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]}],buffers:[],images:[]},statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:157,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:41}},defines:[{name:"CC_USE_MORPH",type:"boolean",defines:[],_offset:0},{name:"CC_MORPH_TARGET_COUNT",type:"number",defines:["CC_USE_MORPH"],range:[2,8],_offset:1},{name:"CC_MORPH_PRECOMPUTED",type:"boolean",defines:["CC_USE_MORPH"],_offset:4},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean",defines:["CC_USE_MORPH"],_offset:5},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean",defines:["CC_USE_MORPH"],_offset:6},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean",defines:["CC_USE_MORPH"],_offset:7},{name:"CC_USE_SKINNING",type:"boolean",defines:[],_offset:8},{name:"CC_USE_BAKED_ANIMATION",type:"boolean",defines:["CC_USE_SKINNING"],_offset:9},{name:"USE_INSTANCING",type:"boolean",defines:[],editor:{elevated:!0},_offset:10},{name:"USE_BATCHING",type:"boolean",defines:["!USE_INSTANCING"],editor:{elevated:!0},_offset:11},{name:"USE_LIGHTMAP",type:"boolean",defines:["USE_INSTANCING"],_offset:12}],name:"../cinestation/examples/art/Shaders/View|view-vs:vert|view-fs:frag"}]});n._RF.pop()}}}));

System.register("chunks:///_virtual/Enums.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"49842yOMVVGZL485F8uNL2G","Enums",void 0);e("LogLevel",function(e){return e[e.DEBUG=1]="DEBUG",e[e.DUMP=16]="DUMP",e[e.WARN=256]="WARN",e[e.ERROR=4096]="ERROR",e[e.ALL=4369]="ALL",e}({})),e("ViewStatus",function(e){return e[e.WAITTING_CLOSE=0]="WAITTING_CLOSE",e[e.WATITING_HIDE=1]="WATITING_HIDE",e[e.WAITTING_NONE=2]="WAITTING_NONE",e}({})),e("ButtonSpriteType",function(e){return e.Norml="normalSprite",e.Pressed="pressedSprite",e.Hover="hoverSprite",e.Disable="disabledSprite",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/EventComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventProcessor.ts"],(function(t){var n,e,o,c,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,c=t.Component},function(t){i=t.EventProcessor}],execute:function(){var s;e._RF.push({},"be493kcwKNNaLgUNYY4orZO","EventComponent",void 0);var r=o.ccclass;o.property,t("default",r("EventComponent")(s=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),c=0;c<e;c++)o[c]=arguments[c];return(n=t.call.apply(t,[this].concat(o))||this)._eventProcessor=new i,n}n(e,t);var o=e.prototype;return o.on=function(t){t.target||(t.target=this),this._eventProcessor.on(t)},o.once=function(t){t.target||(t.target=this),this._eventProcessor.once(t)},o.off=function(t){t.target||(t.target=this),this._eventProcessor.off(t)},o.onD=function(t,n){this.on({bind:"Dispatcher",type:t,cb:n})},o.onceD=function(t,n){this.once({bind:"Dispatcher",type:t,cb:n})},o.offD=function(t){this.off({bind:"Dispatcher",type:t})},o.onG=function(t,n){this.on({bind:"Game",type:t,cb:n})},o.onceG=function(t,n){this.once({bind:"Game",type:t,cb:n})},o.offG=function(t,n){this.off({bind:"Game",type:t,cb:n})},o.onI=function(t,n){this.on({bind:"Input",type:t,cb:n})},o.onceI=function(t,n){this.once({bind:"Input",type:t,cb:n})},o.offI=function(t,n){this.off({bind:"Input",type:t,cb:n})},o.onN=function(t,n,e,o,c){this.on({bind:"Node",type:n,cb:e,target:o,useCapture:c,node:t})},o.onceN=function(t,n,e,o,c){this.once({bind:"Node",type:n,cb:e,target:o,useCapture:c,node:t})},o.offN=function(t,n,e,o,c){this.off({bind:"Node",type:n,cb:e,target:o,useCapture:c,node:t})},o.addEvents=function(){},o.onLoad=function(){this.addEvents()},o.onDestroy=function(){this._eventProcessor.onDestroy()},e}(c))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/EventDef.ts",["cc"],(function(e){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"a9031KSvh1B5JUcXqcp43Yc","EventDef",void 0);var t=e("EventDef",(function(){}));t.MODEL_CLICK="model_click",t.SCENE_LOADED="scene_loaded",c._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"4621b0iDBRHgajxE7LGRbPS","EventManager",void 0);var a=e("EventManager",function(){function e(){this._eventCaches=null,this.isResident=!0,this.module=null,this._eventCaches={}}var n=e.prototype;return n.destory=function(){e._instance=null},n.on=function(e,t,n,a){if(e&&t){n||(n=this);for(var i=this._eventCaches[e]||[],c=!1,r=0;r<i.length;r++)if(i[r].target===n){c=!0;break}if(!c){var s={type:e,callback:t,target:n,once:a};i.push(s),this._eventCaches[e]=i}}},n.remove=function(e,t){if(e&&t){var n=this._eventCaches[e];if(n){for(var a=0;a<n.length;a++)if(n[a].target===t){n.splice(a,1);break}0==n.length&&delete this._eventCaches[e]}}},n.dispatch=function(){if(!(arguments.length<1)){var e=arguments[0];if(e){Array.prototype.shift.apply(arguments);var t=this._eventCaches[e];if(t){for(var n=[],a=0;a<t.length;a++){var i=t[a];try{"object"==typeof Reflect?Reflect.apply(i.callback,i.target,arguments):i.callback.apply(i.target,arguments),i.once&&n.push(i)}catch(e){Log.e(e)}}for(var c=0;c<n.length;c++){var r=n[c];this.remove(r.type,r.target)}}}}},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e)}}]),e}());a._instance=null,a.module="【事件管理器】",window.dispatch=function(){App?Reflect.apply(App.eventManager.dispatch,App.eventManager,arguments):Reflect.apply(a.instance.dispatch,a.instance,arguments)},n._RF.pop()}}}));

System.register("chunks:///_virtual/EventProcessor.ts",["cc"],(function(t){var e,n,o,s;return{setters:[function(t){e=t.cclegacy,n=t.game,o=t.input,s=t.isValid}],execute:function(){e._RF.push({},"d98a30Q8GxCfLuyb12A3uDh","EventProcessor",void 0);t("EventProcessor",function(){function t(){this._eventsD=new Map,this._eventsG=[],this._eventsI=[]}var e=t.prototype;return e.onD=function(t,e){this.on({bind:"Dispatcher",type:t,cb:e})},e.onceD=function(t,e){this.once({bind:"Dispatcher",type:t,cb:e})},e.offD=function(t){this.off({bind:"Dispatcher",type:t})},e.onG=function(t,e){this.on({bind:"Game",type:t,cb:e})},e.onceG=function(t,e){this.once({bind:"Game",type:t,cb:e})},e.offG=function(t,e){this.off({bind:"Game",type:t,cb:e})},e.onI=function(t,e){this.on({bind:"Input",type:t,cb:e})},e.onceI=function(t,e){this.once({bind:"Input",type:t,cb:e})},e.offI=function(t,e){this.off({bind:"Input",type:t,cb:e})},e.onN=function(t,e,n,o,s){this.on({bind:"Node",type:e,cb:n,target:o,useCapture:s,node:t})},e.onceN=function(t,e,n,o,s){this.once({bind:"Node",type:e,cb:n,target:o,useCapture:s,node:t})},e.offN=function(t,e,n,o,s){this.off({bind:"Node",type:e,cb:n,target:o,useCapture:s,node:t})},e.addEvents=function(){},e.onLoad=function(){this.addEvents()},e.onDestroy=function(){this._cleanD(),this._cleanG(),this._cleanI(),this._cleanN()},e.on=function(t){switch(t.bind){case"Dispatcher":this._onD(t);break;case"Game":this._onG(t);break;case"Input":this._onI(t);break;case"Node":this._onN(t);break;default:Log.e("on "+t.bind+" 未知事件类型")}},e.once=function(t){t.once=!0,this.on(t)},e.off=function(t){switch(t.bind){case"Dispatcher":this._offD(t);break;case"Game":this._offG(t);break;case"Input":this._offI(t);break;case"Node":this._offN(t);break;default:Log.e("off "+t.bind+" 未知事件类型")}},e._onD=function(t){t.target||(t.target=this),this._eventsD.has(t.type)?Log.e(t.type+" 重复注册"):(App.eventManager.on(t.type,t.cb,t.target,t.once),this._eventsD.set(t.type,t))},e._offD=function(t){t.target||(t.target=this),this._eventsD.has(t.type)&&(App.eventManager.remove(t.type,t.target),this._eventsD.delete(t.type))},e._cleanD=function(){this._eventsD.forEach((function(t,e){App.eventManager.remove(t.type,t.target)})),this._eventsD.clear()},e._onG=function(t){t.target||(t.target=this),n.hasEventListener(t.type,t.cb,t.target)||(n.on(t.type,t.cb,t.target,t.once),this._eventsG.push(t))},e._offG=function(t){t.target||(t.target=this),n.off(t.type,t.cb,t.target);for(var e=0;e<this._eventsG.length;e++){var o=this._eventsG[e];if(o.type==t.type&&o.cb==t.cb&&o.target==o.target){this._eventsG.splice(e,1);break}}},e._cleanG=function(){for(var t=0;t<this._eventsG.length;t++){var e=this._eventsG[t];n.off(e.type,e.cb,e.target)}this._eventsG=[]},e._onI=function(t){t.target||(t.target=this),this._has(this._eventsI,t)||(t.once?o.once(t.type,t.cb,t.target):o.on(t.type,t.cb,t.target),this._eventsI.push(t))},e._offI=function(t){t.target||(t.target=this),o.off(t.type,t.cb,t.target);for(var e=0;e<this._eventsI.length;e++){var n=this._eventsI[e];if(n.type==t.type&&n.cb==t.cb&&n.target==n.target){this._eventsI.splice(e,1);break}}},e._cleanI=function(){for(var t=0;t<this._eventsI.length;t++){var e=this._eventsI[t];o.off(e.type,e.cb,e.target)}this._eventsI=[]},e._onN=function(t){var e,n;(t.target||(t.target=this),s(t.node))&&(t.once?null==(e=t.node)||e.once(t.type,t.cb,t.target,t.useCapture):null==(n=t.node)||n.on(t.type,t.cb,t.target,t.useCapture))},e._offN=function(t){var e;t.target||(t.target=this),s(t.node)&&(null==(e=t.node)||e.off(t.type,t.cb,t.target,t.useCapture))},e._cleanN=function(){},e._has=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.type==e.type&&o.cb==e.cb&&o.target==e.target)return!0}return!1},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Events.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c28edFocs9JSJspgORBBtF4","Events",void 0);e("CinestationEvent",{EDITOR_CHANGED:"cinestation-editor-changed",COMPOSER_CHANGED:"cinestation-composer-changed",LENS_CHANGED:"cinestation-lens-changed"});t._RF.pop()}}}));

System.register("chunks:///_virtual/Extentions.js",["./cjs-loader.mjs"],(function(t,e){var n;return{setters:[function(t){n=t.default}],execute:function(){t("default",void 0);var r=t("__cjsMetaURL",e.meta.url);n.define(r,(function(e,n,r,o,i){window.md5=function(t){return CryptoJS.MD5(t)},Date.prototype.format=function(t){var e=this,n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};t=t.replace(/(y+)/i,(function(){return e.getFullYear().toString()}));var r=function(){var t=arguments[2],e=n[arguments[0]],r=1==t.length?""+e:("00"+e).substring(e.toString().length);return r};for(var o in n)t=t.replace(new RegExp("("+o+")"),r.bind(null,o));return t},Date.timeNow=function(){return Math.floor(Date.now()/1e3)},Date.format=function(t,e){return e?e.format(t):(new Date).format(t)},String.format=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);var r=t[0];return"string"!=typeof r?(EDITOR||console.error("String.format error,first param is not a string"),""):(t.shift(),Array.isArray(t[0])&&1==t.length&&(t=t[0]),r.replace(/\{(\d+)\}/g,(function(e,n){return t[n]})))},window.Log=console,window.Log.e=console.error,window.Log.d=console.log,window.Log.w=console.warn,window.Log.dump=console.debug,t("default",r.exports)}),{})}}}));

System.register("chunks:///_virtual/Extentions.mjs_cjs=&original=.js",["./Extentions.js","./cjs-loader.mjs"],(function(t,e){var n,s;return{setters:[function(e){n=e.__cjsMetaURL;var s={};s.__cjsMetaURL=e.__cjsMetaURL,s.default=e.default,t(s)},function(t){s=t.default}],execute:function(){n||s.throwInvalidWrapper("./Extentions.js",e.meta.url),s.require(n)}}}));

System.register("chunks:///_virtual/FreeLookHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./CinestationMath.ts","./CameraHandler.ts"],(function(t){var e,i,a,o,n,s,l,c,h,r,_,u,d,f,p,v,M,m,w,g,b;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,a=t.Vec3,o=t.Vec2,n=t.director,s=t.input,l=t.Input,c=t.sys,h=t.EventMouse,r=t.view,_=t.isValid,u=t.clamp,d=t.toRadian},function(t){f=t.cinestation},function(t){p=t.quarticDamp,v=t.Vec3_setFromSpherical,M=t.Vec3_setFromMatrixColumn,m=t.Vec3_smoothDamp,w=t.Vec3_closeTo,g=t.Spherical},function(t){b=t.CameraHandler}],execute:function(){i._RF.push({},"08dd8nh9GNDxqZ+VmBOV6+v","FreeLookHandler",void 0);var E=Math.abs,D=Math.tan,O=new a,S=new a,T=new o,y=new a,P=new a,L=new a,U=new o,k=new o,x=new o,I=new o;t("FreeLookHandler",function(t){function i(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this)._button=-1,e._needUpdateRotate=!1,e._rotateDelta=new o,e._panDelta=new o,e._distanceScale=1,e._heightTotal=1,e._spherical=new g,e}e(i,t);var b=i.prototype;return b.onEnable=function(){f.input&&this._registInputEvents(),n.on("VCam.enableInput",this._onEnableInput,this)},b.onDisable=function(){f.input&&this._clearInputEvents(),n.off("VCam.enableInput",this._onEnableInput,this)},b.onLookAtChanged=function(t){this._needUpdateRotate=!0},b._registInputEvents=function(){s.on(l.EventType.MOUSE_DOWN,this._onMouseDown,this),s.on(l.EventType.MOUSE_UP,this._onMouseUp,this),s.on(l.EventType.MOUSE_MOVE,this._onMouseMove,this),s.on(l.EventType.MOUSE_WHEEL,this._onMouseWheel,this),s.on(l.EventType.TOUCH_MOVE,this._onTouchMove,this),s.on(l.EventType.TOUCH_END,this._onTouchEnd,this)},b._clearInputEvents=function(){s.off(l.EventType.MOUSE_DOWN,this._onMouseDown,this),s.off(l.EventType.MOUSE_UP,this._onMouseUp,this),s.off(l.EventType.MOUSE_MOVE,this._onMouseMove,this),s.off(l.EventType.MOUSE_WHEEL,this._onMouseWheel,this),s.off(l.EventType.TOUCH_MOVE,this._onTouchMove,this),s.off(l.EventType.TOUCH_END,this._onTouchEnd,this)},b._onEnableInput=function(t){t?this._registInputEvents():this._clearInputEvents()},b._getPreviousLocation=function(t,e){return t.getPreviousLocation(e)},b._getLocation=function(t,e){return t.getLocation(e)},b._onTouchMove=function(t){if(c.isMobile){var e=this._vcam.body.freelook.rotateTouchID,i=t.getAllTouches();if(i.length>e+1){if(this._getPreviousLocation(i[e],x),this._getPreviousLocation(i[e+1],I),this._getLocation(i[e],U),this._getLocation(i[e+1],k),1===this._distanceScale){var a=this._calculateDistanceScale(o.distance(x,I)/o.distance(U,k));Math.abs(a-1)>.02?((this._spherical.radius*this._distanceScale<this._vcam.body.freelook.distanceMax-1e3||a<1)&&(this._distanceScale*=a),this._heightTotal=this._heightTotal*this._distanceScale):(x.add(I).multiplyScalar(.5),U.add(k).multiplyScalar(.5),this._rotateDelta.add(this._calculateRotateDelta(T,this._getPreviousLocation(i[e],U),this._getLocation(i[e],k))))}}else i.length>e&&this._setPanDelta(this._calculatePanDelta(T,this._getPreviousLocation(i[e],U),this._getLocation(i[e],k)))}},b._onTouchEnd=function(t){},b._onMouseDown=function(t){this._button=t.getButton()},b._onMouseUp=function(t){this._button=-1},b._onMouseWheel=function(t){if(t.getScrollY()>0)this._distanceScale*=this._calculateDistanceScale(.95);else if(t.getScrollY()<0){if(this._spherical.radius*this._distanceScale>=this._vcam.body.freelook.distanceMax-1e3)return;this._distanceScale*=this._calculateDistanceScale(1/.95)}this._heightTotal=this._heightTotal*this._distanceScale},b._onMouseMove=function(t){switch(this._button){case h.BUTTON_LEFT:this._setPanDelta(this._calculatePanDelta(T,this._getPreviousLocation(t,U),this._getLocation(t,k)));break;case h.BUTTON_MIDDLE:case h.BUTTON_RIGHT:this._rotateDelta.add(this._calculateRotateDelta(T,this._getPreviousLocation(t,U),this._getLocation(t,k)))}},b._setPanDelta=function(t){this._panDelta.add(t)},b._calculateDistanceScale=function(t){return t},b._calculateRotateDelta=function(t,e,i){var a=this._vcam.body.freelook;return o.subtract(t,i,e).multiplyScalar(2*a.rotateSpeed*Math.PI/r.getVisibleSizeInPixel().height),t},b._calculatePanDelta=function(t,e,i){var a=this._vcam.body.freelook;return o.subtract(t,i,e).multiplyScalar(a.panSpeed/r.getVisibleSizeInPixel().height),t},b.updateCamera=function(t){var e=this._vcam,i=e.body.freelook,o=0;if(_(e.lookAt)){a.add(O,e.lookAt.worldPosition,e.aim.trackedObjectOffset);var n=p(1,0,i.rotateSmoothing,t);if((E(this._rotateDelta.x)+E(this._rotateDelta.y)>.01||1!==this._distanceScale||this._needUpdateRotate)&&(a.subtract(S,e.node.worldPosition,O),this._spherical.setFromVec3(S),i.forbidX||(this._spherical.theta=u(this._spherical.theta-this._rotateDelta.x*(1-n),i.thetaMin,i.thetaMax)),i.forbidY||(this._spherical.phi=u(this._spherical.phi+this._rotateDelta.y*(1-n),i.phiMin,i.phiMax)),i.forbidZ||(this._spherical.radius=u(this._spherical.radius*this._distanceScale,i.distanceMin,i.distanceMax)),v(S,this._spherical),e.node.worldPosition=S.add(O),o=this._needUpdateRotate||1!==this._distanceScale?1:2,this._needUpdateRotate=!1,this._rotateDelta.multiplyScalar(n),this._distanceScale=1,App.mapManager.updateTileMap(new a(this._vcam.aim.trackedObjectOffset.x,this._heightTotal,this._vcam.aim.trackedObjectOffset.z))),!i.forbidPan&&E(this._panDelta.x)+E(this._panDelta.y)>.01){a.subtract(S,e.node.worldPosition,O),M(P,e.node.worldMatrix,0),M(L,e.node.worldMatrix,1);var s=2*S.length()*D(d(.5*e.lens.fov)),l=e.aim.trackedObjectOffset,c=new a(P.x,0,P.z);c.normalize(),c.multiplyScalar(this._panDelta.x*(1-n)*s),l.subtract(c);var h=new a(L.x,0,L.z);h.normalize(),h.multiplyScalar(this._panDelta.y*(1-n)*s),l.subtract(h),a.add(O,e.lookAt.worldPosition,l),e.node.worldPosition=S.add(O),this._panDelta.multiplyScalar(n),o=1,App.mapManager.updateTileMap(new a(this._vcam.aim.trackedObjectOffset.x,this._heightTotal,this._vcam.aim.trackedObjectOffset.z))}}_(e.follow)&&(1===o?a.subtract(i.followOffset,e.node.worldPosition,e.follow.worldPosition):2===o&&(a.subtract(y,i.followOffset,e.aim.trackedObjectOffset),a.subtract(S,a.subtract(O,e.node.worldPosition,e.follow.worldPosition),e.aim.trackedObjectOffset),a.add(i.followOffset,S.normalize().multiplyScalar(y.length()),e.aim.trackedObjectOffset)),a.add(S,e.follow.worldPosition,i.followOffset),i.followDamping>0?m(O,e.node.worldPosition,S,i.followDamping,t):O.set(S),w(O,e.node.worldPosition)||(e.node.worldPosition=O))},i}(b));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["cc","./Macros.ts"],(function(t){var n,c;return{setters:[function(t){n=t.cclegacy},function(t){c=t.Macro}],execute:function(){n._RF.push({},"10c69d7UopB0ZJuP7cGTLW8","GameData",void 0),t("GameData",function(){function t(){this.module=""}var n=t.prototype;return n.init=function(){},n.destory=function(){},n.clear=function(){},n.debug=function(){Log.d(""+this.module)},t}()).module=c.UNKNOWN,n._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalAudio.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Macros.ts","./AudioComponent.ts"],(function(e){var o,t,u,a,n,i,s,c;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy,u=e._decorator,a=e.AudioSource,n=e.AudioClip},function(e){i=e.Macro},function(e){s=e.AudioInfo,c=e.default}],execute:function(){var r;t._RF.push({},"36e9f0ljBtPh7e2dKGGG8sY","GlobalAudio",void 0);var l=u.ccclass;u.property,u.menu,e("default",l("GlobalAudio")(r=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var u=t.prototype;return u.playGlobalMusic=function(e,o){return void 0===o&&(o=!0),this.playMusic(e,i.BUNDLE_RESOURCES,o)},u.playGlobalEffect=function(e,o){return void 0===o&&(o=!1),this.playEffect(e,i.BUNDLE_RESOURCES,o)},u.playMusic=function(e,o,t){var u=this;void 0===t&&(t=!0);var c=this;return new Promise((function(r){if(o!=i.BUNDLE_RESOURCES)return Log.e(e+" 不在 "+i.BUNDLE_RESOURCES+" 全局播放的声音请存放到"+i.BUNDLE_RESOURCES),void r(!1);var l=u.audioData.makeKey(e,o),d=u.audioData.musicInfos.get(l);d||((d=new s).url=e,d.bundle=o,d.source=u.node.addComponent(a),d.source.playOnAwake=!0,d.source.name=l,u.audioData.musicInfos.set(l,d)),u.audioData.curMusic=d,App.cache.getCacheByAsync(e,n,o).then((function(e){var o=e[0],a=e[1];a?(App.asset.addPersistAsset(o),c.stopMusic(),d&&d.source&&(d.source.clip=a,d.source.loop=t,u.play(d,!0,r))):r(!1)}))}))},u.playEffect=function(e,o,t){var u=this;return void 0===t&&(t=!1),new Promise((function(c){if(o!=i.BUNDLE_RESOURCES)return Log.e(e+" 不在 "+i.BUNDLE_RESOURCES+" 全局播放的声音请存放到"+i.BUNDLE_RESOURCES),void c(!1);var r=u.audioData.makeKey(e,o),l=u.audioData.effectInfos.get(r);l||((l=new s).url=e,l.bundle=o,l.source=u.node.addComponent(a),l.source.name=r,u.audioData.effectInfos.set(r,l)),App.cache.getCacheByAsync(e,n,o).then((function(e){var o=e[0],a=e[1];a?(App.asset.addPersistAsset(o),l&&l.source&&(l.source.clip=a,l.source.loop=t,u.play(l,!1,c))):c(!1)}))}))},t}(c))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/HardLookAtHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationMath.ts","./CameraHandler.ts"],(function(o){var t,e,n,a,r,i,s;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o.Vec3,a=o.Quat,r=o.isValid},function(o){i=o.Vec4_closeTo},function(o){s=o.CameraHandler}],execute:function(){e._RF.push({},"bae4er/eLtPT58dr/UB3svC","HardLookAtHandler",void 0);var d=new n,l=new a;o("HardLookAtHandler",function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e.prototype.updateCamera=function(o){var t=this._vcam;r(t.lookAt)&&(n.add(d,t.lookAt.position,t.aim.trackedObjectOffset),t.lookAt.parent&&d.add(t.lookAt.parent.worldPosition),t.lookaheadPosition.set(d),a.fromViewUp(l,n.subtract(d,t.node.worldPosition,d).normalize()),i(l,t.node.worldRotation)||(t.node.worldRotation=l))},e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/ImpulseStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./NoiseGenerator.ts","./BaseStage.ts"],(function(e){var t,n,o,r,s,a;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy},function(e){r=e.cinestation},function(e){s=e.NoiseGenerator},function(e){a=e.BaseStage}],execute:function(){o._RF.push({},"dccddmTYmhG3rgagSH9G+aa","ImpulseStage",void 0);e("ImpulseStage",function(e){function o(){return e.apply(this,arguments)||this}return t(o,e),o.prototype.updateStage=function(e){for(var t,o=this._vcam,a=o.impulse,i=n(r.impulseSources);!(t=i()).done;){var u=t.value;if(u.node.layer&a.source){var c=u.generateImpulse(e);c&&s.ApplyNoise(c,o)}}},o}(a));o._RF.pop()}}}));

System.register("chunks:///_virtual/InitData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts"],(function(t){var i,e,n,o;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy},function(t){o=t.GameData}],execute:function(){n._RF.push({},"e3e240u+79EgIpUIePaihwN","InitData",void 0),t("InitData",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this)._tile=void 0,i._terrain=void 0,i._longitude=void 0,i._latitude=void 0,i._zoom=void 0,i}return i(n,t),n.prototype.init=function(t,i,e,n,o){this._tile=t,this._terrain=i,this._longitude=e,this._latitude=n,this._zoom=o},e(n,[{key:"tile",get:function(){return this._tile},set:function(t){this._tile=t}},{key:"terrain",get:function(){return this._terrain},set:function(t){this._terrain=t}},{key:"longitude",get:function(){return this._longitude},set:function(t){this._longitude=t}},{key:"latitude",get:function(){return this._latitude},set:function(t){this._latitude=t}},{key:"zoom",get:function(){return this._zoom},set:function(t){this._zoom=t}}]),n}(o)).module="InitData",n._RF.pop()}}}));

System.register("chunks:///_virtual/IVCam.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"7a954rg8HdAWIKarUOuXRam","IVCam",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/KDTree.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"d982e175olFXpuopCrge0tD","KDTree",void 0);var e=function(t){this.point=void 0,this.left=void 0,this.right=void 0,this.point=t,this.left=null,this.right=null};t("KDTree",function(){function t(t){this.root=void 0,this.root=this.buildTree(t,0)}var i=t.prototype;return i.buildTree=function(t,i){if(0===t.length)return null;var n=i%2;t.sort((function(t,i){return t[n]-i[n]}));var r=Math.floor(t.length/2),o=new e(t[r]);return o.left=this.buildTree(t.slice(0,r),i+1),o.right=this.buildTree(t.slice(r+1),i+1),o},i.nearestNeighbor=function(t){var i=this,e=null,n=1/0;return function r(o,u){if(void 0===u&&(u=0),null!==o){var l=u%2,h=t[l]<o.point[l],s=h?o.left:o.right,c=h?o.right:o.left;r(s,u+1);var a=i.euclideanDistance(t,o.point);a<n&&(e=o,n=a),Math.abs(t[l]-o.point[l])<n&&r(c,u+1)}}(this.root),e},i.euclideanDistance=function(t,i){return Math.sqrt(Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2))},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/LayerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,e,r,i;return{setters:[function(t){o=t.createClass},function(t){n=t.cclegacy,e=t.instantiate,r=t.js,i=t.find}],execute:function(){n._RF.push({},"727e8HnjclDmLRdK/ssw1n1","LayerManager",void 0),t("default",function(){function t(){this.isResident=!0,this.module=null,this._cfgs=[],this._layers=new Map,this.node=null,this._root=null}var n=t.prototype;return n.add=function(t,o){var n=this._layers.get(o);n?n.addChild(t):Log.e(this.module+"未定义的层级")},n.onLoad=function(t){var o=this;this.node=t;var n=e(this.root);this._cfgs.forEach((function(t){var r=e(n);o.root.addChild(r),r.name="Layer_"+t.name,o._layers.set(t.sort,r)}))},n.onDestroy=function(t){},n.addComponent=function(t){if(this.root){var o=this.root.getComponent(t);return o||this.root.addComponent(t)}return null},n.removeComponent=function(t){if(this.root){var o=this.root.getComponent(t);o&&o.destroy()}},n.init=function(t){var o=this;Object.keys(t).forEach((function(n){var e={name:n,sort:t[n]};o._cfgs.push(e)})),this._cfgs.sort((function(t,o){return t.sort-o.sort}))},n.destory=function(){},n.clear=function(){},n.debug=function(t){if(t||((t={}).showChildren=!0,t.showComp=!0),this.root&&(t.showChildren&&(Log.d(this.module+" 层级信息,注：该层级上无任何节点的不输出信息。"),this._layers.forEach((function(t){t.children.length>0&&(Log.d(t.name+" 层包含节点如下:"),t.children.forEach((function(t){Log.d(t.name+" active : "+t.active)})))}))),t.showComp)){Log.d(this.module+" 组件信息");for(var o=this.root._components,n=0;n<o.length;n++)Log.d(r.getClassName(o[n]))}},o(t,[{key:"root",get:function(){return this._root||(this._root=i("viewRoot",this.node)),this._root}}]),t}()).module="【层级管理器】",n._RF.pop()}}}));

System.register("chunks:///_virtual/LocalStorage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BitEncrypt.ts"],(function(t){var e,r,n;return{setters:[function(t){e=t.createClass},function(t){r=t.cclegacy},function(t){n=t.BitEncrypt}],execute:function(){r._RF.push({},"7df1f3NkfREA41+P2tyRVrV","LocalStorage",void 0),t("LocalStorage",function(){function t(){this.module=null,this.key="VuxiAKihQ0VR9WRe"}var r=t.prototype;return r.encrypt=function(t){return n.encode(JSON.stringify(t),this.key)},r.decryption=function(t){return n.decode(t,this.key)},r.getItem=function(t,e){void 0===e&&(e=null);var r=this.storage.getItem(t);if(!r)return e;try{var n=this.decryption(r),o=JSON.parse(n);return o.type?o.value:r}catch(t){return r}},r.setItem=function(t,e){var r=typeof e;if("number"==r||"string"==r||"boolean"==r||"object"==r){var n={type:r,value:e};try{var o=this.encrypt(n);this.storage.setItem(t,o)}catch(t){}}},r.removeItem=function(t){this.storage.removeItem(t)},e(t,[{key:"storage",get:function(){return window.localStorage}}]),t}()).module="【本地仓库】",r._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts"],(function(t){var e,n,i,o;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,i=t.sys},function(t){o=t.LogLevel}],execute:function(){n._RF.push({},"55eeb6MyWJIZa9xhvTVVf4w","Logger",void 0),t("LoggerImpl",function(){function t(){this.logger=console,this._level=o.ALL,this.module=null,this.isResident=!0,this.update()}var n=t.prototype;return n.attach=function(t){this.isValid(t)||(this.level=this.level|t,this.update())},n.detach=function(t){this.isValid(t)&&(this.level=this.level^t,this.update())},n.isValid=function(t){return!!(this.level&t)},n.update=function(){this.isValid(o.DUMP)?i.isBrowser?this.logger.dump=console.debug:this.logger.dump=this.dump.bind(this):this.logger.dump=function(){},this.isValid(o.ERROR)?this.logger.e=console.error:this.logger.e=function(){},this.isValid(o.DEBUG)?this.logger.d=console.log:this.logger.d=function(){},this.isValid(o.WARN)?this.logger.w=console.warn:this.logger.w=function(){}},n.dump=function(){if(this.isValid(o.DUMP)){var t=arguments[2];if(null==t&&(t=5),Number.isNaN(t)&&(t=10),t>10&&(t=10),t<=0)return void(t=1);var e=arguments[0];e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());var n=this._dump(e,arguments[1],t,0);this.logger.d(n)}},n.convertName=function(t,e){return void 0===e&&(e="="),t.length>0?t+" "+e+" ":" "},n.toBoolean=function(t,e){return""+this.convertName(t)+e+";"},n.toNumber=function(t,e){return""+this.convertName(t)+e},n.toStringForDump=function(t,e){return this.convertName(t)+'"'+e+'"'},n.toOther=function(t,e){return this.convertName(t)+typeof e},n.toUnknown=function(t){return(t.length>0?t+" ":" ")+"is unknown type!"},n.toArray=function(t,e,n,i){var o,r="",s="";o=e.length;for(var u=this.convertName(t,""),l=0;l<i;++l)s+=" ";r=u+"[";for(var a=0;a<o;++a)r+="\n"+(0===s.length?"":""+s)+this.indentFormat+"["+a+"]:"+this._dump(e[a],"",n,i+1);return r+="\n"+(0===s.length?"":""+s+this.halfIndentFormat)+"]"},n.toObject=function(t,e,n,i){var o="";if(null===e)return o="null";var r="";if(e instanceof Object){for(var s=0;s<i;++s)r+=" ";for(var u in o="{",e)o+="\n"+(0===r.length?"":""+r)+this.indentFormat+u+":"+this._dump(e[u],"",n,i+1);return o+="\n"+(0===r.length?"":""+r+this.halfIndentFormat)+"}"}return o="Unknown Object Type!"},n._dump=function(t,e,n,i){if(void 0===e&&(e="unkown"),i>n)return"...";e=void 0===e?"":e;var o="";switch(typeof t){case"boolean":o+=this.toBoolean("",t);break;case"number":o+=this.toNumber("",t);break;case"string":o+=this.toStringForDump("",t);break;case"object":Array.isArray(t)?o+=this.toArray(e,t,n,i):o+=this.toObject(e,t,n,i);break;case"function":case"undefined":o+=this.toOther(e,t);break;default:o+=this.toUnknown(e)}return o},e(t,[{key:"level",get:function(){return this._level},set:function(t){this._level=t,this.update()}},{key:"indentFormat",get:function(){return"    "}},{key:"halfIndentFormat",get:function(){return"   "}}]),t}()).module="【日志管理器】",n._RF.pop()}}}));

System.register("chunks:///_virtual/Macros.ts",["cc"],(function(_){var N;return{setters:[function(_){N=_.cclegacy}],execute:function(){var E,A;_("Macro",void 0),N._RF.push({},"68296wF75BBSIkdjWiIgpy1","Macros",void 0),(A=E||(E=_("Macro",{}))).BUNDLE_RESOURCES="resources",A.BUNDLE_REMOTE="Remote",A.ENABLE_CHANGE_LANGUAGE=!0,A.USING_LAN_KEY="i18n.",A.UNKNOWN="UNKNOWN",A.ON_CUSTOM_CLOSE="ON_CUSTOM_CLOSE",A.MAIN_PACK_BUNDLE_NAME="main",A.BUNDLE_HALL="hall",A.SHOW_DEBUG_INFO_KEY="SHOW_DEBUG_INFO_KEY",A.RECONNECT_ALERT_TAG="RECONNECT_ALERT_TAG",A.DYNAMIC_LOAD_GARBAGE="DYNAMIC_LOAD_GARBAGE",A.DYNAMIC_LOAD_RETAIN_MEMORY="DYNAMIC_LOAD_RETAIN_MEMORY",A.ON_UPDATE_FAILED="ON_UPDATE_FAILED",A.ON_UPDATE_DOWNLOADING="ON_UPDATE_DOWNLOADING",N._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Application.ts","./MainController.ts","./CinestaionImpulseSource.ts","./CinestationBlendDefinition.ts","./CinestationBrain.ts","./CinestationData.ts","./CinestationEasing.ts","./CinestationMath.ts","./CinestationShareAssets.ts","./CinestationSmoothPath.ts","./Effect.ts","./Effect3_4.ts","./Events.ts","./Types.ts","./Visualization.ts","./Base.ts","./IVCam.ts","./VCamAim.ts","./VCamAutoDolly.ts","./VCamBody.ts","./VCamComposer.ts","./VCamFreeLook.ts","./VCamHardLook.ts","./VCamImpulse.ts","./VCamLens.ts","./VCamNoise.ts","./VCamTracked.ts","./CameraHandler.ts","./ComposerHandler.ts","./FreeLookHandler.ts","./HardLookAtHandler.ts","./NoiseHandler.ts","./TrackedHandler.ts","./NoiseGenerator.ts","./Predictor.ts","./AimStage.ts","./BaseStage.ts","./BodyStage.ts","./ImpulseStage.ts","./NoiseStage.ts","./VirtualCamera.ts","./AudioComponent.ts","./GlobalAudio.ts","./MapComponent.ts","./Snapshot.ts","./Tips.ts","./BundleDef.ts","./Constants.ts","./EventDef.ts","./SceneDef.ts","./MarkerController.ts","./PolygonController.ts","./Test.ts","./BundleManager.ts","./CacheManager.ts","./ReleaseManager.ts","./Resource.ts","./ViewAsset.ts","./DataCenter.ts","./GameData.ts","./Config.ts","./Enums.ts","./Macros.ts","./EventComponent.ts","./EventProcessor.ts","./Logger.ts","./BitEncrypt.ts","./ByteArray.ts","./CocosUtils.ts","./Extentions.mjs_cjs=&original=.js","./LocalStorage.ts","./CanvasHelper.ts","./Platform.ts","./Singleton.ts","./SingletonT.ts","./InitData.ts","./MarkerEntity.ts","./PolygonEntity.ts","./Position.ts","./TouchTarget.ts","./AssetManager.ts","./EventManager.ts","./LayerManager.ts","./MapManager.ts","./MarkerManager.ts","./NodePoolManager.ts","./PolygonManager.ts","./UIManager.ts","./CoordinateUtils.ts","./KDTree.ts","./PlaneMeshUtil.ts","./PolygonMeshUtil.ts","./ZipLoader.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BundleDef.ts","./EventDef.ts","./InitData.ts","./TouchTarget.ts","./CoordinateUtils.ts","./ZipLoader.ts"],(function(t){var e,n,o,i,a,r,l,u,s,p,c,d,h,f,g,y,m,b,v,D,C,M,T,A,L,_,E,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){l=t.cclegacy,u=t._decorator,s=t.Node,p=t.CCFloat,c=t.geometry,d=t.input,h=t.Input,f=t.assetManager,g=t.Prefab,y=t.tween,m=t.Vec3,b=t.instantiate,v=t.PhysicsSystem,D=t.Component,C=t.settings,M=t.Settings},function(t){T=t.BundleDef},function(t){A=t.EventDef},function(t){L=t.InitData},function(t){_=t.TouchTarget},function(t){E=t.XZToLngLatDefault},function(t){w=t.default}],execute:function(){var P,S,z,N,R,x,B,I,O,U,k,F,H,X,Y;l._RF.push({},"6d213oU0JNMtIQ3F+hLFj5Y","MainController",void 0);var Z=u.ccclass,j=u.property,q=[T.MODEL,T.MAIN,T.CAMERA],V=[{bundle:T.MAIN,url:"prefab/Polygon",type:"prefab"},{bundle:T.MAIN,url:"prefab/Map",type:"prefab"},{bundle:T.MODEL,url:"prefab/factory",type:"prefab"}],G=q.length+V.length+1;t("default",(P=Z("MainController"),S=j(s),z=j({tooltip:"是否开启瓦片图",animatable:!1}),N=j({tooltip:"是否开启地形展示",animatable:!1}),R=j({tooltip:"初始经度",type:p}),x=j({tooltip:"初始纬度",type:p}),B=j({tooltip:"初始层级",type:p}),P((U=e((O=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"earth",U,i(e)),o(e,"tile",k,i(e)),o(e,"terrain",F,i(e)),o(e,"longitude",H,i(e)),o(e,"latitude",X,i(e)),o(e,"zoom",Y,i(e)),e._percent="",e._numCurrentLoaded=0,e._loadCompleted=!1,e._ray=new c.Ray,e.touchStartTime=0,e.touchStartPosition={x:0,y:0},e}n(e,t);var l=e.prototype;return l.start=function(){var t=a(r().mark((function t(){var e,n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.zipBundle=["model"],!(e=C.querySettings(M.Category.ASSETS,"server"))){t.next=7;break}return n=window.zipBundle||[],o=n.map((function(t){return w.ins.loadZip(e+"remote/"+t)})),t.next=7,Promise.all(o);case 7:return t.next=9,this.preloadBundle(0);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.update=function(t){if(!this._loadCompleted){var e=this.earth.eulerAngles.clone();e.y+=10*t,this.earth.eulerAngles=e}App.update(this.node)},l.onLoad=function(){App.onLoad(this.node)},l.onEnable=function(){d.on(h.EventType.TOUCH_START,this._onTouchStart,this),d.on(h.EventType.TOUCH_END,this._onTouchEnd,this)},l.onDisable=function(){d.off(h.EventType.TOUCH_START,this._onTouchStart,this),d.off(h.EventType.TOUCH_END,this._onTouchEnd,this)},l.onDestroy=function(){App.onDestroy(this.node),t.prototype.onDestroy.call(this)},l.preloadBundle=function(t){var e=this;f.loadBundle(q[t],null,(function(n,o){t++,e.onResLoaded(),t<q.length?e.preloadBundle(t):e.preloadRes(0)}))},l.preloadRes=function(t){var e=this,n=V[t],o=f.getBundle(n.bundle);o&&"prefab"==n.type&&o.preload(n.url,g,(function(){t++,e.onResLoaded(),t<V.length?e.preloadRes(t):e.onPreloadingComplete()}))},l.onResLoaded=function(){this._numCurrentLoaded++,this._percent=~~(this._numCurrentLoaded/G*100)+"%"},l.onPreloadingComplete=function(){var t=this;this.preLoadComplete(),setTimeout((function(){t._loadCompleted=!0,y(t.earth).to(.8,{scale:new m(18,18,18),eulerAngles:new m(0,160,0)}).call((function(){App.uiManager.get3DNode("start").active=!1,App.uiManager.get3DNode("Camera3D").active=!0,App.uiManager.get3DNode("VCam0").active=!0,App.uiManager.getUINode("ui").active=!0,App.uiManager.get3DNode("map").active=!0,App.asset.loadPrefab("prefab/factory",T.MODEL).then((function(t){var e=b(t);App.uiManager.add3DNode("model",e)})),App.uiManager.get3DNode("model").active=!0,App.uiManager.get3DNode("polygons").active=!0,dispatch(A.SCENE_LOADED)})).start()}),1e3)},l.preLoadComplete=function(){this.loadMap()},l.loadMap=function(){App.dataCenter.get(L).init(this.tile,this.terrain,this.longitude,this.latitude,this.zoom),this.tile&&App.mapManager.initMap(this.longitude,this.latitude,this.zoom,this.terrain)},l._onTouchStart=function(t){this.touchStartTime=Date.now(),this.touchStartPosition.x=t.getLocationX(),this.touchStartPosition.y=t.getLocationY()},l._onTouchEnd=function(t){var e=Date.now()-this.touchStartTime,n=Math.sqrt(Math.pow(t.getLocationX()-this.touchStartPosition.x,2)+Math.pow(t.getLocationY()-this.touchStartPosition.y,2));e<200&&n<10&&this.modelClickEvent(t)},l.modelClickEvent=function(t){if(App.uiManager.camera3d.screenPointToRay(t.getLocationX(),t.getLocationY(),this._ray),v.instance.raycast(this._ray)){var e=[],n=v.instance.raycastResults;n.sort((function(t,e){return t.distance-e.distance}));for(var o=0;o<n.length;o++){var i=n[o],a=E(i.hitPoint.x,i.hitPoint.z);e.push(new _(i.collider.node.name,{x:i.hitPoint.x,y:i.hitPoint.z,height:i.hitPoint.y},{longitude:a.x,latitude:a.y,height:i.hitPoint.y},i.distance,i.collider.node))}dispatch(A.MODEL_CLICK,e)}},e}(D)).prototype,"earth",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(O.prototype,"tile",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=e(O.prototype,"terrain",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H=e(O.prototype,"longitude",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(O.prototype,"latitude",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(O.prototype,"zoom",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=O))||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/MapComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./CoordinateUtils.ts","./KDTree.ts","./PlaneMeshUtil.ts"],(function(e){var t,r,n,i,a,o,s,l,c,u,h,p,d,m,_,f,g,C,T,Z,M,y,x,b,v,L,w,U,N,S,P,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createClass,o=e.asyncToGenerator,s=e.regeneratorRuntime,l=e.createForOfIteratorHelperLoose},function(e){c=e.cclegacy,u=e._decorator,h=e.Prefab,p=e.Material,d=e.Vec3,m=e.Component,_=e.Node,f=e.Layers,g=e.MeshRenderer,C=e.utils,T=e.MeshCollider,Z=e.instantiate,M=e.assetManager,y=e.Texture2D,x=e.Vec2},function(e){b=e.RES_URL_PREFIX},function(e){v=e.XZToLngLat,L=e.TileToTile,w=e.LngLatToTile,U=e.GetTileDistance,N=e.TileTolngLat,S=e.LngLatToXZ},function(e){P=e.KDTree},function(e){k=e.CreatePlaneMesh}],execute:function(){var D,F,E,z,R,A,Y;c._RF.push({},"b3c22jn2YZE5Ksudy6/wL7b","MapComponent",void 0);var X=u.ccclass,I=u.property;e("MapComponent",(D=X("MapComponent"),F=I(h),E=I(p),D((A=t((R=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"tilePrefab",A,i(t)),n(t,"mapMtl",Y,i(t)),t.initCenterLng=void 0,t.initCenterLat=void 0,t.initZoom=void 0,t.terrainEnabled=void 0,t.initTileXY=new Map,t.initTileCC=new Map,t.mapUrl="https://wprd0{random}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scl=1&style={style}&x={x}&y={y}&z={z}&1.jpg",t.vectorMapUrl=t.mapUrl.replace("{style}","7"),t.satelliteMapUrl=t.mapUrl.replace("{style}","6"),t.terrainUrl=b+"miniofile/zdt/terrain/{x}/{x}_{y}.csv",t.tileNumber=29,t._spiralCoords=new Map,t._loadFinishFlag=!1,t._forceStop=!1,t._currentZoom=void 0,t._lastUpdatedZoom=void 0,t._currentCenter=new d(0,1,0),t._lastUpdatedCenter=new d(0,1,0),t._currentCenterLng=void 0,t._currentCenterLat=void 0,t._currentTileNumber=t.tileNumber,t._loadedTile=new Map,t._defaultTerrainZoom=11,t._minTerrainZoom=15,t._kdTree=new Map,t._loadedTerrainFile=[],t}r(t,e);var c=t.prototype;return c.init=function(e,t,r,n){this.initCenterLng=e,this.initCenterLat=t,this.initZoom=r,this.terrainEnabled=n,this._currentZoom=r,this._lastUpdatedZoom=r,this._currentCenterLng=e,this._currentCenterLat=t,this._spiralCoords.set(r,this.generateMatrix(this._currentTileNumber).reverse()),this.initLoadMap()},c.updateMap=function(e){if(!e.equals(this._currentCenter)){this._currentCenter=e,this._forceStop=!0;var t=v(this.initCenterLng,this.initCenterLat,this._currentCenter.x,this._currentCenter.z);if(this._currentCenterLng=t.x,this._currentCenterLat=t.y,this._currentCenter.y!=this._lastUpdatedCenter.y)if(this._currentCenter.y>1){var r=Math.max(this._currentCenter.y,1)/Math.min(this._currentCenter.y,1),n=this.calculatePower(r),i=Math.floor(Math.abs(n)),a=Math.abs(n)-i;this._currentZoom=Math.max(this.initZoom-i,10),this._currentCenter.y>=this._lastUpdatedCenter.y&&(this._currentTileNumber=this.tileNumber+2*Math.floor(a/2*10)),(!this._spiralCoords.get(this._currentZoom)||this._currentCenter.y>=this._lastUpdatedCenter.y)&&this._spiralCoords.set(this._currentZoom,this.generateMatrix(this._currentTileNumber).reverse())}else this._currentZoom=this.initZoom,this._currentTileNumber=this.tileNumber;this.loadTile(),this._lastUpdatedCenter.x=this._currentCenter.x,this._lastUpdatedCenter.y=this._currentCenter.y,this._lastUpdatedCenter.z=this._currentCenter.z}},c.calculatePower=function(e){return Math.log(e)/Math.log(1.9)},c.initLoadMap=function(){this.loadTile()},c.update=function(e){},c.loadTile=function(){var e=o(s().mark((function e(){var t,r,n,i,a,o,c,u,h,p,m,b,v,D,F,E,z,R,A,Y=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._loadFinishFlag=!1,App.uiManager.get3DNode("map/"+this._currentZoom)||((t=new _).layer=f.Enum.DEFAULT,t.name=this._currentZoom.toString(),App.uiManager.add3DNode("map",t)),r=w(this._currentCenterLng,this._currentCenterLat,this._currentZoom),this.initTileXY.get(this._currentZoom)||this.initTileXY.set(this._currentZoom,r),n=U(this._currentZoom),this.initTileCC.get(this._currentZoom)?i=new x(this.initTileCC.get(this._currentZoom).x+(r.x-this.initTileXY.get(this._currentZoom).x)*n,this.initTileCC.get(this._currentZoom).y+(r.y-this.initTileXY.get(this._currentZoom).y)*n):(a=N(r.x,r.y,this._currentZoom),(i=S(this.initCenterLng,this.initCenterLat,a.x,a.y)).x=i.x+n/2,i.y=i.y+n/2,this.initTileCC.set(this._currentZoom,i)),o=this._spiralCoords.get(this._currentZoom),(c=this._loadedTile.get(this._currentZoom))?o=o.filter((function(e){return-1===c.indexOf(Number(r.x+e[0])+"_"+Number(r.y+e[1]))})):c=[],u=[],!(this.terrainEnabled&&this._currentZoom>=this._minTerrainZoom)){e.next=27;break}h=(this._currentTileNumber-1)/2,p=[r.x-h,r.y+h],m=[r.x+h,r.y-h],b=L(p[0],p[1],this._currentZoom,this._defaultTerrainZoom),v=L(m[0],m[1],this._currentZoom,this._defaultTerrainZoom),D=s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=s().mark((function e(r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===Y._loadedTerrainFile.indexOf(t+"_"+r)){e.next=2;break}return e.abrupt("return",1);case 2:n=new Promise((function(e,n){M.loadRemote(Y.getTerrainUrl(t,r),{ext:".txt"},(function(i,a){if(i)n(i);else{var o=[];a.text.split("\r\n").forEach((function(e){var t=e.split(","),r=S(Y.initCenterLng,Y.initCenterLat,Number(t[0]),Number(t[1]));o.push([r.x,r.y,Number(t[2])])})),Y._kdTree.set(t+"_"+r,new P(o)),Y._loadedTerrainFile.push(t+"_"+r),e(1)}}))})),u.push(n);case 4:case"end":return e.stop()}}),e)})),n=v[1];case 2:if(!(n<=b[1])){e.next=9;break}return e.delegateYield(r(n),"t0",4);case 4:if(!e.t0){e.next=6;break}return e.abrupt("continue",6);case 6:n++,e.next=2;break;case 9:case"end":return e.stop()}}),e)})),F=b[0];case 18:if(!(F<=v[0])){e.next=23;break}return e.delegateYield(D(F),"t0",20);case 20:F++,e.next=18;break;case 23:if(0==u.length){e.next=27;break}return e.next=26,Promise.all(u).catch((function(e){}));case 26:case 27:this._lastUpdatedZoom!=this._currentZoom&&(E=this._lastUpdatedZoom,setTimeout((function(){App.uiManager.get3DNode("map/"+E).active=!1,App.uiManager.get3DNode("map/"+E).destroyAllChildren(),Y._loadedTile.delete(E)}),500),App.uiManager.get3DNode("map/"+this._currentZoom).active=!0),u=[],z=s().mark((function e(){var t,a,o,l,h,p,m,x,b,v,w,U,N;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=A.value,a=r.x+t[0],o=r.y+t[1],l=i.x+t[0]*n,h=i.y+t[1]*n,Y.terrainEnabled&&Y._currentZoom>=Y._minTerrainZoom?((p=new _).layer=f.Enum.DEFAULT,m=p.addComponent(g),x=18==Y._currentZoom?2:3*(18-Y._currentZoom),b=L(a,o,Y._currentZoom,Y._defaultTerrainZoom),v=k({width:n,length:n,widthSegments:x,lengthSegments:x},l,h,Y._kdTree.get(b[0]+"_"+b[1])),w=C.MeshUtils.createMesh(v),m.mesh=w,m.material=Y.mapMtl,(U=p.addComponent(T)).convex=!0,U.mesh=w,p.setPosition(new d(l,0,h))):((p=Z(Y.tilePrefab)).setPosition(new d(l,0,h)),p.setScale(new d(n/10,1,n/10))),p.name=Y._currentZoom+"_"+a+"_"+o,N=new Promise((function(e,t){M.loadRemote(Y.getMapUrl(1,a,o,Y._currentZoom),(function(r,n){if(Y._forceStop)t("手动中断");else if(r)t(r);else{var i=new y;i.image=n,i.setWrapMode(y.WrapMode.CLAMP_TO_EDGE,y.WrapMode.CLAMP_TO_EDGE),p.getComponent(g).material.setProperty("albedoMap",i),App.uiManager.add3DNode("map/"+Y._currentZoom,p),c.push(a+"_"+o),e(1)}}))})),u.push(N);case 9:case"end":return e.stop()}}),e)})),R=l(o);case 31:if((A=R()).done){e.next=35;break}return e.delegateYield(z(),"t1",33);case 33:e.next=31;break;case 35:0==u.length?(this._loadFinishFlag=!0,this._lastUpdatedZoom=this._currentZoom):Promise.all(u).then((function(){Y._loadFinishFlag=!0,Y._loadedTile.set(Y._currentZoom,c),Y._lastUpdatedZoom=Y._currentZoom})).catch((function(e){Y._loadFinishFlag=!0,Y._loadedTile.set(Y._currentZoom,c),Y._lastUpdatedZoom=Y._currentZoom,Y._forceStop=!1}));case 36:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.spiralOrder=function(e){for(var t=[],r=0,n=0,i=0,a=-1,o=e*e,s=0;s<o;s++){if(-e/2<=r&&r<=e/2&&-e/2<=n&&n<=e/2&&t.push([r,n]),r==n||r<0&&r==-n||r>0&&r==1-n){var l=[-a,i];i=l[0],a=l[1]}r+=i,n+=a}return t},c.generateMatrix=function(e){if(e%2==0)throw new Error("n必须是单数");for(var t=(e-1)/2,r=[],n=0;n<=t;n++){for(var i=-n;i<=n;i++)r.push([i,n]);for(var a=n-1;a>=-n;a--)r.push([n,a]);for(var o=n-1;o>=-n;o--)r.push([o,-n]);for(var s=1-n;s<n;s++)r.push([-n,s])}return r},c.getMapUrl=function(e,t,r,n){return 1===e?this.satelliteMapUrl.replace("{random}",this.getRandomInt(1,4).toString()).replace("{x}",t.toString()).replace("{y}",r.toString()).replace("{z}",n.toString()):2===e?this.vectorMapUrl.replace("{random}",this.getRandomInt(1,4).toString()).replace("{x}",t.toString()).replace("{y}",r.toString()).replace("{z}",n.toString()):void 0},c.getTerrainUrl=function(e,t){return this.terrainUrl.replace("{random}",this.getRandomInt(1,4).toString()).replace("{x}",e.toString()).replace("{x}",e.toString()).replace("{y}",t.toString())},c.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},c.onDisable=function(){},c.onDestroy=function(){},a(t,[{key:"currentCenter",get:function(){return this._currentCenter}}]),t}(m)).prototype,"tilePrefab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(R.prototype,"mapMtl",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=R))||z));c._RF.pop()}}}));

System.register("chunks:///_virtual/MapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapComponent.ts","./InitData.ts"],(function(t){var e,n,i,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){i=t.MapComponent},function(t){a=t.InitData}],execute:function(){n._RF.push({},"f1d49KuCvBA9rA+d2uUr0QU","MapManager",void 0),t("MapManager",function(){function t(){this.isResident=void 0,this.module=void 0,this._canvas=null,this.timer=void 0}var n=t.prototype;return n.onLoad=function(t){this._canvas=t},n.onDestroy=function(t){},n.delete=function(){},n.initMap=function(t,e,n,a){App.uiManager.get3DNode("map").getComponent(i).init(t,e,n,a)},n.updateTileMap=function(t){var e=this;App.dataCenter.get(a).tile&&(t.equals(App.uiManager.get3DNode("map").getComponent(i).currentCenter)||(this.timer?(clearTimeout(this.timer),this.timer=setTimeout((function(){App.uiManager.get3DNode("map").getComponent(i).updateMap(t),e.timer=null}),500)):this.timer=setTimeout((function(){App.uiManager.get3DNode("map").getComponent(i).updateMap(t),e.timer=null}),500)))},e(t,[{key:"canvas",get:function(){return this._canvas}}]),t}()).module="【Map管理器】",n._RF.pop()}}}));

System.register("chunks:///_virtual/MarkerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CoordinateUtils.ts"],(function(o){var t,e,n,i,r,a,s,c,d,h,p,f,l,u,m,_,w,x;return{setters:[function(o){t=o.inheritsLoose,e=o.createClass},function(o){n=o.cclegacy,i=o._decorator,r=o.v3,a=o.Vec3,s=o.UITransform,c=o.math,d=o.Vec2,h=o.Sprite,p=o.NodeEventType,f=o.Node,l=o.Layers,u=o.Label,m=o.CacheMode,_=o.tween,w=o.Component},function(o){x=o.TransformCoord}],execute:function(){var v;n._RF.push({},"a3683VJ+pdE6KGiKU/O7AmN","MarkerController",void 0);var k=i.ccclass;i.property,o("MarkerController",k("MarkerController")(v=function(o){function n(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(t=o.call.apply(o,[this].concat(n))||this)._worldPos=void 0,t._markerInfo=void 0,t._markerTextNode=void 0,t}t(n,o);var i=n.prototype;return i.updatePosition=function(){var o=r();App.uiManager.camera3d.convertToUINode(this._worldPos,this.node.parent,o),this.node.setPosition(o),this._markerTextNode&&this._markerTextNode.setPosition(o.x+this._markerInfo.text.offset.x,o.y+this._markerInfo.text.offset.y,o.z)},i.init=function(o,t){x(o.position);var e=new a(o.position.x,o.position.height,o.position.y);if(o.icon.path){var n=this.node.addComponent(s);n.contentSize=new c.Size(o.icon.size.width,o.icon.size.height),n.anchorPoint=new d(o.anchors.x,o.anchors.y);var i=this.node.addComponent(h);i.sizeMode=h.SizeMode.CUSTOM,App.asset.loadRemoteImage(i,{url:o.icon.path}),this.node.on(p.TOUCH_END,t)}if(o.text.content){var r=new f;r.layer=l.Enum.UI_2D,r.name=o.id,r.addComponent(s).anchorPoint=new d(o.anchors.x,o.anchors.y);var _=r.addComponent(u);_.string=o.text.content,_.fontSize=o.text.fontSize,_.lineHeight=o.text.fontSize,_.color=_.color.fromHEX(o.text.fontColor),_.cacheMode=m.CHAR,o.icon.path||r.on(p.TOUCH_END,t),App.uiManager.addUINode("markerTexts",r),this._markerTextNode=r}this._worldPos=e,this._markerInfo=o},i.updateMarker=function(o){if(o.position){x(o.position);var t=new a(o.position.x,o.position.height,o.position.y);t.equals(this._worldPos)||(o.tween?this.updatePosTween(t,o.tweenTime):this.updatePos(t))}var e=this._markerTextNode.getComponent(u);e.string=o.text.content,e.fontSize=o.text.fontSize,e.lineHeight=o.text.fontSize,e.color=e.color.fromHEX(o.text.fontColor);var n=this.node.getComponent(s);if(n.contentSize=new c.Size(o.icon.size.width,o.icon.size.height),n.anchorPoint=new d(o.anchors.x,o.anchors.y),o.icon&&o.icon.path!=this._markerInfo.icon.path){var i=this.node.getComponent(h);App.asset.loadRemoteImage(i,{url:o.icon.path})}this._markerInfo=o},i.updatePos=function(o){this._worldPos=o},i.updatePosTween=function(o,t){var e=this;_(this._worldPos).to(t,o,{onUpdate:function(o,t){e._worldPos=o}}).start()},i.start=function(){},i.update=function(o){this.updatePosition()},e(n,[{key:"worldPos",get:function(){return this._worldPos}},{key:"markerInfo",get:function(){return this._markerInfo}}]),n}(w))||v);n._RF.pop()}}}));

System.register("chunks:///_virtual/MarkerEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts"],(function(t){var i,s,n;return{setters:[function(t){i=t.extends},function(t){s=t.cclegacy},function(t){n=t.DEFAULT_GROUP}],execute:function(){s._RF.push({},"cbfb2Bt9P1O/K172cB+x/qh","MarkerEntity",void 0);t("MarkerEntity",(function(t){var s,h,r;this.id=void 0,this.groupId=n,this.userData=void 0,this.text=new o,this.icon=new e,this.position=void 0,this.anchors={x:.5,y:.5},this.tween=!0,this.tweenTime=1,this.id=t.id,this.groupId=null!=(s=t.groupId)?s:this.groupId,this.userData=t.userData,this.text=i({},this.text,t.text),this.icon=i({},this.icon,t.icon),this.position=t.position,this.anchors=null!=(h=t.anchors)?h:this.anchors,this.tween=null!=(r=t.tween)?r:this.tween}));var e=function(){this.path=void 0,this.size={width:15,height:15}},o=function(){this.content=void 0,this.fontColor="#FFFFFFFF",this.fontSize=15,this.offset={x:0,y:-15}};s._RF.pop()}}}));

System.register("chunks:///_virtual/MarkerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./MarkerController.ts","./MarkerEntity.ts"],(function(e){var n,t,r,a,i,o,s;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,r=e.Node,a=e.Layers},function(e){i=e.DEFAULT_GROUP},function(e){o=e.MarkerController},function(e){s=e.MarkerEntity}],execute:function(){t._RF.push({},"c22adj1uEJNRofGbFk7rUS5","MarkerManager",void 0),e("MarkerManager",function(){function e(){this.isResident=void 0,this.module=void 0,this._canvas=null,this.markers=new Map,this.markerEntitys=new Map}var t=e.prototype;return t.onLoad=function(e){this._canvas=e},t.onDestroy=function(e){},t.add=function(e,n){var t=this;return e=new s(e),new Promise((function(i,s){if(t.markers.has(e.groupId+"#"+e.id))s(!1);else if(e.icon||e.text)if(e.position&&e.position.x&&e.position.y){var u=new r;if(u.layer=a.Enum.UI_2D,u.name=e.id,u.addComponent(o),u.getComponent(o).init(e,n),!App.uiManager.getUINode("markerIcons/"+e.groupId)){var c=new r;c.layer=a.Enum.UI_2D,c.name=e.groupId,App.uiManager.addUINode("markerIcons",c),App.uiManager.addUINode("markerTexts",c)}e.icon?App.uiManager.addUINode("markerIcons",u):App.uiManager.addUINode("markerTexts",u),t.markers.set(e.groupId+"#"+e.id,u),t.markerEntitys.set(e.groupId+"#"+e.id,e),i(!0)}else s(!1);else s(!1)}))},t.update=function(e){var n=this;return new Promise((function(t,r){var a,s=null!=(a=e.groupId)?a:i+"#"+e.id,u=n.markers.get(s);if(u){var c=n.markerEntitys.get(s);(e=Object.assign({},c,e)).position=Object.assign({},c.position,e.position),e.text=Object.assign({},c.text,e.text),e.icon=Object.assign({},c.icon,e.icon),u.getComponent(o).updateMarker(e),n.markerEntitys.set(s,e),t(!0)}else r(!1)}))},t.getMarkerInfo=function(e){e=new s(e);var n=this.markerEntitys.get(e.groupId+"#"+e.id);return n||null},t.delete=function(){},n(e,[{key:"canvas",get:function(){return this._canvas}}]),e}()).module="【Marker管理器】",t._RF.pop()}}}));

System.register("chunks:///_virtual/NodePoolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Macros.ts"],(function(o){var t,e,n,s,i;return{setters:[function(o){t=o.createClass},function(o){e=o.cclegacy,n=o.isValid,s=o.instantiate},function(o){i=o.Macro}],execute:function(){e._RF.push({},"12ca1FkxhVLNJxy6qF90FJt","NodePoolManager",void 0);var l=o("NodePool",function(){function o(o){this.name=i.UNKNOWN,this.pool=[],this.node=null,this.name=o}var e=o.prototype;return e.clear=function(){for(var o=this.pool.length,t=0;t<o;++t)this.pool[t].destroy();this.pool=[],this.node&&n(this.node)&&this.node.destroy(),this.node=null},e.put=function(o){o&&-1===this.pool.indexOf(o)&&(o.removeFromParent(),this.pool.push(o))},e.get=function(){if(this.pool.length<=0)return this.node?s(this.node):null;var o=this.pool.length-1,t=this.pool[o];return this.pool.length=o,t},t(o,[{key:"cloneNode",get:function(){return this.node},set:function(o){o&&n(o)&&(this.node=o,this.node.removeFromParent())}},{key:"size",get:function(){return this.pool.length}}]),o}());o("NodePoolManager",function(){function o(){this.module=null,this.pools=new Map}var t=o.prototype;return t.createPool=function(o){return this.pools.has(o)||this.pools.set(o,new l(o)),this.pools.get(o)},t.deletePool=function(o){if("string"==typeof o){if(this.pools.has(o)){var t=this.pools.get(o);t&&t.clear(),this.pools.delete(o)}}else o&&o instanceof l&&this.deletePool(o.name)},t.getPool=function(o,t){return void 0===t&&(t=!0),this.pools.has(o)?this.pools.get(o):t?this.createPool(o):null},t.debug=function(){Log.d("-------对象池节点缓存信息-------"),this.pools.forEach((function(o,t){Log.d(t)}))},o}()).module="【对象池】",e._RF.pop()}}}));

System.register("chunks:///_virtual/NoiseGenerator.ts",["cc","./CinestationMath.ts"],(function(e){var t,n,o,i,r;return{setters:[function(e){t=e.cclegacy,n=e.Quat,o=e.Vec3,i=e.lerp},function(e){r=e.Perlin}],execute:function(){t._RF.push({},"a9712kPMtFAn4hVb+NyrLxd","NoiseGenerator",void 0);var a=Math.cos,s=2*Math.PI,l=[[[.1,7,0,.75,3,0,1.2,1,0],[.15,4,0,.8,1,0,1.4,.8,0],[0,0,0,0,0,0,0,0,0]],[[5.83,.09,1,9.17,.14,1,57.17,.15,1],[1.8,.059,1,11.35,.041,1,54.17,.048,1],[2.38,.017,1,10.52,.009,1,63.76,.016,1],[3.2,.011,1,7.7,.009,1,51.51,.002,1],[1.9,.059,1,9.1,.04,0,55.54,.05,1],[3.33,.021,1,9.22,.009,1,58.55,.017,1]],[[.2,15,0,.9,5,0,2,2,0],[.25,7,0,1,3,0,0,1,0],[0,0,0,0,0,0,0,0,0]],[[.15,7,0,.8,4,0,1.2,1,0],[.1,5,0,.75,2,0,1.5,.8,0],[0,0,0,0,0,0,0,0,0]],[[.4,10,0,1.44,5,0,2.49,3,0],[.06,10,0,.73,3,0,2,1,0],[0,0,0,0,0,0,0,0,0]],[[.2,4,0,.4,2,0,.7,1,0],[.15,2,0,.5,2,0,.6,1,0],[0,0,0,0,0,0,0,0,0]],[[.39,6.19,0,1.75,1.84,0,2,2.3,0],[.15,3,0,.9,.5,0,1.4,.5,0],[.1,1,0,0,0,0,0,0,0]],[[.15,12,0,.6,5,0,1.5,1,0],[.1,5,0,.45,4,0,1.2,1,0],[0,0,0,0,0,0,0,0,0]],[[.5,17.46,0,.94,12.47,0,1.2,4,0],[.25,5,0,.5,4,0,1.3,2,0],[.1,0,0,.4,1,0,0,0,0]]],d=(e("NoiseProfile",function(e){return e[e.Noise_CM_4=0]="Noise_CM_4",e[e.Shake_6D=1]="Shake_6D",e[e.Handheld_normal_extreme=2]="Handheld_normal_extreme",e[e.Handheld_normal_mild=3]="Handheld_normal_mild",e[e.Handheld_normal_strong=4]="Handheld_normal_strong",e[e.Handheld_tele_mild=5]="Handheld_tele_mild",e[e.Handheld_tele_strong=6]="Handheld_tele_strong",e[e.Handheld_wideangle_mild=7]="Handheld_wideangle_mild",e[e.Handheld_wideangle_strong=8]="Handheld_wideangle_strong",e}({})),new n),_=new o;e("NoiseGenerator",function(){function e(){this._time=0,this._values=[0,0,0,0,0,0],this._noiseOffsets=[0,0,0]}var t=e.prototype;return t.reset=function(){var e=this;this._time=0,this._noiseOffsets.forEach((function(t,n){return e._noiseOffsets[n]=i(-1e3,1e3,Math.random())}))},t.fractalNoise=function(t,n){for(var o=this._time+=n*t.frequncyGain,i=l[t.profile]||l[0],r=this._values.fill(0),a=this._noiseOffsets,s=0;s<i.length;s++){var d=i[s];r[s]=e.Noise(o,d[0],d[1],d[2],a[0])+e.Noise(o,d[3],d[4],d[5],a[1])+e.Noise(o,d[6],d[7],d[8],a[2]),r[s]*=t.amplitudeGain}return r},e.Noise=function(e,t,n,o,i){return void 0===i&&(i=0),o?.5*a(s*e*t+i)*n:r.Noise(e*t+i)*n},e.ApplyNoise=function(e,t){n.fromEuler(d,e[0],e[1],e[2]),o.set(_,e[3],e[4],e[5]),o.transformQuat(_,_,t.node.worldRotation),n.multiply(t.correctRotation,t.correctRotation,d),o.add(t.correctPosition,t.correctPosition,_)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/NoiseHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NoiseGenerator.ts","./CameraHandler.ts"],(function(e){var n,r,t,o;return{setters:[function(e){n=e.inheritsLoose},function(e){r=e.cclegacy},function(e){t=e.NoiseGenerator},function(e){o=e.CameraHandler}],execute:function(){r._RF.push({},"234f6/VZgVMyacF6RrkJGqf","NoiseHandler",void 0);e("NoiseHandler",function(e){function r(){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=e.call.apply(e,[this].concat(o))||this)._generator=new t,n}n(r,e);var o=r.prototype;return o.onEnable=function(){this._generator.reset()},o.updateCamera=function(e){var n=this._vcam,r=this._generator.fractalNoise(n.noise,e);t.ApplyNoise(r,n)},r}(o));r._RF.pop()}}}));

System.register("chunks:///_virtual/NoiseStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraHandler.ts","./NoiseHandler.ts","./BaseStage.ts"],(function(e){var n,t,a,r,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){a=e.CameraHandler},function(e){r=e.NoiseHandler},function(e){o=e.BaseStage}],execute:function(){t._RF.push({},"cd934Nc2W5OwIr9P+a9q+so","NoiseStage",void 0);e("NoiseStage",function(e){function t(){for(var n,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return(n=e.call.apply(e,[this].concat(o))||this)._handlers=[new a(n._vcam),new r(n._vcam)],n}n(t,e);var o=t.prototype;return o.onEnable=function(){this._handlers.forEach((function(e){return e.enable=!0}))},o.updateStage=function(e){var n=this._vcam.noise,t=this._handlers[n.type];t&&t.updateCamera(e)},t}(o));t._RF.pop()}}}));

System.register("chunks:///_virtual/PlaneMeshUtil.ts",["cc"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy,t=e.Vec3}],execute:function(){e("CreatePlaneMesh",(function(e,n,g,l){(e=e||{}).width=e.width||10,e.length=e.length||10,e.widthSegments=e.widthSegments||10,e.lengthSegments=e.lengthSegments||10;var w=e,c=w.width,d=w.length,y=w.widthSegments,v=w.lengthSegments,p=.5*c,f=.5*d,m=[],S=[],P=[],b=new t(-p,0,-f),x=new t(p,0,f),M=Math.sqrt(c*c+d*d);t.set(a,-p,0,f),t.set(u,p,0,f),t.set(o,-p,0,-f);for(var z=0;z<=v;z++)for(var F=0;F<=y;F++){var R=F/y,_=z/v;if(t.lerp(s,a,u,R),t.lerp(r,a,o,_),t.subtract(h,r,a),t.add(i,s,h),l&&(i.y=l.nearestNeighbor([n+i.x,g+i.z]).point[2]),b.y=i.y<0?i.y:b.y,x.y=i.y>0?i.y:x.y,m.push(i.x,i.y,i.z),S.push(R,1-_),F<y&&z<v){var U=y+1,k=F+z*U,q=F+(z+1)*U,A=F+1+(z+1)*U,C=F+1+z*U;P.push(k,C,q),P.push(C,A,q)}}var D={positions:m,indices:P,minPos:b,maxPos:x,boundingRadius:M},H=(v+1)*(y+1),I=new Array(3*H);D.normals=I;for(var J=0;J<H;++J)I[3*J+0]=0,I[3*J+1]=1,I[3*J+2]=0;return D.uvs=S,D})),n._RF.push({},"c5f9b0DhhFJI5OfznsHdr55","PlaneMeshUtil",void 0);var s=new t(0,0,0),r=new t(0,0,0),h=new t(0,0,0),i=new t(0,0,0),a=new t(0,0,0),u=new t(0,0,0),o=new t(0,0,0);n._RF.pop()}}}));

System.register("chunks:///_virtual/Platform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Snapshot.ts"],(function(t){var e,s,n,o,r,i;return{setters:[function(t){e=t.createClass},function(t){s=t.cclegacy,n=t.sys,o=t.native,r=t.isValid},function(t){i=t.Snapshot}],execute:function(){s._RF.push({},"109c6h+RH5MjYuMXQHALUYk","Platform",void 0),t("Platform",function(){function t(){this.module=null,this._screenshotsPath=null}var s=t.prototype;return s.openURL=function(t){n.openURL(t)},s.copyText=function(t){o.copyTextToClipboard(t)},s.getNetworkType=function(){return n.getNetworkType()},s.getBatteryLevel=function(){return n.getBatteryLevel()},s.snapshot=function(t,e){if(r(t)){var s=t.addComponent(i);s.onCaptureComplete=e}},e(t,[{key:"screenshotsPath",get:function(){return this._screenshotsPath||n.isNative&&(this._screenshotsPath=o.fileUtils.getWritablePath()+"Screenshots",o.fileUtils.isDirectoryExist(this._screenshotsPath)||o.fileUtils.createDirectory(this._screenshotsPath)),this._screenshotsPath}}]),t}()).module="【平台管理器】",s._RF.pop()}}}));

System.register("chunks:///_virtual/PolygonController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,n,e,r,l,i,s;return{setters:[function(o){t=o.inheritsLoose,n=o.createClass},function(o){e=o.cclegacy,r=o._decorator,l=o.MeshRenderer,i=o.Color,s=o.Component}],execute:function(){var c;e._RF.push({},"63e56pzFGZIV6S5TWS4xlXM","PolygonController",void 0);var u=r.ccclass;r.property,o("PolygonController",u("PolygonController")(c=function(o){function e(){return o.apply(this,arguments)||this}t(e,o);var r=e.prototype;return r.init=function(o){this.node.getComponent(l).material.setProperty("mainColor",new i(o.color))},r.start=function(){},r.update=function(o){},n(e,[{key:"worldPos",get:function(){return this.node.position}}]),e}(s))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/PolygonEntity.ts",["cc","./Constants.ts"],(function(t){var i,o;return{setters:[function(t){i=t.cclegacy},function(t){o=t.DEFAULT_GROUP}],execute:function(){i._RF.push({},"d6857z4OKVACYGcRllHPyqG","PolygonEntity",void 0);t("PolygonEntity",(function(t){var i,s,h,l;this.id=void 0,this.groupId=o,this.userData=void 0,this.points=void 0,this.color="#E62F1F78",this.height=void 0,this.topVisiable=!1,this.bottomVisiable=!1,this.id=t.id,this.groupId=null!=(i=t.groupId)?i:this.groupId,this.userData=t.userData,this.points=t.points,this.color=null!=(s=t.color)?s:this.color,this.height=t.height,this.topVisiable=null!=(h=t.topVisiable)?h:this.topVisiable,this.bottomVisiable=null!=(l=t.bottomVisiable)?l:this.bottomVisiable}));i._RF.pop()}}}));

System.register("chunks:///_virtual/PolygonManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BundleDef.ts","./PolygonController.ts","./PolygonEntity.ts","./PolygonMeshUtil.ts"],(function(n){var o,t,e,i,s,l,r,a,u,g;return{setters:[function(n){o=n.createClass},function(n){t=n.cclegacy,e=n.instantiate,i=n.MeshRenderer,s=n.Vec3,l=n.utils},function(n){r=n.BundleDef},function(n){a=n.PolygonController},function(n){u=n.PolygonEntity},function(n){g=n.PolygonalPrism}],execute:function(){t._RF.push({},"0ef80tRckxKI4WCxd51KG/1","PolygonManager",void 0),n("PolygonManager",function(){function n(){this.isResident=void 0,this.module=void 0,this._canvas=null,this.polygons=new Map,this.polygonEntitys=new Map}var t=n.prototype;return t.onLoad=function(n){this._canvas=n},t.onDestroy=function(n){},t.add=function(n){var o=this;return n=new u(n),new Promise((function(t,u){o.polygons.has(n.groupId+"#"+n.id)||!n.points||n.points.length<3||!n.height?u(!1):App.asset.loadPrefab("prefab/Polygon",r.MAIN).then((function(r){var u=e(r),c=u.getComponent(i),p=n.points.map((function(n){return new s(n.x||0,n.height||0,n.y||0)})),y=g({bottomVertices:p,height:n.height}),d=l.MeshUtils.createMesh(y);c.mesh=d,u.name=n.id,u.addComponent(a),u.getComponent(a).init(n),App.uiManager.add3DNode("polygons",u),o.polygons.set(n.groupId+"#"+n.id,u),o.polygonEntitys.set(n.groupId+"#"+n.id,n),t(!0)}))}))},t.delete=function(){},t.getPolygonInfo=function(n){var o=this.polygons.get(n);return o||null},o(n,[{key:"canvas",get:function(){return this._canvas}}]),n}()).module="【Polygon管理器】",t._RF.pop()}}}));

System.register("chunks:///_virtual/PolygonMeshUtil.ts",["cc"],(function(t){var n,r;return{setters:[function(t){n=t.cclegacy,r=t.Vec3}],execute:function(){t("PolygonalPrism",(function(t){for(var n=(t=t||{}).bottomVertices||[],u=t.height||1,a=[],s=[],h=[],e=[],o=n.map((function(t){return new r(t.x,t.y+u,t.z)})),p=function(t,n,r,u,a){return[(t.x-n)/u,(t.z-r)/a]},i=Math.min.apply(Math,n.map((function(t){return t.x}))),c=Math.max.apply(Math,n.map((function(t){return t.x}))),l=Math.min.apply(Math,n.map((function(t){return t.z}))),m=Math.max.apply(Math,n.map((function(t){return t.z}))),f=c-i,y=m-l,v=0;v<n.length;++v){var g=n[v];a.push(g.x,g.y,g.z),s.push(0,-1,0);var x=p(g,i,l,f,y);h.push(x[0],x[1])}for(var z=0;z<o.length;++z){var M=o[z];a.push(M.x,M.y,M.z),s.push(0,1,0);var b=p(M,i,l,f,y);h.push(b[0],b[1])}var w=n.length;if(t.bottomVisiable)for(var P=1;P<n.length-1;++P)e.push(0,P+1,P);if(t.topVisiable)for(var V=1;V<o.length-1;++V)e.push(w,w+V,w+V+1);for(var d=0;d<n.length;++d){var R=(d+1)%n.length;a.push(n[d].x,n[d].y,n[d].z),a.push(n[R].x,n[R].y,n[R].z),a.push(o[R].x,o[R].y,o[R].z),a.push(o[d].x,o[d].y,o[d].z);for(var _=r.subtract(new r,n[R],n[d]),F=r.subtract(new r,o[d],n[d]),U=r.cross(new r,_,F).normalize(),k=0;k<4;++k)s.push(U.x,U.y,U.z);h.push(1,1),h.push(0,1),h.push(0,0),h.push(1,0);var q=a.length/3-4;e.push(q,q+2,q+1),e.push(q,q+3,q+2)}return{positions:a,normals:s,uvs:h,indices:e,minPos:new r(i,0,l),maxPos:new r(c,u,m),boundingRadius:Math.sqrt(f*f+y*y)/2}})),n._RF.push({},"c3563+Vyb9ChYzKmm+775TH","PolygonMeshUtil",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/Position.ts",["cc","./Constants.ts"],(function(t){var i,n;return{setters:[function(t){i=t.cclegacy},function(t){n=t.CoordEnum}],execute:function(){i._RF.push({},"abd23TpnbJH1KqFZYLQZ5aF","Position",void 0);t("Position",(function(){this.x=void 0,this.y=void 0,this.height=0,this.type=n.CC}));i._RF.pop()}}}));

System.register("chunks:///_virtual/Predictor.ts",["cc","./CinestationMath.ts"],(function(t){var i,e,n;return{setters:[function(t){i=t.cclegacy,e=t.Vec3},function(t){n=t.Vec3_smoothDamp}],execute:function(){i._RF.push({},"ae545zpGhRL56jHxziPxtwQ","Predictor",void 0);var o=new e;t("Predictor",function(){function t(){this._prePos=null,this._velocity=new e,this._dampingVelocity=new e}return t.prototype.predictPosition=function(t,i,s,c,r){return null===this._prePos?(this._prePos=new e(i),t.set(i)):(e.subtract(this._velocity,i,this._prePos).multiplyScalar(1/r),n(this._dampingVelocity,this._dampingVelocity,this._velocity,s,r),this._prePos.set(i),e.multiplyScalar(o,this._dampingVelocity,c),e.add(t,i,o)),t},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ReleaseManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Macros.ts","./Resource.ts"],(function(e){var t,s,a,n,o,i,u,l,r,d,c,h,f,g,m;return{setters:[function(e){t=e.createClass},function(e){s=e.cclegacy,a=e.assetManager,n=e.SpriteFrame,o=e.Texture2D,i=e.sp,u=e.JsonAsset,l=e.TextAsset,r=e.Asset,d=e.tween,c=e.Tween,h=e.isValid,f=e.Prefab},function(e){g=e.Macro},function(e){m=e.Resource}],execute:function(){s._RF.push({},"45146GQW6JMDp4ZdT+xJtXQ","ReleaseManager",void 0);var p="【释放管理器】",y=function(){function e(e){this.name="",this._caches=new Map,this.name=e}var s=e.prototype;return s.add=function(e){if(Array.isArray(e.data)){e.refCount++,Log.d("【释放管理器】向"+this.name+"加入待释放目录:"+e.key);for(var t=0;t<e.data.length;t++)e.data[t]&&e.data[t].addRef()}else e.data&&(Log.d("【释放管理器】向"+this.name+"加入待释放资源:"+e.key),e.data.addRef());e.stamp=Date.timeNow(),this._caches.set(e.key,e)},s.get=function(e){var t=this._caches.get(e);if(t){if(Array.isArray(t.data)){for(var s=0;s<t.data.length;s++)t.data[s]&&t.data[s].decRef(!1);return Log.d("【释放管理器】向"+this.name+"获取待释放目录:"+t.key),this._caches.delete(e),t}return h(t.data)?(t.data.decRef(!1),Log.d("【释放管理器】向"+this.name+"获取待释放资源:"+t.key),this._caches.delete(e),t):(Log.w("【释放管理器】向"+this.name+"获取待释放资源时，资源"+t.key+"已经释放"),this._caches.delete(e),null)}return null},s.toRelease=function(e){if(this.name==g.BUNDLE_REMOTE)return e.data instanceof r&&(Log.d("【释放管理器】bundle : "+this.name+" 释放远程加载资源"+e.url),a.releaseAsset(e.data)),void this._caches.delete(e.key);var t=App.bundleManager.getBundle(e.bundle);this.release(e,t),this._caches.delete(e.key)},s.toReleasePrefab=function(e){Array.isArray(e.data)?e.type==f&&this.toRelease(e):e.data instanceof f&&this.toRelease(e)},s.onLowMemory=function(){var e=this;if(this._caches.size>0){if(Log.d("【释放管理器】bundle : "+this.name+" 释放加载的资源"),this.name==g.BUNDLE_REMOTE)return void this._caches.forEach((function(t,s,a){e.toRelease(t)}));var t=a.getBundle(this.name);t?(this._caches.forEach((function(t,s){e.toReleasePrefab(t)})),this._caches.forEach((function(s){e.release(s,t)})),this._caches.clear()):(Log.w("【释放管理器】释放bundle : "+this.name+" 时，Bundle已经被释放，直接清空待释放数据"),this._caches.clear())}},s.tryRemove=function(e){this.name==e&&this.onLowMemory()},s.release=function(e,t){if(Array.isArray(e.data)){Log.d("【释放管理器】bundle : "+this.name+" 释放加载目录"+e.fullUrl);for(var s=0;s<e.data.length;s++)if(e.data[s]){e.data[s].decRef(!1);var a=e.fullUrl+"/"+e.data[s].name;e.data[s].refCount<=0?(null==t||t.release(a,e.type),Log.d("【释放管理器】bundle : "+this.name+" 释放加载资源"+a)):Log.w("【释放管理器】bundle : "+this.name+" 资源"+a+"正使用中引用计数为:"+e.data[s].refCount)}}else h(e.data)&&(e.data.decRef(!1),e.data.refCount<=0?(null==t||t.release(e.url,e.type),Log.d("【释放管理器】bundle : "+this.name+" 释放加载资源"+e.url)):Log.w("【释放管理器】bundle : "+this.name+" 资源"+e.url+"正使用中引用计数为:"+e.data.refCount))},s.tryRemoveTimeoutResources=function(){var e=this;App.isLazyRelease&&App.isAutoReleaseUnuseResources&&(this._caches.forEach((function(t,s,a){t.retain||null!=t.stamp&&Date.timeNow()-t.stamp>=App.autoReleaseUnuseResourcesTimeout&&e.toReleasePrefab(t)})),this._caches.forEach((function(t,s,a){t.retain||null!=t.stamp&&Date.timeNow()-t.stamp>=App.autoReleaseUnuseResourcesTimeout&&e.toRelease(t)})))},t(e,[{key:"assets",get:function(){return this._caches}}]),e}();e("ReleaseManager",function(){function e(){this.isResident=!0,this.module=null,this._lazyInfos=new Map,this._bundles=new Map,this._remote=new y(g.BUNDLE_REMOTE),this._actionTag=999}var t=e.prototype;return t.getBundle=function(e){return App.bundleManager.getBundle(e)},t.getBundleName=function(e){return App.bundleManager.getBundleName(e)},t.release=function(e){var t=this.getBundle(e.bundle);if(t)if(App.isLazyRelease){var s,a=t.name;this._lazyInfos.has(a)?s=this._lazyInfos.get(a):(s=new y(a),this._lazyInfos.set(a,s)),App.cache.removeWithInfo(e,t)&&(s&&s.add(e),App.cache.remove(e))}else App.cache.removeWithInfo(e,t);else Log.e("【释放管理器】"+e.bundle+" no found")},t.get=function(e,t){var s=this.getBundle(e);if(s){var a=this._lazyInfos.get(s.name);if(a)return a.get(t)}else{Log.w("【释放管理器】"+e+"不存在，删除释放管理器中的缓存");var n=this.getBundleName(e);this.onLoadBundle(n),this._lazyInfos.delete(n)}return null},t.removeBundle=function(e){var t=this.getBundle(e);App.isLazyRelease?t&&(Log.d("【释放管理器】向释放管理器中添加待释放bundle : "+(null==t?void 0:t.name)),this._bundles.set(null==t?void 0:t.name,Date.timeNow())):(Log.d("【释放管理器】释放Bundle : "+(null==t?void 0:t.name)),null==t||t.releaseAll(),t&&a.removeBundle(t))},t.onLoadBundle=function(e){this._bundles.delete(e)},t.isExistBunble=function(e){if(App.isLazyRelease){var t=this.getBundleName(e);return!!this._bundles.has(t)}return!1},t.debugUselessBundleAssets=function(e){},t.releaseUselessBundles=function(e){var t=this;void 0===e&&(e=!1),Log.d("【释放管理器】-------------释放无用bundle-------------");var s=[],n=Date.timeNow();return this._bundles.forEach((function(o,i){var u=a.getBundle(i);if(u){if(App.bundleManager.isEngineBundle(i))return void Log.d(i+" : 引擎bundle，跳过处理");if(e)n-o>=App.autoReleaseUnuseResourcesTimeout&&(Log.d("释放长时间无用bundle : "+i),t.debugUselessBundleAssets(i),u.releaseAll(),a.removeBundle(u),s.push(i),t._bundles.delete(i),t._lazyInfos.delete(i));else Log.d("释放无用bundle : "+i),t.debugUselessBundleAssets(i),u.releaseAll(),a.removeBundle(u),t._bundles.delete(i),t._lazyInfos.delete(i)}})),s},t.onLowMemory=function(){Log.d("【释放管理器】------------收到内存警告，释放无用资源------------"),this.releaseUselessBundles(),this._lazyInfos.forEach((function(e,t,s){e.onLowMemory()})),Log.d("【释放管理器】-------------释放无用远程资源-------------"),this._remote.onLowMemory()},t.onAutoReleaseUnuseResources=function(){Log.d("【释放管理器】------------释放长时间未使用资源开始------------"),this.releaseUselessBundles(!0),this._lazyInfos.forEach((function(e,t,s){e.tryRemoveTimeoutResources()})),Log.d("【释放管理器】-------------释放无用远程资源-------------"),this._remote.tryRemoveTimeoutResources(),Log.d("【释放管理器】------------释放长时间未使用资源结束------------")},t.getRemote=function(e,t){var s=[];if(t==n){var a=this._remote.get(m.getKey(e,t)),r=this._remote.get(m.getKey(e,o));s.push(a),s.push(r)}else if(t==i.SkeletonData){var d=e+".atlas",c=e+".png",h=e+".json",f=this._remote.get(m.getKey(e,t)),g=this._remote.get(m.getKey(c,o)),p=this._remote.get(m.getKey(h,u)),y=this._remote.get(m.getKey(d,l));s.push(f),s.push(g),s.push(p),s.push(y)}else{var R=this._remote.get(m.getKey(e,t));s.push(R)}return s},t.releaseRemote=function(e,t){void 0===t&&(t=!1),App.isLazyRelease&&!t?this._remote.add(e):e.data instanceof r&&a.releaseAsset(e.data)},t.onLoad=function(e){var t=this;App.isAutoReleaseUnuseResources&&App.isLazyRelease&&d(e).repeatForever(d(e).delay(App.autoReleaseUnuseResourcesTimeout).call((function(){t.onAutoReleaseUnuseResources()}))).tag(this._actionTag).start()},t.onDestroy=function(e){c.stopAllByTag(this._actionTag)},t.debug=function(){var e=[];this._bundles.forEach((function(t,s,a){e.push(s)}));var t={lazyInfo:this._lazyInfos,bundles:e,remote:this._remote};Log.d("--------------"+this.module+"调试信息如下--------------"),App.isLazyRelease?(t.bundles.length>0&&Log.d("待释放Bundle : "+t.bundles.toString()),t.lazyInfo.size>0&&t.lazyInfo.forEach((function(e,t,s){Log.d("--------------"+t+"待释放资源--------------"),e.assets.forEach((function(e,t,s){Log.d(JSON.stringify(e.debug()))}))})),Log.d("远程待释放资源"),t.remote.assets.forEach((function(e,t,s){Log.d(JSON.stringify(e.debug()))}))):Log.w("未开户懒释放功能!!!!")},e}()).module=p,s._RF.pop()}}}));

System.register("chunks:///_virtual/Resource.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,s;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,r=t.js,s=t.isValid}],execute:function(){var n;t("Resource",void 0),i._RF.push({},"b86e2XUMntBQpEx03UNK/XS","Resource",void 0),function(t){var i=function(t){return t[t.LOADING=0]="LOADING",t[t.NO_FOUND_LOAD_RESOURCE=1]="NO_FOUND_LOAD_RESOURCE",t[t.SUCCESS=2]="SUCCESS",t}({});t.LoaderError=i;var u=function(t){return t[t.NONE=0]="NONE",t[t.WAITTING_FOR_RELEASE=1]="WAITTING_FOR_RELEASE",t}({});t.CacheStatus=u;var a=function(t){return t[t.Local=0]="Local",t[t.Remote=1]="Remote",t}({});t.Type=a;var o=function(){function t(t,e,i){this.url="",this.type=null,this.bundle=null,this._retain=!1,this.refCount=0,this.data=null,this.resourceType=a.Local,this.stamp=null,this.isLoaded=!1,this.status=u.NONE,this.getCb=[],this.finishCb=[],this.url=t,this.type=e,this.bundle=i}var i=t.prototype;return i.doGet=function(){for(var t=0;t<this.getCb.length;t++)this.getCb[t]&&this.getCb[t]([this,this.data]);this.getCb=[]},i.doFinish=function(t){for(var e=0;e<this.finishCb.length;e++)this.finishCb[e]&&this.finishCb[e](t);this.finishCb=[]},i.debug=function(){var t=this,e=r.getClassName(this.type);return{isLoaded:this.isLoaded,info:function(e){if(!e)return[{url:t.fullUrl,isValid:!1,refCount:-1}];if(Array.isArray(e)){var i=[];return e.forEach((function(e){var r=s(e);i.push({url:t.fullUrl+"/"+(r?e.name:"unknown"),isValid:r,refCount:r?e.refCount:-1})})),i}var r=s(e);return[{url:t.fullUrl,isValid:r,refCount:r?e.refCount:-1}]}(this.data),status:this.status,type:e}},e(t,[{key:"key",get:function(){return l(this.url,this.type)}},{key:"description",get:function(){var t=r.getClassName(this.type);return this.resourceType==n.Type.Local?"本地 : "+(Array.isArray(this.data)?"目录":"")+"["+t+"]"+this.fullUrl:"远程 : ["+t+"]"+this.fullUrl}},{key:"fullUrl",get:function(){return this.resourceType==n.Type.Local?this.bundle+"/"+this.url:this.url}},{key:"retain",get:function(){return this._retain},set:function(t){this._retain?Log.w(this.fullUrl+"已经是常驻资源，无需要重复设置"):this._retain=t}},{key:"isInvalid",get:function(){return this.isLoaded&&this.data&&!s(this.data)}}]),t}();function l(t,e){return t.indexOf(r.getClassName(e))>=0?t:t+"("+r.getClassName(e)+")"}t.Cache=o,t.getKey=l}(n||(n=t("Resource",{}))),i._RF.pop()}}}));

System.register("chunks:///_virtual/SceneDef.ts",["cc"],(function(e){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"ecb012AuLVBoZ7SfuVRBp5b","SceneDef",void 0),e("SceneDef",(function(){})).MAIN="main",c._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonT.ts"],(function(n){var t,e,i,c;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){i=n.cclegacy},function(n){c=n.SingletonT}],execute:function(){i._RF.push({},"e5c216B1FVD2L87jr/mkdQq","Singleton",void 0),n("Singleton",function(n){function i(){for(var t,e=arguments.length,i=new Array(e),c=0;c<e;c++)i[c]=arguments[c];return(t=n.call.apply(n,[this].concat(i))||this).module="【单例管理器】",t}return t(i,n),i.get=function(n,t){var e;void 0===t&&(t=!0);for(var i=arguments.length,c=new Array(i>2?i-2:0),r=2;r<i;r++)c[r-2]=arguments[r];return(e=this.instance).get.apply(e,[n,t].concat(c))},i.destory=function(n){return this.instance.destory(n)},i.destoryExclude=function(n){return this.instance.destoryExclude(n)},i.clear=function(n){this.instance.clear(n)},i.debug=function(){this.instance.debug()},e(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i)}}]),i}(c))._instance=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/SingletonT.ts",["cc","./Macros.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.Macro}],execute:function(){e._RF.push({},"d6a49CzdxFFBIYtFC+YGR0k","SingletonT",void 0);t("SingletonT",function(){function t(){this._datas=new Map,this.module=null}var e=t.prototype;return e.get=function(t,e){void 0===e&&(e=!0);var o=this.getKey(t);if(o==n.UNKNOWN)return null;if(this._datas.has(o))return this._datas.get(o);if("string"!=typeof t&&e){var d,i=null;(i=t.instance?t.instance:new t).module=t.module,t.module;for(var r=arguments.length,s=new Array(r>2?r-2:0),u=2;u<r;u++)s[u-2]=arguments[u];return i.init&&(d=i).init.apply(d,s),this._datas.set(t.module,i),i}return null},e.destory=function(t){var e=this;if(t){var n=this.getKey(t);if(this._datas.has(n)){Log.d(n+"销毁");var o=this._datas.get(n);return o&&o.destory&&o.destory(),this._datas.delete(n),!0}return!1}return this._datas.forEach((function(t){t.isResident?Log.d(t.module+"为常驻单例，不做销毁处理"):(Log.d(t.module+"销毁"),t.destory&&t.destory(),e._datas.delete(t.module))})),!0},e.destoryExclude=function(t){var e=this;if(!t)return this._datas.forEach((function(t){t.isResident?Log.d(t.module+"为常驻单例，不做销毁处理"):(Log.d(t.module+"销毁"),t.destory&&t.destory(),e._datas.delete(t.module))})),!0;this._datas.forEach((function(n,o){e.isInExclude(n,t)||(n.isResident?Log.d(n.module+"为常驻单例，不做销毁处理"):(Log.d(n.module+"销毁"),n.destory&&n.destory(),e._datas.delete(n.module)))}))},e.clear=function(t){var e=this;t?this._datas.forEach((function(n,o){e.isInExclude(n,t)||(Log.d(n.module+"清理"),n.clear&&n.clear())})):this._datas.forEach((function(t,e){Log.d(t.module+"清理"),t.clear&&t.clear()}))},e.debug=function(){Log.d("************************** "+this.module+" 开始 **************************"),this._datas.forEach((function(t,e,n){t.debug?t.debug():Log.d(t.module+" : 未实现debug接口")})),Log.d("************************** "+this.module+" 结束 **************************")},e.isInExclude=function(t,e){if(!e)return!1;for(var n=0;n<e.length;n++){if(this.getKey(e[n])==t.module)return!0}return!1},e.getKey=function(t){n.UNKNOWN;return"string"==typeof t?t:t.module},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Snapshot.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,a,s,i,n,r,o,h,c,p,u,l,f,v;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,s=t._decorator,i=t.RenderTexture,n=t.view,r=t.UITransform,o=t.ImageAsset,h=t.Texture2D,c=t.SpriteFrame,p=t.sys,u=t.Size,l=t.native,f=t.assetManager,v=t.Component}],execute:function(){var m;a._RF.push({},"324b22woflNuq56ModJixbV","Snapshot",void 0);var g=s.ccclass;s.property,t("Snapshot",g("Snapshot")(m=function(t){function a(){for(var e,a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))||this)._camera=null,e.onCaptureComplete=void 0,e._texture=null,e._canvas=null,e._buffer=null,e}e(a,t);var s=a.prototype;return s.start=function(){var e=this;this._camera=App.uiManager.screenShotCamera,t.prototype.start&&t.prototype.start.call(this),this._texture=new i,this._texture.reset({width:n.getVisibleSize().width,height:n.getVisibleSize().height}),this._camera.targetTexture=this._texture,this._camera.node.active=!0,this.scheduleOnce((function(){e.capture()}),.2)},s.onDestroy=function(){this._camera.node.active=!1,t.prototype.onDestroy&&t.prototype.onDestroy.call(this)},s.capture=function(){var t=this.node.getComponent(r);if(t){var e=t.width,a=t.height,s=t.getBoundingBoxToWorld(),i=s.x,n=s.y;this._buffer=this._texture.readPixels(Math.round(i),Math.round(n),e,a),this.saveImage()}},s.genSpriteFrame=function(t,e){var a=new o;a.reset({_data:this._buffer,width:t,height:e,format:h.PixelFormat.RGBA8888,_compressed:!1});var s=new h;s.image=a;var i=new c;return i.texture=s,i.packable=!1,i.flipUVY=!0,i},s.createImageData=function(t,e,a){if(p.isBrowser||p.platform===p.Platform.WECHAT_GAME){this._canvas?this.clearCanvas():(this._canvas=document.createElement("canvas"),this._canvas.width=t,this._canvas.height=e);for(var s=this._canvas.getContext("2d"),i=4*t,n=0;n<e;n++){for(var r=e-1-n,o=s.createImageData(t,1),h=r*t*4,c=0;c<i;c++)o.data[c]=a[h+c];s.putImageData(o,0,n)}}},s.onCaptureFinish=function(t,e,a){this.onCaptureComplete&&(null==a&&(a=this.genSpriteFrame(t,e)),this.onCaptureComplete(a,new u(t,e))),this.destroy()},s.flipImageY=function(t,e,a){for(var s=new Uint8Array(e*a*4),i=4*e,n=a-1,r=0;r<a;r++)for(var o=(n-r)*i,h=r*i,c=0;c<i;c++)s[c+h]=t[o+c];return s},s.savaAsImage=function(t,e,a){var s=this;if(p.isBrowser)this.createImageData(t,e,a),App.canvasHelper.saveAsPNG(this._canvas,t,e),App.tips.show("截图成功"),this.onCaptureFinish(t,e);else if(p.isNative){var i=(new Date).format("yyyy_MM_dd_hh_mm_ss_SS")+".png",n=App.platform.screenshotsPath+"/"+i,r=this.flipImageY(this._buffer,t,e);l.saveImageData(r,t,e,n).then((function(){s.onCaptureComplete&&f.loadRemote(n,(function(a,i){if(a)Log.d("show image error");else{var n=new c,r=new h;r.image=i,n.texture=r,n.packable=!1,App.tips.show("截图保存成功"),s.onCaptureFinish(t,e,n)}})),Log.d("save image data success, file: "+n),App.tips.show("截图保存成功")})).catch((function(){Log.e("save image data failed!"),App.tips.show("截图保存失败")}))}else p.platform===p.Platform.WECHAT_GAME&&(this.createImageData(t,e,a),this._canvas.toTempFilePath({x:0,y:0,width:this._canvas.width,height:this._canvas.height,destWidth:this._canvas.width,destHeight:this._canvas.height,fileType:"png",success:function(t){wx.showToast({title:"截图成功"}),App.tips.show("截图成功"),wx.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){wx.showToast({title:"成功保存到设备相册"}),App.tips.show("截图保存成功")},fail:function(){App.tips.show("截图保存失败")}})},fail:function(){wx.showToast({title:"截图保存失败"}),App.tips.show("截图保存失败")}}),this.onCaptureFinish(t,e))},s.clearCanvas=function(){var t=this._canvas.getContext("2d");t&&t.clearRect(0,0,this._canvas.width,this._canvas.height)},s.saveImage=function(){var t=this.node.getComponent(r);t&&this.savaAsImage(t.width,t.height,this._buffer)},a}(v))||m);a._RF.pop()}}}));

System.register("chunks:///_virtual/Test.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./CoordinateUtils.ts"],(function(t){var n,o,e,i,r,a;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Component},function(t){r=t.RES_URL_PREFIX},function(t){a=t.XZToLngLatDefault}],execute:function(){var s;o._RF.push({},"54f8f2Ptn5PFYKAFlC5OB7y","Test",void 0);var c=e.ccclass;e.property,t("Test",c("Test")(s=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.testMarkerAdd=function(){var t=String(this.getRandomNumber(1,10));console.log("genMarker",t);var n=a(this.getRandomNumber(-150,150),this.getRandomNumber(-150,150)),o={id:t,text:{content:t},icon:{path:r+"miniofile/test/default_radio_button_off.png"},position:{x:n.x,y:n.y,z:10,type:2}};App.markerManager.add(o,(function(){console.log("click",t)})).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},e.testMarkerUpdate=function(){var t={id:String(this.getRandomNumber(1,10)),position:{x:this.getRandomNumber(-150,150)}};App.markerManager.update(t).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},e.testPolygonAdd=function(){var t=String(this.getRandomNumber(1,100));console.log("genPolygon",t);var n={id:t,points:[{x:this.getRandomNumber(-300,300),y:this.getRandomNumber(-300,300),height:50},{x:this.getRandomNumber(-300,300),y:this.getRandomNumber(-300,300),height:50},{x:this.getRandomNumber(-300,300),y:this.getRandomNumber(-300,300),height:50}],height:100};App.polygonManager.add(n).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},e.getRandomNumber=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},e.start=function(){},e.update=function(t){},o}(i))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/Tips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts"],(function(t){var n,o,i,e,s,r,a,u,c,h,p,l,f,_,m,y;return{setters:[function(t){n=t.inheritsLoose,o=t.createClass,i=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){s=t.cclegacy,r=t.log,a=t.Vec3,u=t.Tween,c=t.find,h=t.Label,p=t.tween,l=t.UIOpacity,f=t.UITransform,_=t.Component,m=t.instantiate},function(t){y=t.ViewZOrder}],execute:function(){s._RF.push({},"bedbea6Yp5JmqbMbnFdxDjd","Tips",void 0);var d=function(t){function i(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this)._content=null,n._curPositon=new a,n._curOpacity=null,n._transform=null,n}n(i,t);var e=i.prototype;return e.stopAllActions=function(){u.stopAllByTarget(this._content),u.stopAllByTarget(this._curPositon),this.opacity&&u.stopAllByTarget(this.opacity)},e.onDestroy=function(){this.stopAllActions()},e.init=function(t,n){this._content=c("content",this.node),this._content&&(this._content.getComponent(h).string=t),this.runTimeOut(n)},e.runTimeOut=function(t){var n=this;p(this._content).delay(t).call((function(){App.tips.finishShowItem(n.node)})).start()},e.fadeOut=function(){var t=this;this.opacity&&(u.stopAllByTarget(this.opacity),p(this.opacity).to(.5,{opacity:0}).call((function(){var n;t.stopAllActions(),null==(n=t.node)||n.removeFromParent()})).start(),this.moveTo(0,this.node.position.y+this.transform.height))},e.fadeIn=function(){this.opacity&&(u.stopAllByTarget(this.opacity),this.opacity.opacity=0,p(this.opacity).to(.5,{opacity:255}).start(),this.moveTo(0,this.node.position.y+this.transform.height))},e.moveTo=function(t,n){var o=this;u.stopAllByTarget(this._curPositon),this._curPositon.set(this.node.position),p(this._curPositon).to(.5,{x:t,y:n},{onUpdate:function(t){var n;null==(n=o.node)||n.setPosition(t)},easing:"expoOut"}).start()},o(i,[{key:"opacity",get:function(){return this._curOpacity||(this._curOpacity=this.node.getComponent(l)),this._curOpacity}},{key:"transform",get:function(){return this._transform||(this._transform=this.node.getComponent(f)),this._transform}}]),i}(_);t("default",function(){function t(){this._queue=[],this.module=null,this.isResident=!0,this.MAX_NUM=3,this.FADE_TIME=2,this._id=0,this.startPosition=new a(0,100)}var n=t.prototype;return n._show=function(){var t=i(e().mark((function t(n){var o=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:App.asset.loadPrefab("prefabs/Tips").then((function(t){var i=m(t);if(i){var e=i.addComponent(d);e.init(n,o.FADE_TIME),i.setPosition(o.startPosition),e.fadeIn();var s=o._id++;i.name="Tips"+s,App.uiManager.addView(i,y.Tips);for(var r,a=o._queue.length,u=0;u<a&&u<o.MAX_NUM;u++){var c=o._queue[u],h=c.getComponent(d),p=c.getComponent(f);h&&p&&h.moveTo(0,o.startPosition.y+p.height+(a-u)*(p.height+3))}if(o._queue.push(i),o._queue.length>o.MAX_NUM)null==(r=o._queue.shift().getComponent(d))||r.fadeOut()}}));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),n.show=function(t){null!=t&&null!=t&&""!=t&&(r("Toast.show msg=%s",t),this._show(t))},n.finishShowItem=function(t){for(var n=0;n<this._queue.length;n++){if(this._queue[n].name==t.name){var o;this._queue.splice(n,1),null==(o=t.getComponent(d))||o.fadeOut();break}}},n.clear=function(){for(var t=null;t=this._queue.pop();){var n=t.getComponent(d);n&&n.stopAllActions(),t.removeFromParent()}},t}()).module="【Tips】",s._RF.pop()}}}));

System.register("chunks:///_virtual/TouchTarget.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"13dd4MEC8NPrYFHf3KRFKGy","TouchTarget",void 0);t("TouchTarget",(function(t,i,s,n,o){this.name=void 0,this.position=void 0,this.lnglat=void 0,this.distance=void 0,this.node=void 0,this.name=t,this.position=i,this.lnglat=s,this.distance=n,this.node=o}));i._RF.pop()}}}));

System.register("chunks:///_virtual/TrackedHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationMath.ts","./CameraHandler.ts"],(function(o){var e,t,a,r,n,i;return{setters:[function(o){e=o.inheritsLoose},function(o){t=o.cclegacy,a=o.Vec3},function(o){r=o.quarticDamp,n=o.Vec3_closeTo},function(o){i=o.CameraHandler}],execute:function(){t._RF.push({},"6dfb6YW7A1EQp0ov/a21aIP","TrackedHandler",void 0);var s=new a;o("TrackedHandler",function(o){function t(){return o.apply(this,arguments)||this}return e(t,o),t.prototype.updateCamera=function(o){var e=this._vcam,t=e.body.tracked;if(t.path){if(t.autoDolly.enable&&e.follow){var a=e.follow.worldPosition,i=t.path.findClosestPoint(a,t.progress,t.autoDolly.searchRadius,t.autoDolly.searchResolution);t.progress=r(t.progress,i,t.damping,o)}t.path.evaluatePosition(s,t.progress)}n(s,e.node.worldPosition)||(e.node.worldPosition=s)},t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/Types.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"9ef413YU3tPkrxgLYtoto/R","Types",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewAsset.ts","./Macros.ts"],(function(n){var e,t,a,o,r,i;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy,a=n.find,o=n.Camera},function(n){r=n.ViewAsset},function(n){i=n.Macro}],execute:function(){t._RF.push({},"fa88dx10g5Aj4XQMIIlFnif","UIManager",void 0),n("UIManager",function(){function n(){this.isResident=!0,this.module=null,this.retainMemory=new r.Dynamic(i.DYNAMIC_LOAD_RETAIN_MEMORY),this._canvas=null}var t=n.prototype;return t.onLoad=function(n){this._canvas=n},t.onDestroy=function(n){},t.getUINode=function(n){return a(n,this.canvas)},t.get3DNode=function(n){return a(n,this.canvas.parent)},t.addUINode=function(n,e){a(n,this.canvas).addChild(e)},t.add3DNode=function(n,e){a(n,this.canvas.parent).addChild(e)},t.addComponent=function(n){return App.layerManager.addComponent(n)},t.addView=function(n,e){App.layerManager.add(n,e)},e(n,[{key:"canvas",get:function(){return this._canvas}},{key:"camera3d",get:function(){var n;return null==(n=a("Camera3D",this.canvas.parent))?void 0:n.getComponent(o)}},{key:"uiCamera",get:function(){var n;return null==(n=a("UICamera",this.canvas))?void 0:n.getComponent(o)}},{key:"screenShotCamera",get:function(){var n;return null==(n=a("ScreenShotCamera",this.canvas))?void 0:n.getComponent(o)}}]),n}()).module="【UI管理器】",t._RF.pop()}}}));

System.register("chunks:///_virtual/VCamAim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VCamComposer.ts"],(function(e){var t,r,i,o,n,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e._decorator,n=e.Enum,a=e.Vec3},function(e){c=e.VCamComposer}],execute:function(){var s,p,u,m,l,f,y,b,C;i._RF.push({},"903395rMItAyIQ4IfLd5nHa","VCamAim",void 0);var d=o.ccclass,h=o.property,A=e("AimType",function(e){return e[e.None=0]="None",e[e.Composer=1]="Composer",e[e.HardLookAt=2]="HardLookAt",e}({}));e("VCamAim",(s=d("VCamAim"),p=h({type:n(A)}),u=h({tooltip:"i18n:cinestation.VCamAim.trackedObjectOffset"}),m=h({type:c,visible:function(){return this.type===A.Composer}}),s((y=t((f=function(){r(this,"type",y,this),r(this,"trackedObjectOffset",b,this),r(this,"composer",C,this)}).prototype,"type",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.Composer}}),b=t(f.prototype,"trackedObjectOffset",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a}}),C=t(f.prototype,"composer",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),l=f))||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/VCamAutoDolly.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts"],(function(e){var t,i,o,r,n,s,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.createClass,o=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e._decorator,s=e.director},function(e){a=e.CinestationEvent}],execute:function(){var c,u,l,p,h,y,R,b,_,D,f,C;r._RF.push({},"9c5d7wXq6tAR6jT0TbuwzE6","VCamAutoDolly",void 0);var d=n.ccclass,m=n.property;e("VCamAutoDoly",(c=d("VCamAutoDoly"),u=m({visible:!1}),l=m({visible:!1}),p=m({visible:!1}),h=m({tooltip:"i18n:cinestation.VCamAutoDoly.enable"}),y=m({tooltip:"i18n:cinestation.VCamAutoDoly.searchRadius"}),R=m({tooltip:"i18n:cinestation.VCamAutoDoly.searchResolution"}),c((D=t((_=function(){function e(){o(this,"_enable",D,this),o(this,"_searchRadius",f,this),o(this,"_searchResolution",C,this)}return i(e,[{key:"enable",get:function(){return this._enable},set:function(e){this._enable!==e&&(this._enable=e,CC_EDITOR&&s.emit(a.EDITOR_CHANGED))}},{key:"searchRadius",get:function(){return this._searchRadius},set:function(e){this._searchRadius!==e&&(this._searchRadius=e,CC_EDITOR&&s.emit(a.EDITOR_CHANGED))}},{key:"searchResolution",get:function(){return this._searchResolution},set:function(e){this._searchResolution!==e&&(this._searchResolution=e,CC_EDITOR&&s.emit(a.EDITOR_CHANGED))}}]),e}()).prototype,"_enable",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),f=t(_.prototype,"_searchRadius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),C=t(_.prototype,"_searchResolution",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),t(_.prototype,"enable",[h],Object.getOwnPropertyDescriptor(_.prototype,"enable"),_.prototype),t(_.prototype,"searchRadius",[y],Object.getOwnPropertyDescriptor(_.prototype,"searchRadius"),_.prototype),t(_.prototype,"searchResolution",[R],Object.getOwnPropertyDescriptor(_.prototype,"searchResolution"),_.prototype),b=_))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/VCamBody.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts","./VCamFreeLook.ts","./VCamTracked.ts"],(function(e){var t,r,i,n,o,a,c,p,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.createClass,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e._decorator,a=e.Enum,c=e.director},function(e){p=e.CinestationEvent},function(e){u=e.VCamFreeLook},function(e){s=e.VCamTracked}],execute:function(){var y,l,f,d,m,b,k,h,C,v;n._RF.push({},"4acfemyq2JIvZrTRjH1/iZA","VCamBody",void 0);var _=o.ccclass,T=o.property,g=e("BodyType",function(e){return e[e.None=0]="None",e[e.FreeLook=1]="FreeLook",e[e.Tracked=2]="Tracked",e}({}));e("VCamBody",(y=_("VCamBody"),l=T({visible:!1}),f=T({animatable:!1,type:a(g)}),d=T({animatable:!1,type:u,visible:function(){return this.type===g.FreeLook}}),m=T({type:s,visible:function(){return this.type===g.Tracked}}),y((h=t((k=function(){function e(){i(this,"_type",h,this),i(this,"freelook",C,this),i(this,"tracked",v,this)}return r(e,[{key:"type",get:function(){return this._type},set:function(e){this._type!==e&&(this._type=e,CC_EDITOR&&c.emit(p.EDITOR_CHANGED))}}]),e}()).prototype,"_type",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.None}}),t(k.prototype,"type",[f],Object.getOwnPropertyDescriptor(k.prototype,"type"),k.prototype),C=t(k.prototype,"freelook",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),v=t(k.prototype,"tracked",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),b=k))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/VCamComposer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts"],(function(e){var t,o,i,n,r,a,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.createClass,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e._decorator,a=e.game},function(e){s=e.CinestationEvent}],execute:function(){var p,d,h,l,c,u,g,f,m,C,Z,y,_,b,H,D,O,W,k,E,V;n._RF.push({},"014e8zBHQhJ77BgWUVMXF1x","VCamComposer",void 0);var v=r.ccclass,w=r.property;e("VCamComposer",(p=v("VCamComposer"),d=w({visible:!1}),h=w({visible:!1}),l=w({visible:!1}),c=w({visible:!1}),u=w({tooltip:"i18n:cinestation.VCamComposer.lookaheadTime",range:[0,1],step:.1,slide:!0}),g=w({tooltip:"i18n:cinestation.VCamComposer.lookaheadDamping",range:[.1,2],step:.1,slide:!0}),f=w({tooltip:"i18n:cinestation.VCamComposer.lookatDamping",range:[.1,2],step:.1,slide:!0}),m=w({tooltip:"i18n:cinestation.VCamComposer.deadZoneWidth",range:[0,1],step:.01,slide:!0}),C=w({tooltip:"i18n:cinestation.VCamComposer.deadZoneHeight",range:[0,1],step:.01,slide:!0}),Z=w({tooltip:"i18n:cinestation.VCamComposer.softZoneWidth",range:[0,1],step:.01,slide:!0}),y=w({tooltip:"i18n:cinestation.VCamComposer.softZoneHeight",range:[0,1],step:.01,slide:!0}),p((H=t((b=function(){function e(){i(this,"_deadZoneWidth",H,this),i(this,"_deadZoneHeight",D,this),i(this,"_softZoneWidth",O,this),i(this,"_softZoneHeight",W,this),i(this,"lookaheadTime",k,this),i(this,"lookaheadDamping",E,this),i(this,"lookatDamping",V,this)}return o(e,[{key:"deadZoneWidth",get:function(){return this._deadZoneWidth},set:function(e){this._deadZoneWidth!==e&&(this._deadZoneWidth=e,CC_EDITOR&&a.emit(s.COMPOSER_CHANGED))}},{key:"deadZoneHeight",get:function(){return this._deadZoneHeight},set:function(e){this._deadZoneHeight!==e&&(this._deadZoneHeight=e,CC_EDITOR&&a.emit(s.COMPOSER_CHANGED))}},{key:"softZoneWidth",get:function(){return this._softZoneWidth},set:function(e){this._softZoneWidth!==e&&(this._softZoneWidth=e,CC_EDITOR&&a.emit(s.COMPOSER_CHANGED))}},{key:"softZoneHeight",get:function(){return this._softZoneHeight},set:function(e){this._softZoneHeight!==e&&(this._softZoneHeight=e,CC_EDITOR&&a.emit(s.COMPOSER_CHANGED))}}]),e}()).prototype,"_deadZoneWidth",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),D=t(b.prototype,"_deadZoneHeight",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),O=t(b.prototype,"_softZoneWidth",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),W=t(b.prototype,"_softZoneHeight",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),k=t(b.prototype,"lookaheadTime",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),E=t(b.prototype,"lookaheadDamping",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),V=t(b.prototype,"lookatDamping",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),t(b.prototype,"deadZoneWidth",[m],Object.getOwnPropertyDescriptor(b.prototype,"deadZoneWidth"),b.prototype),t(b.prototype,"deadZoneHeight",[C],Object.getOwnPropertyDescriptor(b.prototype,"deadZoneHeight"),b.prototype),t(b.prototype,"softZoneWidth",[Z],Object.getOwnPropertyDescriptor(b.prototype,"softZoneWidth"),b.prototype),t(b.prototype,"softZoneHeight",[y],Object.getOwnPropertyDescriptor(b.prototype,"softZoneHeight"),b.prototype),_=b))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/VCamFreeLook.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,o,n,a;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.initializerDefineProperty},function(i){o=i.cclegacy,n=i._decorator,a=i.Vec3}],execute:function(){var r,l,s,p,c,u,b,f,m,h,d,g,w,k,F,y,L,V,C,z,M,S,D,x,P,v,Z;o._RF.push({},"eebe6TimZBDp5kvxoe4ntJs","VCamFreeLook",void 0);var _=n.ccclass,I=n.property;i("VCamFreeLook",(r=_("VCamFreeLook"),l=I({tooltip:"i18n:cinestation.VCamFreeLook.forbidX",animatable:!1}),s=I({tooltip:"i18n:cinestation.VCamFreeLook.forbidY",animatable:!1}),p=I({tooltip:"i18n:cinestation.VCamFreeLook.forbidZ",animatable:!1}),c=I({tooltip:"i18n:cinestation.VCamFreeLook.forbidPan",animatable:!1}),u=I({tooltip:"i18n:cinestation.VCamFreeLook.rotateSpeed",animatable:!1,range:[.1,5],step:.1,slide:!0}),b=I({tooltip:"i18n:cinestation.VCamFreeLook.rotateSmoothing",animatable:!1,range:[.1,5],step:.1,slide:!0}),f=I({tooltip:"i18n:cinestation.VCamFreeLook.panSpeed",animatable:!1,range:[.1,5],step:.1,slide:!0}),m=I({tooltip:"i18n:cinestation.VCamFreeLook.panSmoothing",animatable:!1,range:[.1,5],step:.1,slide:!0}),h=I({tooltip:"i18n:cinestation.VCamFreeLook.followOffset"}),d=I({tooltip:"i18n:cinestation.VCamFreeLook.followDamping",animatable:!1,range:[0,1],step:.1,slide:!0}),g=I({tooltip:"i18n:cinestation.VCamFreeLook.distanceMin"}),w=I({tooltip:"i18n:cinestation.VCamFreeLook.distanceMax"}),r((y=e((F=function(){t(this,"forbidX",y,this),t(this,"forbidY",L,this),t(this,"forbidZ",V,this),t(this,"forbidPan",C,this),t(this,"rotateSpeed",z,this),t(this,"rotateSmoothing",M,this),t(this,"panSpeed",S,this),t(this,"panSmoothing",D,this),t(this,"followOffset",x,this),t(this,"followDamping",P,this),t(this,"distanceMin",v,this),t(this,"distanceMax",Z,this),this.phiMin=.001,this.phiMax=Math.PI/2-Math.PI/12,this.thetaMin=-1/0,this.thetaMax=1/0,this.rotateTouchID=0}).prototype,"forbidX",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=e(F.prototype,"forbidY",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=e(F.prototype,"forbidZ",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=e(F.prototype,"forbidPan",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=e(F.prototype,"rotateSpeed",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=e(F.prototype,"rotateSmoothing",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),S=e(F.prototype,"panSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),D=e(F.prototype,"panSmoothing",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),x=e(F.prototype,"followOffset",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a(0,0,-10)}}),P=e(F.prototype,"followDamping",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=e(F.prototype,"distanceMin",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1e4}}),Z=e(F.prototype,"distanceMax",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e4}}),k=F))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/VCamHardLook.ts",["cc"],(function(o){var r,c;return{setters:[function(o){r=o.cclegacy,c=o._decorator}],execute:function(){var a;r._RF.push({},"9c04014DM1GQpZbUFoue+zJ","VCamHardLook",void 0);var t=c.ccclass;c.property,o("VCamHardLook",t("VCamHardLook")(a=function(){})||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/VCamImpulse.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,u,i,n,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){u=e.cclegacy,i=e._decorator,n=e.Enum,c=e.Layers}],execute:function(){var o,a,s,l,p;u._RF.push({},"6cd21bwVEdI0oQKQ04kaV07","VCamImpulse",void 0);var m=i.ccclass,f=i.property;e("VCamImpulse",(o=m("VCamImpulse"),a=f({type:n(c.Enum)}),o((p=r((l=function(){t(this,"source",p,this)}).prototype,"source",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.Enum.DEFAULT}}),s=l))||s));u._RF.pop()}}}));

System.register("chunks:///_virtual/VCamLens.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts"],(function(t){var e,r,i,n,o,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.createClass,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t._decorator,a=t.director},function(t){s=t.CinestationEvent}],execute:function(){var c,p,f,u,l,_,y,v,h;n._RF.push({},"089a7kGN3VEZZcikcM2XtHJ","VCamLens",void 0);var b=o.ccclass,C=o.property;t("VCamLens",(c=b("VCamLens"),p=C({visible:!1}),f=C({visible:!1}),u=C({visible:!1}),c((y=e((_=function(){function t(){i(this,"_fov",y,this),i(this,"_near",v,this),i(this,"_far",h,this)}return r(t,[{key:"fov",get:function(){return this._fov},set:function(t){this._fov!==t&&(this._fov=t,CC_EDITOR&&a.emit(s.LENS_CHANGED))}},{key:"near",get:function(){return this._near},set:function(t){this._near!==t&&(this._near=t,CC_EDITOR&&a.emit(s.LENS_CHANGED))}},{key:"far",get:function(){return this._far},set:function(t){this._far!==t&&(this._far=t,CC_EDITOR&&a.emit(s.LENS_CHANGED))}}]),t}()).prototype,"_fov",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),v=e(_.prototype,"_near",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=e(_.prototype,"_far",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),e(_.prototype,"fov",[C],Object.getOwnPropertyDescriptor(_.prototype,"fov"),_.prototype),e(_.prototype,"near",[C],Object.getOwnPropertyDescriptor(_.prototype,"near"),_.prototype),e(_.prototype,"far",[C],Object.getOwnPropertyDescriptor(_.prototype,"far"),_.prototype),l=_))||l));n._RF.pop()}}}));

System.register("chunks:///_virtual/VCamNoise.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NoiseGenerator.ts"],(function(e){var i,t,n,o,r,a;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e._decorator,r=e.Enum},function(e){a=e.NoiseProfile}],execute:function(){var u,s,l,c,p,f,y,N,b,m,h;n._RF.push({},"98783fPPXhC+p/FsMMAUXNd","VCamNoise",void 0);var C=o.ccclass,d=o.property,v=e("NoiseType",function(e){return e[e.None=0]="None",e[e.Perlin=1]="Perlin",e}({}));e("VCamNoise",(u=C("VCamNoise"),s=d({type:r(v)}),l=d({tooltip:"i18n:cinestation.VCamNoise.profile",type:r(a),visible:function(){return this.type!==v.None}}),c=d({tooltip:"i18n:cinestation.VCamNoise.amplitudeGain",visible:function(){return this.type!==v.None}}),p=d({tooltip:"i18n:cinestation.VCamNoise.frequncyGain",visible:function(){return this.type!==v.None}}),u((N=i((y=function(){t(this,"type",N,this),t(this,"profile",b,this),t(this,"amplitudeGain",m,this),t(this,"frequncyGain",h,this)}).prototype,"type",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.None}}),b=i(y.prototype,"profile",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.Noise_CM_4}}),m=i(y.prototype,"amplitudeGain",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=i(y.prototype,"frequncyGain",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=y))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/VCamTracked.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationSmoothPath.ts","./Events.ts","./VCamAutoDolly.ts"],(function(t){var e,i,r,n,o,a,s,p,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,r=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t._decorator,a=t.director},function(t){s=t.CinestationSmoothPath},function(t){p=t.CinestationEvent},function(t){c=t.VCamAutoDoly}],execute:function(){var l,u,m,g,f,h,y,b,d,C,D,_;n._RF.push({},"5453aE14DpAd7Omr4+wUtvj","VCamTracked",void 0);var k=o.ccclass,v=o.property;t("VCamTracked",(l=k("VCamTracked"),u=v({visible:!1}),m=v({tooltip:"i18n:cinestation.VCamTracked.path",animatable:!1,type:s}),g=v({tooltip:"i18n:cinestation.VCamTracked.progress"}),f=v({tooltip:"i18n:cinestation.VCamTracked.damping",animatable:!1,range:[.1,5],step:.1,slide:!0}),h=v({animatable:!1,type:c}),l((d=e((b=function(){function t(){r(this,"_progress",d,this),r(this,"path",C,this),r(this,"damping",D,this),r(this,"autoDolly",_,this)}return i(t,[{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,CC_EDITOR&&a.emit(p.EDITOR_CHANGED))}}]),t}()).prototype,"_progress",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=e(b.prototype,"path",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(b.prototype,"progress",[g],Object.getOwnPropertyDescriptor(b.prototype,"progress"),b.prototype),D=e(b.prototype,"damping",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=e(b.prototype,"autoDolly",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),y=b))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/ViewAsset.ts",["cc","./Macros.ts"],(function(e){var t,s;return{setters:[function(e){t=e.cclegacy},function(e){s=e.Macro}],execute:function(){var o,i,a;e("ViewAsset",void 0),t._RF.push({},"ec3e58JQSdKrYy4zUU0uue/","ViewAsset",void 0),i=o||(o=e("ViewAsset",{})),a=function(){function e(e){void 0===e&&(e=null),this.local=new Map,this.remote=new Map,this.name=void 0,this.name=e}var t=e.prototype;return t.addLocal=function(e,t){this.name==s.DYNAMIC_LOAD_GARBAGE&&Log.e("找不到资源持有者: "+e.key),this.local.has(e.key)||(App.asset.retainAsset(e),this.local.set(e.key,e))},t.addRemote=function(e,t){this.remote.has(e.key)||(this.name==s.DYNAMIC_LOAD_GARBAGE&&Log.e("找不到资源持有者 : "+e.key),App.cache.remoteCaches.retainAsset(e),this.remote.set(e.key,e))},t.clear=function(e){void 0===e&&(e=!1),this.name==s.DYNAMIC_LOAD_GARBAGE?((this.local.size>0||this.remote.size>0)&&Log.e("当前未能释放资源如下:"),this.local&&this.local.size>0&&(Log.e("-----------local-----------"),this.local&&this.local.forEach((function(e,t){Log.e(t)}))),this.remote&&this.remote.size>0&&(Log.e("-----------remote-----------"),this.remote&&this.remote.forEach((function(e,t){Log.e(t)})))):(this.local&&(this.local.forEach((function(e,t){App.asset.releaseAsset(e)})),e||this.local.clear()),this.remote&&(this.remote.forEach((function(e,t){App.cache.remoteCaches.releaseAsset(e)})),e||this.remote.clear()))},t.resume=function(e){var t=App.releaseManger.get(e.bundle,e.key);t&&(App.cache.set(t),App.asset.retainAsset(t))},t.resumeRelease=function(){var e=this;this.local&&this.local.forEach((function(t,s){e.resume(t)})),this.remote&&this.remote.forEach((function(t,s){e.resume(t)}))},e}(),i.Dynamic=a,t._RF.pop()}}}));

System.register("chunks:///_virtual/VirtualCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./Events.ts","./Visualization.ts","./VCamAim.ts","./VCamBody.ts","./VCamImpulse.ts","./VCamLens.ts","./VCamNoise.ts","./AimStage.ts","./BodyStage.ts","./ImpulseStage.ts","./NoiseStage.ts"],(function(t){var e,o,i,n,r,a,s,l,c,u,f,p,h,d,y,g,_,m,C,w,b,v,k,A,E,D,R,V,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){s=t.cclegacy,l=t._decorator,c=t.Node,u=t.Vec3,f=t.Quat,p=t.director,h=t.view,d=t.Mat4,y=t.toRadian,g=t.utils},function(t){_=t.cinestation},function(t){m=t.CinestationEvent},function(t){C=t.Visualization},function(t){w=t.VCamAim},function(t){b=t.VCamBody,v=t.BodyType},function(t){k=t.VCamImpulse},function(t){A=t.VCamLens},function(t){E=t.VCamNoise},function(t){D=t.AimStage},function(t){R=t.BodyStage},function(t){V=t.ImpulseStage},function(t){P=t.NoiseStage}],execute:function(){var O,I,z,S,T,N,L,M,B,F,H,j,G,x,q,Q,J,K,U,W,X,Y,Z;s._RF.push({},"da2eckhiV9Nqb1o2a0AmaNc","VirtualCamera",void 0);var $=l.ccclass,tt=l.property,et=l.executeInEditMode;t("VirtualCamera",(O=$("VirtualCamera"),I=tt({visible:!1}),z=tt({visible:!1}),S=tt({tooltip:"i18n:cinestation.VirtualCamera.debug"}),T=tt({tooltip:"i18n:cinestation.VirtualCamera.priority"}),N=tt({tooltip:"i18n:cinestation.VirtualCamera.lookAt",type:c}),L=tt({tooltip:"i18n:cinestation.VirtualCamera.follow",type:c}),M=tt({type:A}),B=tt({type:b}),F=tt({animatable:!1,type:w}),H=tt({animatable:!1,type:E}),j=tt({animatable:!1,type:k}),O(G=et((q=e((x=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this)._editorChanged=!0,e._composerChanged=!0,e._visibleDefault=!1,i(e,"_lookAt",q,n(e)),i(e,"_follow",Q,n(e)),i(e,"debug",J,n(e)),i(e,"priority",K,n(e)),i(e,"lens",U,n(e)),i(e,"body",W,n(e)),i(e,"aim",X,n(e)),i(e,"noise",Y,n(e)),i(e,"impulse",Z,n(e)),e._stages=[new R(n(e)),new D(n(e)),new P(n(e)),new V(n(e))],e._finalPosition=new u,e._finalRotation=new f,e._correctPosition=new u,e._correctRotation=new f,e._lookaheadPosition=new u,e}o(e,t);var s=e.prototype;return s.onLoad=function(){var t=this;CC_EDITOR&&(p.on(m.LENS_CHANGED,(function(){return t._modelChanged=!0})),p.on(m.EDITOR_CHANGED,(function(){return t._editorChanged=!0})),p.on(m.COMPOSER_CHANGED,(function(){return t._composerChanged=!0}))),this.node.on(c.EventType.TRANSFORM_CHANGED,this._onTransformChanged,this)},s._onTransformChanged=function(t){if(CC_EDITOR){if(!this.follow)return;if(t&c.TransformBit.POSITION)switch(this.body.type){case v.Tracked:this._editorChanged=!0;break;case v.FreeLook:u.subtract(this.body.freelook.followOffset,this.node.worldPosition,this.follow.worldPosition),this._editorChanged=!0}}},s.onEnable=function(){t.prototype.onEnable.call(this),_.addCamera(this)},s.onDisable=function(){t.prototype.onDisable.call(this),_.removeCamera(this),this.onDeActive()},s.onActive=function(){this._stages.forEach((function(t){return t.enable=!0}))},s.onDeActive=function(){this._stages.forEach((function(t){return t.enable=!1}))},s.updateCamera=function(t){if(!CC_EDITOR||this._isChangedInEditor()){f.identity(this._correctRotation),u.zero(this._correctPosition);for(var e,o=r(this._stages);!(e=o()).done;){e.value.updateStage(t)}}},s._isChangedInEditor=function(){return!!this._editorChanged&&(this._editorChanged=!1,!0)},s._updateMesh=function(t){for(var e=[new u(-1,-1,-1),new u(1,-1,-1),new u(-1,1,-1),new u(1,1,-1),new u(-1,-1,1),new u(1,-1,1),new u(-1,1,1),new u(1,1,1)],o=this.lens,i=h.getDesignResolutionSize(),n=d.perspective(new d,y(o.fov),i.width/i.height,o.near,o.far).invert(),r=0;r<8;r++)e[r].transformMat4(n);for(var a=[],s=[],l=0;l<8;l++)for(var c=0;c<3;c++)u.toArray(a,e[l],a.length),u.toArray(a,e[l^1<<c],a.length),s.push(1,1,1,1),s.push(1,1,1,1);return g.createMesh({positions:a,colors:s},t)},a(e,[{key:"active",get:function(){return _.vcam===this},set:function(t){t?_.activeCamera(this,0):this.active&&_.activeCamera(null,0)}},{key:"lookAt",get:function(){return this._lookAt},set:function(t){this._lookAt!==t&&(this._lookAt=t,this._editorChanged=CC_EDITOR,this._stages.forEach((function(e){return e.onLookAtChanged(t)})))}},{key:"follow",get:function(){return this._follow},set:function(t){this._follow!==t&&(this._follow=t,this._editorChanged=CC_EDITOR,this._stages.forEach((function(e){return e.onFollowChanged(t)})))}},{key:"correctPosition",get:function(){return this._correctPosition}},{key:"correctRotation",get:function(){return this._correctRotation}},{key:"finalPosition",get:function(){return u.add(this._finalPosition,this.node.worldPosition,this._correctPosition)}},{key:"finalRotation",get:function(){return f.multiply(this._finalRotation,this.node.worldRotation,this._correctRotation)}},{key:"lookaheadPosition",get:function(){return this._lookaheadPosition}}]),e}(C)).prototype,"_lookAt",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(x.prototype,"_follow",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(x.prototype,"debug",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(x.prototype,"active",[tt],Object.getOwnPropertyDescriptor(x.prototype,"active"),x.prototype),K=e(x.prototype,"priority",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(x.prototype,"lookAt",[N],Object.getOwnPropertyDescriptor(x.prototype,"lookAt"),x.prototype),e(x.prototype,"follow",[L],Object.getOwnPropertyDescriptor(x.prototype,"follow"),x.prototype),U=e(x.prototype,"lens",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new A}}),W=e(x.prototype,"body",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new b}}),X=e(x.prototype,"aim",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new w}}),Y=e(x.prototype,"noise",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new E}}),Z=e(x.prototype,"impulse",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new k}}),G=x))||G)||G));s._RF.pop()}}}));

System.register("chunks:///_virtual/Visualization.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationShareAssets.ts"],(function(e){var t,i,n,s,o,l,h,a;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){n=e.cclegacy,s=e._decorator,o=e.director,l=e.renderer,h=e.Component},function(e){a=e.cinestationShareAssets}],execute:function(){var d;n._RF.push({},"7a038csVHFLoq9j0arDRkNY","Visualization",void 0);var r=s.ccclass;s.property,e("Visualization",r("Visualization")(d=function(e){function n(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this)._modelChanged=!1,t._mesh=null,t._model=null,t._material=a.lineMaterial,t._visibleInRuntime=CC_EDITOR,t._visibleDefault=!0,t}t(n,e);var s=n.prototype;return s.onEnable=function(){this._visibleInRuntime&&(this._createModel(),this._attachToScene())},s.onDisable=function(){this._visibleInRuntime&&this._detachFromScene()},s._attachToScene=function(){this._model&&this.node&&this.node.scene&&(this._model.scene&&this._detachFromScene(),this._getRenderScene().addModel(this._model))},s._detachFromScene=function(){this._model&&this._model.scene&&this._model.scene.removeModel(this._model)},s._createModel=function(){this._model||(this._model=o.root.createModel(l.scene.Model),this._model.node=this._model.transform=this.node,this._model.enabled=this._visibleDefault,this._modelChanged=!0)},s.update=function(e){this._modelChanged&&this._model&&(this._modelChanged=!1,this._mesh=this._updateMesh(this._mesh),this._mesh&&this._model.initSubModel(0,this._mesh.renderingSubMeshes[0],this._material))},s._updateMesh=function(e){return e},i(n,[{key:"visible",get:function(){return!!this._model&&this._model.enabled},set:function(e){this._model&&(this._model.enabled=e)}}]),n}(h))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/ZipLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./index.js"],(function(e){var t,n,r,s,i,a;return{setters:[function(e){t=e.asyncToGenerator,n=e.createClass,r=e.regeneratorRuntime},function(e){s=e.cclegacy,i=e.assetManager},null,function(e){a=e.default}],execute:function(){s._RF.push({},"a0c8eY9RydMsobDnYBchPA9","ZipLoader",void 0);var o=new Map,p=new Map,c=0;e("default",function(){function e(){this.init()}var s=e.prototype;return s.downloadZip=function(e){return new Promise((function(t){i.downloader.downloadFile(e+".zip",{xhrResponseType:"arraybuffer"},null,(function(e,n){t(n)}))}))},s.loadZip=function(){var e=t(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.downloadZip(t);case 2:return n=e.sent,e.next=5,a.loadAsync(n);case 5:e.sent.forEach((function(e,n){n.dir||o.set(t+"/"+e,n)}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.init=function(){var e=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"response");Object.defineProperty(XMLHttpRequest.prototype,"response",{get:function(){return this.zipCacheUrl?p.get(this.zipCacheUrl):e.get.call(this)},set:function(e){},configurable:!0});var n=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,t,r,s,i){return o.has(t)&&(this.zipCacheUrl=t),n.apply(this,arguments)};var s=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=t(r().mark((function e(t){var n,i,a,u=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.zipCacheUrl){e.next=17;break}if(p.has(this.zipCacheUrl)){e.next=15;break}if(n=o.get(this.zipCacheUrl),"json"!==this.responseType){e.next=11;break}return this.zipCacheUrl+=c++,e.next=7,n.async("text");case 7:i=e.sent,p.set(this.zipCacheUrl,JSON.parse(i)),e.next=15;break;case 11:return e.next=13,n.async(this.responseType);case 13:a=e.sent,p.set(this.zipCacheUrl,a);case 15:return this.onload(),e.abrupt("return");case 17:return e.abrupt("return",s.apply(this,u));case 18:case"end":return e.stop()}}),e,this)})))},n(e,null,[{key:"ins",get:function(){return this._ins||(this._ins=new e),this._ins}}]),e}())._ins=void 0,s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});